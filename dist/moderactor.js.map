{"version":3,"file":"moderactor.js","sources":["../src/core/adapter.js","../src/core/requests.js","../src/core/state.js","../src/adapters/bridge.js","../src/adapters/forumactif.js","../src/core/utils.js","../src/actions/_base.js","../src/actions/forum.js","../src/actions/topic.js","../src/core/moderation.js","../src/actions/post.js","../src/core/jsonld.js","../src/actions/user.js","../src/actions/chat.js","../src/parsers/pagination.js","../src/parsers/statsForum.js","../src/parsers/statsTopic.js","../src/parsers/statsProfile.js","../src/env.js","../src/moderactor.js"],"sourcesContent":["export class Adapter {\r\n    async get(url) {\r\n        throw new Error(\"Adapter.get not implemented\");\r\n    }\r\n    async post(url, data) {\r\n        throw new Error(\"Adapter.post not implemented\");\r\n    }\r\n    async getForm(url, formSelector) {\r\n        throw new Error(\"Adapter.getForm not implemented\");\r\n    }\r\n    bridge(resp) {\r\n        throw new Error(\"Adapter.bridge not implemented\");\r\n    }\r\n    get tid() {\r\n        return null;\r\n    }\r\n    get pagetype() {\r\n        return \"\";\r\n    }\r\n}\r\n","function encodeForm(data) {\r\n    const form_data = new FormData();\r\n    for (const key in data) {\r\n        const val = data[key];\r\n        if (Array.isArray(val)) {\r\n            const k = key.endsWith(\"[]\") ? key : key + \"[]\";\r\n            for (const v of val) form_data.append(k, v);\r\n        } else {\r\n            form_data.append(key, val);\r\n        }\r\n    }\r\n    return [...form_data.entries()]\r\n        .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)\r\n        .join(\"&\");\r\n}\r\n\r\nexport function htmlFromText(text) {\r\n    const parser = new DOMParser();\r\n    return parser.parseFromString(text, \"text/html\");\r\n}\r\n\r\nexport async function httpGet(url) {\r\n    const r = await fetch(url, { credentials: \"same-origin\" });\r\n    const text = await r.text();\r\n    return { ok: r.ok, status: r.status, text, doc: htmlFromText(text) };\r\n}\r\n\r\nexport async function httpPost(url, data) {\r\n    const body = encodeForm(data);\r\n    console.log(\"[httpPost] body:\", body);\r\n    const r = await fetch(url, {\r\n        method: \"POST\",\r\n        credentials: \"same-origin\",\r\n        headers: {\r\n            \"Content-Type\": \"application/x-www-form-urlencoded;charset=UTF-8\",\r\n        },\r\n        body,\r\n    });\r\n    const text = await r.text();\r\n    return { ok: r.ok, status: r.status, text, doc: htmlFromText(text) };\r\n}\r\n","function getTidFromDomOrUrl() {\r\n    const input = document.querySelector(\"input[name=tid]\");\r\n    if (input?.value) return input.value;\r\n\r\n    const anchor = document.querySelector(\"a[href*='&tid=']\");\r\n    const href = anchor?.getAttribute(\"href\") || \"\";\r\n    const m = href.match(/[?&]tid=([a-z0-9]+)/i);\r\n    if (m) return m[1];\r\n\r\n    // fallback: parse pathname (/t123-/f456-)\r\n    const p = location.pathname;\r\n    const t = p.match(/\\/t(\\d+)(?:p\\d+)?-/);\r\n    if (t) return t[1];\r\n    const f = p.match(/\\/f(\\d+)(?:p\\d+)?-/);\r\n    if (f) return f[1];\r\n\r\n    return null;\r\n}\r\n\r\nfunction getPageType() {\r\n    const p = location.pathname;\r\n    if (/^\\/t\\d+(p\\d+)?-/.test(p)) return \"topic\";\r\n    if (/^\\/f\\d+(p\\d+)?-/.test(p)) return \"forum\";\r\n    if (/^\\/c\\d+-/.test(p)) return \"category\";\r\n    if (/^\\/u\\d+/.test(p)) return \"profile\";\r\n    if (/^\\/privmsg\\?/.test(p)) return \"inbox\";\r\n    const qs = p + location.search;\r\n    const m = qs.match(/\\/modcp\\?mode=([^&]+)/);\r\n    return m ? m[1] : \"\";\r\n}\r\n\r\nfunction getResId() {\r\n    const p = location.pathname;\r\n    let m = p.match(/^\\/[tfc](\\d+)(?:p\\d+)?-/);\r\n    if (!m) m = p.match(/^\\/u(\\d+)/);\r\n    return m ? Number(m[1]) : 0;\r\n}\r\n\r\nfunction getPageNum() {\r\n    const p = location.pathname;\r\n    const m = p.match(/^\\/[tf]\\d+(p\\d+)-/);\r\n    return m ? Number(m[1].slice(1)) : 0;\r\n}\r\n\r\nexport const state = {\r\n    get tid() {\r\n        return getTidFromDomOrUrl();\r\n    },\r\n    get pagetype() {\r\n        return getPageType();\r\n    },\r\n    get resid() {\r\n        return getResId();\r\n    },\r\n    get pagenum() {\r\n        return getPageNum();\r\n    },\r\n    get charset() {\r\n        return (\r\n            document.charset ||\r\n            document.characterSet ||\r\n            \"utf-8\"\r\n        ).toLowerCase();\r\n    },\r\n};\r\n","// ──────────────────────────────────────────────────────────────────────────────\r\n// File: src/adapters/phpbb3/bridge.js\r\n// ──────────────────────────────────────────────────────────────────────────────\r\n// Bridge pour Forumactif : parse les pages de confirmation/erreur\r\n\r\nfunction first(el, sel) {\r\n    return el.querySelector(sel) || undefined;\r\n}\r\nfunction all(el, sel) {\r\n    return Array.from(el.querySelectorAll(sel));\r\n}\r\n\r\nfunction extractMessage(doc) {\r\n    // Récupère tous les <p> et concatène leurs textes\r\n    const ps = Array.from(doc.querySelectorAll(\"p\")).map((p) =>\r\n        p.textContent.trim()\r\n    );\r\n    const text = ps.join(\" \").replace(/\\s+/g, \" \").trim();\r\n    return text;\r\n}\r\n\r\nfunction parseIdsFromHref(href) {\r\n    const ids = {};\r\n    if (!href) return ids;\r\n\r\n    // topic id (depuis /tID-... OU viewtopic?...t=ID)\r\n    const t =\r\n        href.match(/\\/t(\\d+)-/) || href.match(/viewtopic\\?.*?[?&]t=(\\d+)/);\r\n    if (t) ids.topic_id = Number(t[1]);\r\n\r\n    // slug\r\n    const s = href.match(/\\/t\\d+-([^\\/?#]+)/);\r\n    if (s) ids.topic_slug = s[1];\r\n\r\n    // forum id\r\n    const f = href.match(/\\/f(\\d+)-/);\r\n    if (f) ids.forum_id = Number(f[1]);\r\n\r\n    // post id (anchor)\r\n    const p = href.match(/#(\\d+)$/);\r\n    if (p) ids.post_id = Number(p[1]);\r\n\r\n    // start (pagination)\r\n    const st = href.match(/[?&]start=(\\d+)/);\r\n    if (st) ids.start = Number(st[1]);\r\n\r\n    // flags utiles\r\n    ids.is_topic = /^\\/t\\d+-/.test(href);\r\n    ids.is_viewtopic = /\\/viewtopic\\?/.test(href);\r\n\r\n    return ids;\r\n}\r\n\r\nfunction canonicalTopicUrl(doc) {\r\n    const a = doc.querySelector('a[href^=\"/t\"]');\r\n    return a ? a.getAttribute(\"href\") : undefined;\r\n}\r\n\r\nfunction inferAction(message) {\r\n    const lower = (message || \"\").toLowerCase();\r\n    if (/déplacé/.test(lower)) return \"topic.move\";\r\n    if (/verrouill/.test(lower) && !/déverrouill/.test(lower))\r\n        return \"topic.lock\";\r\n    if (/déverrouill/.test(lower)) return \"topic.unlock\";\r\n    if (/supprim/.test(lower)) return \"topic.delete\";\r\n    if (/corbeille|poubelle/.test(lower)) return \"topic.trash\";\r\n    if (/répon|enregistré avec succès/.test(lower)) return \"topic.post\";\r\n    if (/nouveau sujet/.test(lower)) return \"forum.post\";\r\n    if (/message priv/.test(lower)) return \"user.pm\";\r\n    if (/banni/.test(lower)) return \"user.ban\";\r\n    if (/débanni|unban/.test(lower)) return \"user.unban\";\r\n    return \"unknown\";\r\n}\r\n\r\nfunction validateOk(action, message) {\r\n    const lowerMsg = (message || \"\").toLowerCase();\r\n    switch (action) {\r\n        case \"topic.move\":\r\n            return /déplacé/.test(lowerMsg);\r\n        case \"topic.lock\":\r\n            return /verrouill/.test(lowerMsg);\r\n        case \"topic.unlock\":\r\n            return /déverrouill/.test(lowerMsg);\r\n        case \"topic.delete\":\r\n            return /supprim/.test(lowerMsg);\r\n        case \"topic.trash\":\r\n            return /corbeille|poubelle/.test(lowerMsg);\r\n        case \"topic.post\":\r\n            return /répon|enregistré avec succès/.test(lowerMsg);\r\n        case \"forum.post\":\r\n            return /nouveau sujet/.test(lowerMsg);\r\n        case \"user.pm\":\r\n            return /message priv/.test(lowerMsg);\r\n        case \"user.ban\":\r\n            return /banni/.test(lowerMsg);\r\n        case \"user.unban\":\r\n            return /débanni|unban/.test(lowerMsg);\r\n        default:\r\n            return false;\r\n    }\r\n}\r\n\r\nexport function bridgeParse(resp) {\r\n    const { doc, text } = resp;\r\n    const message = extractMessage(doc);\r\n\r\n    const firstLink = first(doc, \"a[href]\");\r\n    const href = firstLink ? firstLink.getAttribute(\"href\") : \"\";\r\n    const ids = parseIdsFromHref(href);\r\n\r\n    const action = inferAction(message);\r\n    const ok = validateOk(action, message);\r\n\r\n    const topicLink = all(doc, 'a[href^=\"/t\"], a[href*=\"viewtopic\"]').map((a) =>\r\n        a.getAttribute(\"href\")\r\n    )[0];\r\n    const forumLink = all(doc, 'a[href^=\"/f\"]').map((a) =>\r\n        a.getAttribute(\"href\")\r\n    )[0];\r\n\r\n    // Tente d’obtenir une URL canonique de sujet (si on n’a qu’un viewtopic)\r\n    let topicUrl = topicLink;\r\n    if (topicUrl && /viewtopic\\?/.test(topicUrl)) {\r\n        const can = canonicalTopicUrl(doc);\r\n        if (can) topicUrl = can;\r\n    }\r\n\r\n    const links = {\r\n        first: href || undefined,\r\n        topic: topicUrl || undefined,\r\n        forum: forumLink || undefined,\r\n    };\r\n\r\n    // Entité normalisée pour usage direct par Moderactor\r\n    const entity = {};\r\n    if (ok) {\r\n        if (\r\n            action === \"forum.post\" ||\r\n            (action === \"topic.post\" && ids.is_topic)\r\n        ) {\r\n            // Création d’un nouveau sujet\r\n            entity.topic = {\r\n                id: ids.topic_id,\r\n                url: links.topic,\r\n                slug: ids.topic_slug,\r\n                forumId: ids.forum_id,\r\n            };\r\n        } else if (action === \"topic.post\") {\r\n            // Réponse dans un sujet existant\r\n            // si pas de lien canonique, on garde viewtopic#post\r\n            const postHref = links.topic || href;\r\n            entity.post = {\r\n                id: ids.post_id,\r\n                topicId: ids.topic_id,\r\n                url: postHref,\r\n            };\r\n        } else if (action === \"user.pm\") {\r\n            entity.pm = { inboxUrl: \"/privmsg?folder=inbox\" };\r\n        }\r\n    }\r\n\r\n    return {\r\n        ok,\r\n        status: resp.status,\r\n        action,\r\n        message,\r\n        ids,\r\n        links,\r\n        href,\r\n        entity,\r\n        raw: text,\r\n    };\r\n}\r\n\r\nexport const __bridgeInternals = {\r\n    extractMessage,\r\n    parseIdsFromHref,\r\n    inferAction,\r\n    validateOk,\r\n};\r\n","import { Adapter } from \"../core/adapter.js\";\r\nimport { httpGet, httpPost } from \"../core/requests.js\";\r\nimport { state } from \"../core/state.js\";\r\nimport { bridgeParse } from \"./bridge.js\";\r\n\r\nclass ForumactifAdapter extends Adapter {\r\n    async get(url) {\r\n        return httpGet(url);\r\n    }\r\n    async post(url, data) {\r\n        return httpPost(url, data);\r\n    }\r\n    async getForm(url, formSelector) {\r\n        const resp = await this.get(url);\r\n        if (!resp.ok)\r\n            return { ok: false, status: resp.status, text: resp.text };\r\n        const form = resp.doc.querySelector(formSelector);\r\n        if (!form) return { ok: false, status: 404, text: \"Form not found\" };\r\n        const fd = new FormData(form);\r\n        const obj = Object.fromEntries(fd.entries());\r\n        return { ok: true, data: obj, doc: resp.doc };\r\n    }\r\n\r\n    bridge(resp) {\r\n        return bridgeParse(resp);\r\n    }\r\n    get tid() {\r\n        return state.tid;\r\n    }\r\n    get pagetype() {\r\n        return state.pagetype;\r\n    }\r\n}\r\n\r\nconst forumactifAdapter = new ForumactifAdapter();\r\nexport default forumactifAdapter;\r\n","export const isArray = Array.isArray;\r\n\r\nexport const toArray = (v) => (v == null ? [] : isArray(v) ? v : [v]);\r\n\r\nexport function byIdOrArray(input) {\r\n    return toArray(input)\r\n        .filter((x) => x != null)\r\n        .map((x) => (typeof x === \"number\" ? x : parseInt(String(x), 10)))\r\n        .filter((x) => Number.isFinite(x) && x > 0);\r\n}\r\n\r\nexport function safeLower(s) {\r\n    return String(s || \"\").toLowerCase();\r\n}\r\n\r\nexport const isNumericId = (v) =>\r\n    typeof v === \"number\" || /^\\d+$/.test(String(v));\r\n\r\nexport const uniqueNFC = (arr) =>\r\n    Array.from(new Set(arr.map((s) => toNFC(String(s)))));\r\n\r\nexport const toNFC = (s) => (typeof s === \"string\" ? s.normalize(\"NFC\") : s);\r\n\r\nexport function text(el) {\r\n    return (el?.textContent || \"\").trim();\r\n}\r\n\r\nexport function toISO(d) {\r\n    try {\r\n        return new Date(d).toISOString();\r\n    } catch {\r\n        return undefined;\r\n    }\r\n}\r\n\r\nexport const toKey = (s, replace = \"-\") =>\r\n    String(s || \"\")\r\n        .toString()\r\n        .normalize(\"NFD\")\r\n        .replace(/[\\u0300-\\u036f]/g, \"\")\r\n        .toLowerCase()\r\n        .trim()\r\n        .replace(/\\s+/g, replace)\r\n        .replace(/[^\\w-]+/g, \"\")\r\n        .replace(/--+/g, replace);\r\n\r\nexport function nextSiblingMatching(startEl, selector) {\r\n    let el = startEl?.nextElementSibling || null;\r\n    while (el && !el.matches(selector)) el = el.nextElementSibling;\r\n    return el || null;\r\n}\r\n\r\nexport const getDirectText = (el) =>\r\n    !el\r\n        ? \"\"\r\n        : Array.from(el.childNodes)\r\n              .filter((n) => n.nodeType === Node.TEXT_NODE)\r\n              .map((n) => n.nodeValue.trim())\r\n              .filter(Boolean)\r\n              .join(\" \");\r\n\r\nexport const num = (s) => {\r\n    const m = String(s || \"\")\r\n        .replace(/\\s/g, \"\")\r\n        .match(/-?\\d+/);\r\n    return m ? Number(m[0]) : undefined;\r\n};\r\n\r\nexport const idsFromHref = (href) => {\r\n    const ids = {};\r\n    if (!href) return ids;\r\n    const t = href.match(/\\/t(\\d+)/) || href.match(/[?&]t=(\\d+)/);\r\n    const p = href.match(/#p?(\\d+)$/);\r\n    const f = href.match(/\\/f(\\d+)-/);\r\n    if (t) ids.topic_id = Number(t[1]);\r\n    if (p) ids.post_id = Number(p[1]);\r\n    if (f) ids.forum_id = Number(f[1]);\r\n    return ids;\r\n};\r\n\r\nexport function uniq(arr) {\r\n    return Array.from(new Set(arr));\r\n}\r\n\r\n// Extrait {id, slug} depuis une URL canonique /t238-mon-sujet\r\nexport function parseFromUrl(u) {\r\n    try {\r\n        const href = typeof u === \"string\" ? u : u?.href || \"\";\r\n        const m = href.match(/\\/[ftc](\\d+)(?:[p]\\d+)?-([a-z0-9-]+)/i);\r\n        return m ? { id: Number(m[1]), slug: m[2] } : {};\r\n    } catch {\r\n        return {};\r\n    }\r\n}\r\n","import { byIdOrArray } from \"../core/utils.js\";\r\n\r\nexport class BaseResource {\r\n    constructor(ids, adapter) {\r\n        this.ids = byIdOrArray(ids);\r\n        this.adapter = adapter;\r\n    }\r\n    _all(promises) {\r\n        return Promise.all(promises);\r\n    }\r\n}\r\n","import { BaseResource } from \"./_base.js\";\r\n\r\nexport default class ForumResource extends BaseResource {\r\n    async post(input) {\r\n        const { subject, message, notify = 0 } = input || {};\r\n        if (!subject || !message)\r\n            throw new Error(\"Forum.post: subject et message sont requis\");\r\n        const tasks = this.ids.map((f) =>\r\n            this.adapter\r\n                .post(\"/post\", {\r\n                    post: 1,\r\n                    mode: \"newtopic\",\r\n                    f,\r\n                    subject,\r\n                    message,\r\n                    notify,\r\n                })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n}\r\n","import { BaseResource } from \"./_base.js\";\r\n\r\nexport default class TopicResource extends BaseResource {\r\n    async post(input) {\r\n        const { message, notify = 0 } = input || {};\r\n        if (!message) throw new Error(\"Topic.post: message est requis\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .post(\"/post\", { post: 1, mode: \"reply\", t, message, notify })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async lock() {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"Topic.lock: tid introuvable\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .get(`/modcp?mode=lock&t=${t}&tid=${tid}`)\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async unlock() {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"Topic.unlock: tid introuvable\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .get(`/modcp?mode=unlock&t=${t}&tid=${tid}`)\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async move(newForumId) {\r\n        if (!newForumId) throw new Error(\"Topic.move: forum id manquant\");\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"Topic.move: tid introuvable\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .post(`/modcp?tid=${tid}`, {\r\n                    tid,\r\n                    new_forum: \"f\" + newForumId,\r\n                    mode: \"move\",\r\n                    t,\r\n                    confirm: 1,\r\n                })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async trash() {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"Topic.trash: tid introuvable\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .get(`/modcp?mode=trash&t=${t}&tid=${tid}`)\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async delete() {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"Topic.remove: tid introuvable\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .post(`/modcp?tid=${tid}`, { t, mode: \"delete\", confirm: 1 })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n}\r\n","/**\r\n * Récupère l'id du topic (input name=\"t\") à partir d'un post via la page quote,\r\n * si explicitTopicId est absent.\r\n * @param {object} adapter - doit exposer getForm(url, selector)\r\n * @param {number|string|undefined|null} explicitTopicId\r\n * @param {number|string} postId\r\n * @returns {Promise<number>}\r\n */\r\nexport async function resolveTopicId(adapter, explicitTopicId, postId) {\r\n    if (explicitTopicId != null) return Number(explicitTopicId);\r\n\r\n    const form = await adapter.getForm(\r\n        `/post?p=${postId}&mode=quote`,\r\n        'form[method=\"post\"]'\r\n    );\r\n    if (!form?.ok) {\r\n        throw new Error(\r\n            \"resolveTopicId: impossible de récupérer le topic via quote()\"\r\n        );\r\n    }\r\n    const t = parseInt(form.data?.t, 10);\r\n    if (!t) throw new Error(\"resolveTopicId: topicId introuvable (form quote)\");\r\n    return t;\r\n}\r\n\r\n/**\r\n * Récupère l'id du forum du topic (input name=\"f\") via la page move,\r\n * si explicitForumId est absent.\r\n * @param {object} adapter - doit exposer getForm(url, selector)\r\n * @param {number|string} topicId\r\n * @param {number|string|undefined|null} explicitForumId\r\n * @param {number|string} tid - token modcp\r\n * @returns {Promise<number>}\r\n */\r\nexport async function resolveForumId(adapter, topicId, explicitForumId, tid) {\r\n    if (explicitForumId != null) return Number(explicitForumId);\r\n\r\n    const form = await adapter.getForm(\r\n        `/modcp?mode=move&t=${topicId}&tid=${tid}`,\r\n        'form[method=\"post\"]'\r\n    );\r\n    if (!form?.ok) {\r\n        throw new Error(\r\n            \"resolveForumId: impossible de récupérer le forum du topic\"\r\n        );\r\n    }\r\n    const f = parseInt(form.data?.f, 10);\r\n    if (!f) throw new Error(\"resolveForumId: forumId introuvable (form move)\");\r\n    return f;\r\n}\r\n","// actions/post.js\r\nimport { BaseResource } from \"./_base.js\";\r\nimport { resolveTopicId, resolveForumId } from \"../core/moderation.js\";\r\n\r\nexport default class PostResource extends BaseResource {\r\n    async delete() {\r\n        const tasks = this.ids.map((p) =>\r\n            this.adapter\r\n                .post(\"/post\", { p, mode: \"delete\", confirm: \"\" })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async update({ message }) {\r\n        if (!message) throw new Error(\"Post.update: message requis\");\r\n\r\n        const tasks = this.ids.map(async (p) => {\r\n            const form = await this.adapter.getForm(\r\n                `/post?p=${p}&mode=editpost`,\r\n                'form[name=\"post\"]'\r\n            );\r\n            if (!form.ok) return form;\r\n\r\n            const data = { ...form.data, message }; // <-- FIX\r\n            data.post = 1;\r\n\r\n            const resp = await this.adapter.post(\"/post\", data);\r\n            return this.adapter.bridge(resp);\r\n        });\r\n\r\n        return this._all(tasks);\r\n    }\r\n\r\n    /**\r\n     * Scinde un ou plusieurs messages vers un nouveau sujet\r\n     * @param {string} newTitle - Titre du nouveau sujet\r\n     * @param {number} [newForumId] - Forum cible (sinon forum courant)\r\n     * @param {number} [topicId] - Topic source (sinon déduit du post)\r\n     * @param {boolean} [beyond=false] - true = split beyond, false = split all\r\n     */\r\n    async split(\r\n        newTitle,\r\n        { newForumId = null, topicId = null, beyond = false } = {}\r\n    ) {\r\n        if (!this.ids.length) return [];\r\n        const tid = this.adapter.tid; // token temporaire\r\n        if (!tid) throw new Error(\"Post.split: tid introuvable\");\r\n\r\n        const subject = String(title || \"\").trim();\r\n        if (!subject) throw new Error(\"Post.split: subject requis\");\r\n\r\n        const firstPost = this.ids[0];\r\n\r\n        // Helpers fournis par moderactor.js\r\n        const t = await resolveTopicId(this.adapter, topicId, firstPost); // topic source\r\n        const f = await resolveForumId(this.adapter, t, newForumId, tid); // forum cible\r\n\r\n        const data = {\r\n            subject,\r\n            new_forum_id: \"f\" + Number(f),\r\n            \"post_id_list[]\": this.ids.map(Number),\r\n            t: Number(t),\r\n            mode: \"split\",\r\n            [\"split_type_\" + (beyond ? \"beyond\" : \"all\")]: 1,\r\n        };\r\n\r\n        const resp = await this.adapter.post(`/modcp?tid=${tid}`, data); // tid en URL\r\n        return this.adapter.bridge(resp);\r\n    }\r\n\r\n    async splitBeyond(title, newForumId, topicId) {\r\n        return this.split(title, newForumId, topicId, true);\r\n    }\r\n}\r\n","// src/core/jsonld.js\r\n// Utilitaires de parsing JSON‑LD (BreadcrumbList, DiscussionForumPosting, …)\r\n// - découplé du thème\r\n// - extensible via un registre de handlers\r\n\r\n/** Récupère tous les <script type=\"application/ld+json\"> du document */\r\nexport function getJsonLdNodes(doc = document) {\r\n    return Array.from(\r\n        doc.querySelectorAll('script[type=\"application/ld+json\"]')\r\n    );\r\n}\r\n\r\n/** Parse un <script> en JSON JS (retourne [] si erreur) */\r\nexport function parseJsonLdScript(node) {\r\n    try {\r\n        const txt = (node?.textContent || \"\").trim();\r\n        if (!txt) return [];\r\n        const parsed = JSON.parse(txt);\r\n        return normalizeJsonLdRoot(parsed);\r\n    } catch {\r\n        return [];\r\n    }\r\n}\r\n\r\n/** Normalise la racine: peut être objet, tableau, ou contenir @graph */\r\nexport function normalizeJsonLdRoot(root) {\r\n    const arr = Array.isArray(root) ? root : [root];\r\n    // aplatis les @graph éventuels\r\n    const items = [];\r\n    for (const it of arr) {\r\n        if (it && Array.isArray(it[\"@graph\"])) items.push(...it[\"@graph\"]);\r\n        else items.push(it);\r\n    }\r\n    // filtre les objets valides ayant un @type\r\n    return items.filter((x) => x && typeof x === \"object\" && x[\"@type\"]);\r\n}\r\n\r\n/* ===========================\r\n   Handlers par type JSON-LD\r\n   =========================== */\r\n\r\n/** Handler: BreadcrumbList → { type:'BreadcrumbList', items:[{position,url,name}] } */\r\nexport function extractBreadcrumbList(obj) {\r\n    if (\r\n        obj[\"@type\"] !== \"BreadcrumbList\" ||\r\n        !Array.isArray(obj.itemListElement)\r\n    )\r\n        return null;\r\n    const items = obj.itemListElement\r\n        .filter((li) => li && li[\"@type\"] === \"ListItem\" && li.item)\r\n        .map((li) => ({\r\n            position: Number(li.position) || null,\r\n            url: (li.item && (li.item[\"@id\"] || li.item.url)) || null,\r\n            name: (li.item && li.item.name) || null,\r\n        }));\r\n    return items.length ? { type: \"BreadcrumbList\", items } : null;\r\n}\r\n\r\n/** Handler: DiscussionForumPosting → objet normalisé du topic */\r\nexport function extractDiscussionForumPosting(obj) {\r\n    if (obj[\"@type\"] !== \"DiscussionForumPosting\") return null;\r\n    const interaction = obj.interactionStatistic || {};\r\n    const interactionCount = Number(interaction.userInteractionCount) || null;\r\n    return {\r\n        type: \"DiscussionForumPosting\",\r\n        headline: obj.headline || null,\r\n        name: obj.name || null,\r\n        url: obj.url || null,\r\n        datePublished: obj.datePublished || null,\r\n        dateModified: obj.dateModified || null,\r\n        pageStart: Number(obj.pageStart) || null,\r\n        pageEnd: Number(obj.pageEnd) || null,\r\n        author: obj.author?.name || null,\r\n        author_url: obj.author?.url || null,\r\n        publisher: obj.publisher?.name || null,\r\n        logo: obj.publisher?.logo?.url || null,\r\n        image: obj.image || null,\r\n        interactionCount,\r\n    };\r\n}\r\n\r\n/* ===========================\r\n   Registre extensible\r\n   =========================== */\r\n\r\nconst defaultHandlers = new Map([\r\n    [\"BreadcrumbList\", extractBreadcrumbList],\r\n    [\"DiscussionForumPosting\", extractDiscussionForumPosting],\r\n]);\r\n\r\n/** Permet d’enregistrer/écraser un handler pour un @type donné */\r\nexport function registerJsonLdHandler(type, handlerFn) {\r\n    defaultHandlers.set(type, handlerFn);\r\n}\r\n\r\n/**\r\n * Parse tout le JSON‑LD de la page et renvoie un objet par type.\r\n * @param {Document} doc\r\n * @param {string[]=} onlyTypes liste de types à extraire (sinon tous ceux connus)\r\n * @returns {{ byType: Record<string, any[]>, all: any[] }}\r\n */\r\nexport function extractJsonLd(doc = document, onlyTypes) {\r\n    const nodes = getJsonLdNodes(doc);\r\n    const resultsByType = {};\r\n    const allRaw = [];\r\n\r\n    for (const node of nodes) {\r\n        const items = parseJsonLdScript(node);\r\n        for (const obj of items) {\r\n            const t = Array.isArray(obj[\"@type\"])\r\n                ? obj[\"@type\"][0]\r\n                : obj[\"@type\"];\r\n            allRaw.push(obj);\r\n\r\n            // Filtrage par types demandés (facultatif)\r\n            if (onlyTypes && !onlyTypes.includes(t)) continue;\r\n\r\n            // Si on a un handler, on l’applique\r\n            const handler = defaultHandlers.get(t);\r\n            if (handler) {\r\n                const normalized = handler(obj);\r\n                if (normalized) {\r\n                    if (!resultsByType[t]) resultsByType[t] = [];\r\n                    resultsByType[t].push(normalized);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return { byType: resultsByType, all: allRaw };\r\n}\r\n\r\n/** Raccourcis pratiques pour les 2 types courants */\r\nexport function extractBreadcrumbs(doc = document) {\r\n    return (\r\n        extractJsonLd(doc, [\"BreadcrumbList\"]).byType[\"BreadcrumbList\"] || []\r\n    );\r\n}\r\n\r\nexport function extractDiscussion(doc = document) {\r\n    return (\r\n        extractJsonLd(doc, [\"DiscussionForumPosting\"]).byType[\r\n            \"DiscussionForumPosting\"\r\n        ] || []\r\n    );\r\n}\r\n","import { BaseResource } from \"./_base.js\";\r\nimport { extractBreadcrumbs } from \"../core/jsonld.js\";\r\nimport { toNFC, isNumericId, uniqueNFC } from \"../core/utils.js\";\r\n\r\nexport async function fetchUsernameById(adapter, id) {\r\n    const r = await adapter.get(`/u${id}`);\r\n    if (!r?.ok) throw new Error(`fetchUsernameById: HTTP ${r?.status}`);\r\n\r\n    // 1) JSON-LD → BreadcrumbList\r\n    const crumbs = extractBreadcrumbs(r.doc);\r\n    if (crumbs.length) {\r\n        const last = crumbs[0].items\r\n            .slice()\r\n            .sort((a, b) => (a.position ?? 0) - (b.position ?? 0))\r\n            .pop();\r\n        const name = last?.name?.trim();\r\n        if (name) return name;\r\n    }\r\n\r\n    // Fallback DOM\r\n    const candidates = [\"meta[name='title']\"];\r\n    for (const sel of candidates) {\r\n        const el = r.doc.querySelector(sel);\r\n        const raw =\r\n            el?.getAttribute?.(\"content\")?.replace(/^Profil\\s*-\\s*/i, \"\") ||\r\n            el?.textContent ||\r\n            \"\";\r\n        const name = raw.trim();\r\n        if (name) return name;\r\n    }\r\n\r\n    throw new Error(`fetchUsernameById: username introuvable pour u${id}`);\r\n}\r\n\r\nexport async function resolveRecipients(adapter, input) {\r\n    const raw = Array.isArray(input) ? input : [input];\r\n\r\n    const jobs = raw.map((item) => {\r\n        if (isNumericId(item)) {\r\n            return fetchUsernameById(adapter, Number(item))\r\n                .then((name) => toNFC(name))\r\n                .catch(() => null);\r\n        }\r\n        if (typeof item === \"string\") {\r\n            const s = toNFC(item.trim());\r\n            return Promise.resolve(s || null);\r\n        }\r\n        return Promise.resolve(null);\r\n    });\r\n\r\n    const settled = await Promise.allSettled(jobs);\r\n    const names = settled\r\n        .filter((r) => r.status === \"fulfilled\" && r.value)\r\n        .map((r) => r.value);\r\n\r\n    return uniqueNFC(names);\r\n}\r\n\r\nexport default class UserResource extends BaseResource {\r\n    constructor(idsOrNames, adapter) {\r\n        const list = Array.isArray(idsOrNames) ? idsOrNames : [idsOrNames];\r\n        super(list, adapter);\r\n\r\n        this._raw = list;\r\n        this._idsOnly = list\r\n            .filter((v) => isNumericId(v))\r\n            .map((v) => Number(v));\r\n    }\r\n\r\n    /**\r\n     * Envoie un message privé.\r\n     * @param {object} param0\r\n     * @param {string} param0.subject\r\n     * @param {string} param0.message\r\n     * @param {Array<number|string>} [param0.usernames] – override optionnel (ids/noms)\r\n     */\r\n    async pm({ subject, message, usernames } = {}) {\r\n        if (!subject || !message) {\r\n            throw new Error(\"User.pm: subject et message requis\");\r\n        }\r\n\r\n        const recipients = await resolveRecipients(\r\n            this.adapter,\r\n            usernames ?? this._raw\r\n        );\r\n\r\n        if (!recipients.length) {\r\n            throw new Error(\"User.pm: aucun destinataire\");\r\n        }\r\n\r\n        /* const form = await this.adapter.getForm(\r\n            \"/privmsg?mode=post\",\r\n            'form[name=\"post\"]'\r\n        );\r\n        if (!form?.ok) {\r\n            throw new Error(\r\n                \"User.pm: formulaire introuvable (/privmsg?mode=post)\"\r\n            );\r\n        } */\r\n\r\n        const data = {\r\n            \"username[]\": recipients,\r\n            subject,\r\n            message,\r\n            post: 1,\r\n        };\r\n\r\n        const resp = await this.adapter.post(\"/privmsg\", data);\r\n        return this.adapter.bridge(resp);\r\n    }\r\n\r\n    /**\r\n     * Bannit les IDs présents dans le constructeur (ou fournis).\r\n     * @param {object} param0\r\n     * @param {number} [param0.days=0]\r\n     * @param {string} [param0.reason=\"\"]\r\n     * @param {Array<number>} [param0.ids] – override optionnel (IDs uniquement)\r\n     */\r\n    async ban({ days = 0, reason = \"\", ids } = {}) {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"User.ban: tid introuvable\");\r\n\r\n        const targetIds = Array.isArray(ids) ? ids : this._idsOnly;\r\n        if (!targetIds.length) throw new Error(\"User.ban: aucun ID numérique\");\r\n\r\n        const tasks = targetIds.map((user_id) =>\r\n            this.adapter\r\n                .post(`/modcp?tid=${tid}`, {\r\n                    tid,\r\n                    confirm: 1,\r\n                    mode: \"ban\",\r\n                    user_id,\r\n                    ban_user_date: days,\r\n                    ban_user_reason: reason,\r\n                })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async unban({ ids } = {}) {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"User.unban: tid introuvable\");\r\n\r\n        const targetIds = Array.isArray(ids) ? ids : this._idsOnly;\r\n        if (!targetIds.length)\r\n            throw new Error(\"User.unban: aucun ID numérique\");\r\n\r\n        const resp = await this.adapter.post(\r\n            `/admin/index.forum?part=users_groups&sub=users&mode=ban_control&extended_admin=1&tid=${tid}`,\r\n            { users_to_unban: targetIds, unban_users: 1 }\r\n        );\r\n        return this.adapter.bridge(resp);\r\n    }\r\n}\r\n","import { BaseResource } from \"./_base.js\";\r\n\r\nexport default class ChatResource extends BaseResource {\r\n    constructor(adapter) {\r\n        super([], adapter);\r\n    }\r\n    async post({ message }) {\r\n        if (!message) throw new Error(\"Chat.post: message requis\");\r\n        await this.adapter.post(\"/chatbox/actions.forum\", {\r\n            method: \"send\",\r\n            archive: 0,\r\n            message,\r\n        });\r\n        return { ok: true };\r\n    }\r\n}\r\n","export function parsePagination(\r\n    doc,\r\n    { pageSizeOverride, defaultPageSize = 50 } = {}\r\n) {\r\n    const out = {\r\n        current: undefined,\r\n        total: undefined,\r\n        page_size_detected: undefined,\r\n    };\r\n\r\n    // 1) Trouver le conteneur de pagination\r\n    const pager =\r\n        doc.querySelector(\".pagination\") ||\r\n        doc.querySelector(\".pagelink\") ||\r\n        doc.querySelector(\".topic-actions .pagination\");\r\n    if (pager) {\r\n        const txt = pager.textContent.replace(/\\s+/g, \" \").trim().toLowerCase();\r\n        // \"page 1 sur 750\" (FR) ou \"page 1 of 750\" (EN)\r\n        const m = txt.match(/page\\s+(\\d+)\\s+(?:sur|of)\\s+(\\d+)/i);\r\n        if (m) {\r\n            out.current = Number(m[1]);\r\n            out.total = Number(m[2]);\r\n        }\r\n    }\r\n\r\n    // 2) Heuristique taille de page : (a) override\r\n    let pageSize = Number.isFinite(pageSizeOverride)\r\n        ? pageSizeOverride\r\n        : undefined;\r\n\r\n    // 3) (b) Script inline Forumactif : start = (start - 1) * 35;\r\n    if (!pageSize && pager) {\r\n        for (const s of pager.querySelectorAll(\"script\")) {\r\n            const code = s.textContent || \"\";\r\n            const mm = code.match(/start\\s*=\\s*\\(start\\s*-\\s*1\\)\\s*\\*\\s*(\\d+)/);\r\n            if (mm) {\r\n                pageSize = Number(mm[1]);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 4) (c) Déduction via les liens /f103p35-... /f103p70-...\r\n    if (!pageSize && pager) {\r\n        const ps = [];\r\n        pager.querySelectorAll('a[href*=\"/f\"][href*=\"p\"]').forEach((a) => {\r\n            const href = a.getAttribute(\"href\") || \"\";\r\n            const m2 = href.match(/\\/f\\d+p(\\d+)-/i);\r\n            if (m2) ps.push(Number(m2[1]));\r\n        });\r\n        // La plus petite valeur non nulle correspond généralement à la taille de page\r\n        if (ps.length) {\r\n            const minPos = Math.min(...ps.filter((n) => n > 0));\r\n            if (Number.isFinite(minPos)) pageSize = minPos;\r\n        }\r\n    }\r\n\r\n    // 5) Fallback\r\n    if (!pageSize) pageSize = defaultPageSize;\r\n\r\n    out.page_size_detected = pageSize;\r\n    return out;\r\n}\r\n","import { getDirectText, idsFromHref } from \"../core/utils.js\";\r\nimport { parsePagination } from \"./pagination.js\";\r\n\r\n// Compte les lignes de sujets (selon plusieurs templates)\r\nconst countTopics = (doc) => {\r\n    const candidates = [\r\n        \"tr.topic\", // phpBB3\r\n        \"tr.rowtopic\", // anciens thèmes\r\n        \"li.topic\", // ModernBB/PunBB custom\r\n        \"div.topic\", // variantes\r\n        \"div.topics li\", // listes\r\n        \"a.topictitle\", // phpBB-like\r\n        \".topicslist_row.row\", // fallback parfois utile\r\n    ];\r\n    let max = 0;\r\n    for (const sel of candidates) {\r\n        const c = doc.querySelectorAll(sel).length;\r\n        max = Math.max(max, c);\r\n    }\r\n    // si on trouve 0, on ne renvoie rien (undefined)\r\n    return max || undefined;\r\n};\r\n\r\n// Récupère des métadonnées (titre, fil d’Ariane)\r\nconst readForumMeta = (doc) => {\r\n    // Titre de la page\r\n    const titleEl = doc.querySelector(\"h1.page-title, h1, .page-title\");\r\n    const name =\r\n        getDirectText(titleEl) ||\r\n        (titleEl?.textContent || \"\").trim() ||\r\n        undefined;\r\n\r\n    // id forum via canonical, breadcrumb ou premier lien /fXX-\r\n    let forum_id;\r\n    const canonical =\r\n        doc.querySelector('link[rel=\"canonical\"]')?.getAttribute(\"href\") || \"\";\r\n    forum_id = idsFromHref(canonical).forum_id;\r\n\r\n    // lien forum courant (utile pour re-naviguer)\r\n    const forumHref = canonical;\r\n\r\n    return {\r\n        name,\r\n        forum_id: Number.isFinite(forum_id) ? forum_id : undefined,\r\n        forumHref,\r\n    };\r\n};\r\n\r\n// Détection permission (peut varier)\r\n// Grossièrement selon la présence d’un bouton \"Nouveau\", \"Nouveau sujet\" ou d’un formulaire\r\nconst readPermissions = (doc) => {\r\n    const canPost =\r\n        !!doc.querySelector(\r\n            'a[href*=\"mode=newtopic\"], a[href*=\"post?f=\"], .button-newtopic, .btn-newtopic'\r\n        ) ||\r\n        !!doc.querySelector(\r\n            'form[action*=\"mode=newtopic\"], form[action*=\"/post\"]'\r\n        );\r\n\r\n    return { can_post: canPost };\r\n};\r\n\r\nexport function parseForumStats(\r\n    doc,\r\n    { pageSizeOverride, defaultPageSize = 50 } = {}\r\n) {\r\n    const meta = readForumMeta(doc);\r\n    const topicsListCount = countTopics(doc);\r\n    const perms = readPermissions(doc);\r\n\r\n    const pagination = parsePagination(doc, {\r\n        pageSizeOverride,\r\n        defaultPageSize,\r\n    });\r\n    const topics_estimated =\r\n        Number.isFinite(pagination.total) &&\r\n        Number.isFinite(pagination.page_size_detected)\r\n            ? pagination.total * pagination.page_size_detected\r\n            : undefined;\r\n\r\n    return {\r\n        id: meta.forum_id,\r\n        name: meta.name,\r\n        topics_count: topics_estimated ?? topicsListCount,\r\n        href: meta.forumHref || undefined,\r\n        pagination: {\r\n            current: pagination.current,\r\n            total: pagination.total,\r\n            page_size: pagination.page_size_detected,\r\n            topics_estimated: topics_estimated, // estimation globale par pagination\r\n            topics_visible: topicsListCount || undefined, // comptage réel de la page courante\r\n        },\r\n        permissions: perms,\r\n    };\r\n}\r\n","import { parseFromUrl } from \"../core/utils.js\";\r\nimport { parsePagination } from \"./pagination.js\";\r\n\r\nfunction countReplies(doc) {\r\n    const candidates = [\".postbody\"];\r\n    let max = 0;\r\n    for (const sel of candidates) {\r\n        const c = doc.querySelectorAll(sel).length;\r\n        max = Math.max(max, c);\r\n    }\r\n    // si on trouve 0, on ne renvoie rien (undefined)\r\n    return max || undefined;\r\n}\r\n\r\nexport function parseTopicStats(\r\n    doc,\r\n    { pageSizeOverride, defaultPageSize = 25 } = {}\r\n) {\r\n    const title =\r\n        discussion?.headline ||\r\n        doc.querySelector(\"h1.page-title\")?.textContent?.trim() ||\r\n        null;\r\n    const canonical = doc.querySelector('link[rel=\"canonical\"]')?.href || null;\r\n\r\n    const meta = parseFromUrl(canonical);\r\n    const url = canonical || null;\r\n    const topic_id = meta.id || null;\r\n\r\n    const repliesListCount = countReplies(doc);\r\n\r\n    const pagination = parsePagination(doc, {\r\n        pageSizeOverride,\r\n        defaultPageSize,\r\n    });\r\n    const replies_estimated =\r\n        Number.isFinite(pagination.total) &&\r\n        Number.isFinite(pagination.page_size_detected)\r\n            ? pagination.total * pagination.page_size_detected\r\n            : undefined;\r\n\r\n    return {\r\n        id: topic_id,\r\n        url,\r\n        slug: meta.slug || null,\r\n        title,\r\n        pagination: {\r\n            current: pagination.current,\r\n            total: pagination.total,\r\n            page_size: pagination.page_size_detected,\r\n            replies_estimated: replies_estimated, // estimation globale par pagination\r\n            replies_visible: repliesListCount || undefined, // comptage réel de la page courante\r\n        },\r\n        replies_count: replies_estimated ?? repliesListCount,\r\n    };\r\n}\r\n","import { getDirectText, toKey, nextSiblingMatching } from \"../core/utils\";\r\n\r\n/**\r\n * root\r\n * probe\r\n * dt pour  label\r\n * dd pour content (ou nextElementSibling si null/empty)\r\n */\r\nconst defaultCandidates = [\r\n    /** PHPBB2 ADVANCED */\r\n    {\r\n        probe: { type: \"selector\", sel: \"#profile-advanced-details dl\" },\r\n        dt: \"dt span\",\r\n        dd: \".field_uneditable\",\r\n    },\r\n    /** PHPBB3 & MODERNBB & AWESOMEBB ADVANCED */\r\n    {\r\n        probe: { type: \"selector\", sel: \"#profile-tab-field-profil dl\" },\r\n        dt: \"dt span\",\r\n        dd: \".field_uneditable\",\r\n    },\r\n    { probe: { type: \"selector\", sel: \".mod-login-avatar\" }, field: \"avatar\" },\r\n\r\n    /** PunBB & INVISION ADVANCED */\r\n    {\r\n        probe: { type: \"selector\", sel: \"#profile-advanced-details dl\" },\r\n        dt: \"dt span\",\r\n        dd: \".field_uneditable\", // => dt.nextElementSibling\r\n    },\r\n\r\n    {\r\n        probe: { type: \"selector\", sel: \"h1\" },\r\n        field: \"username\",\r\n        extract: {\r\n            mode: \"text\",\r\n            remove: [/^Tout à propos de\\s*/i],\r\n            normalizeWhitespace: true,\r\n        },\r\n    },\r\n];\r\n\r\nfunction whenEmpty(s) {\r\n    return s === \"-\" ? \"\" : s;\r\n}\r\n\r\nfunction pickCandidates(doc, candidates = []) {\r\n    const matches = [];\r\n    for (const c of candidates) {\r\n        if (c.probe?.type === \"selector\" && typeof c.probe.sel === \"string\") {\r\n            const roots = doc.querySelectorAll(c.probe.sel);\r\n            if (roots.length) {\r\n                matches.push({ cfg: c, roots: Array.from(roots) });\r\n            }\r\n        }\r\n    }\r\n    return matches;\r\n}\r\n\r\nfunction extractValue(rootEl, c) {\r\n    const ex = c.extract;\r\n\r\n    // 1) extract peut être une fonction personnalisée\r\n    if (typeof ex === \"function\") {\r\n        return ex(rootEl) ?? \"\";\r\n    }\r\n\r\n    // 2) extract peut être une chaîne courte : \"text\" | \"innerHTML\" | \"outerHTML\" | \"attr:NAME\"\r\n    if (typeof ex === \"string\") {\r\n        if (ex === \"text\") return rootEl.textContent?.trim() ?? \"\";\r\n        if (ex === \"innerHTML\") return rootEl.innerHTML?.trim() ?? \"\";\r\n        if (ex === \"outerHTML\") return rootEl.outerHTML?.trim() ?? \"\";\r\n        if (ex.startsWith(\"attr:\")) {\r\n            const attr = ex.slice(\"attr:\".length);\r\n            return (rootEl.getAttribute?.(attr) || \"\").trim();\r\n        }\r\n        // défaut: innerHTML\r\n        return rootEl.innerHTML?.trim() ?? \"\";\r\n    }\r\n\r\n    // 3) extract peut être un objet riche\r\n    if (ex && typeof ex === \"object\") {\r\n        // Options supportées :\r\n        // mode: \"text\" | \"innerHTML\" | \"outerHTML\" | \"attr\"\r\n        // sel: sous-sélecteur optionnel\r\n        // attr: nom d'attribut si mode === \"attr\"\r\n        // match: RegExp OU string (on garde le 1er groupe si RegExp avec groupe, sinon le match complet)\r\n        // remove: RegExp | string | Array<RegExp|string> à retirer\r\n        // replace: Array<[RegExp|string, string]> (chaîne de remplacements)\r\n        // normalizeWhitespace: boolean\r\n        // trim: boolean (défaut: true)\r\n\r\n        const {\r\n            mode = \"innerHTML\",\r\n            sel = null,\r\n            attr = null,\r\n            match = null,\r\n            remove = null,\r\n            replace = null,\r\n            normalizeWhitespace = false,\r\n            trim = true,\r\n        } = ex;\r\n\r\n        // cibler un sous-élément si demandé\r\n        const el = sel ? rootEl.querySelector(sel) || rootEl : rootEl;\r\n\r\n        let val = \"\";\r\n        if (mode === \"text\") val = el.textContent ?? \"\";\r\n        else if (mode === \"outerHTML\") val = el.outerHTML ?? \"\";\r\n        else if (mode === \"attr\" && attr) val = el.getAttribute?.(attr) ?? \"\";\r\n        else val = el.innerHTML ?? \"\"; // innerHTML par défaut\r\n\r\n        // match : garder seulement une portion\r\n        if (match) {\r\n            if (match instanceof RegExp) {\r\n                const m = val.match(match);\r\n                if (m) val = m[1] ?? m[0];\r\n                else val = \"\";\r\n            } else if (typeof match === \"string\") {\r\n                const idx = val.indexOf(match);\r\n                val = idx >= 0 ? match : \"\";\r\n            }\r\n        }\r\n\r\n        // remove : retirer motifs\r\n        const applyRemove = (v, pat) =>\r\n            pat instanceof RegExp ? v.replace(pat, \"\") : v.split(pat).join(\"\");\r\n        if (remove) {\r\n            if (Array.isArray(remove)) {\r\n                for (const pat of remove) val = applyRemove(val, pat);\r\n            } else {\r\n                val = applyRemove(val, remove);\r\n            }\r\n        }\r\n\r\n        // replace : liste de [pattern, repl]\r\n        if (Array.isArray(replace)) {\r\n            for (const [pat, repl] of replace) {\r\n                if (pat instanceof RegExp) val = val.replace(pat, repl);\r\n                else val = val.split(pat).join(repl);\r\n            }\r\n        }\r\n\r\n        if (normalizeWhitespace) {\r\n            val = val.replace(/\\s+/g, \" \");\r\n        }\r\n        if (trim) {\r\n            val = val.trim();\r\n        }\r\n        return val;\r\n    }\r\n\r\n    // 4) défaut si extract non fourni : innerHTML\r\n    return rootEl.innerHTML?.trim() ?? \"\";\r\n}\r\n\r\nfunction* iterEntriesForRoot(rootEl, c) {\r\n    // MODE A: champ unique via 'field' (ex: avatar) -> on remonte innerHTML\r\n    if (typeof c.field === \"string\") {\r\n        const key = toKey(c.field);\r\n        const value = extractValue(rootEl, c);\r\n        yield { key, valueEl: { textContent: value } };\r\n        return;\r\n    }\r\n\r\n    // MODE B: dt/dd classique (plusieurs paires)\r\n    const dtSel = c.dt || \"dt\";\r\n    const ddSel = c.dd ?? null;\r\n    const dts = rootEl.querySelectorAll(dtSel);\r\n\r\n    for (const dt of dts) {\r\n        let valueEl = null;\r\n        if (ddSel) {\r\n            valueEl =\r\n                nextSiblingMatching(dt, ddSel) || rootEl.querySelector(ddSel);\r\n        } else {\r\n            valueEl = dt.nextElementSibling;\r\n        }\r\n        const key = toKey(getDirectText(dt));\r\n        if (key) yield { key, valueEl };\r\n    }\r\n}\r\n\r\nfunction readUserFields(doc, candidates) {\r\n    // On veut tous les matchs, pas juste le premier\r\n    const choices = pickCandidates(doc, candidates);\r\n    if (!choices.length) return {};\r\n\r\n    const out = {};\r\n\r\n    for (const { cfg, roots } of choices) {\r\n        for (const rootEl of roots) {\r\n            for (const { key, valueEl } of iterEntriesForRoot(rootEl, cfg)) {\r\n                const value =\r\n                    valueEl && \"textContent\" in valueEl\r\n                        ? whenEmpty(valueEl.textContent.trim())\r\n                        : \"\";\r\n\r\n                if (!(key in out)) {\r\n                    out[key] = value;\r\n                } else if (value && !out[key].includes(value)) {\r\n                    out[key] = `${out[key]}, ${value}`;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return out;\r\n}\r\n\r\nexport function parseProfileStats(doc, { candidates } = {}) {\r\n    const merged = Array.isArray(candidates)\r\n        ? [...candidates, ...defaultCandidates]\r\n        : defaultCandidates;\r\n    return readUserFields(doc, merged);\r\n}\r\n","import { state } from \"./core/state.js\";\r\nimport { extractDiscussion, extractBreadcrumbs } from \"./core/jsonld.js\";\r\nimport { getDirectText, text } from \"./core/utils.js\";\r\nimport { parseForumStats } from \"./parsers/statsForum.js\";\r\nimport { parseTopicStats } from \"./parsers/statsTopic.js\";\r\nimport { parseProfileStats } from \"./parsers/statsProfile.js\";\r\n\r\nfunction parseMiscVars(data) {\r\n    const misc = {};\r\n    data.querySelectorAll(\"ul a\").forEach((el) => {\r\n        const l = el.innerText.replace(/[^a-zA-Z]/gi, \"\");\r\n        misc[l] = getDirectText(el.parentNode).replace(/^:/gi, \"\").trim();\r\n    });\r\n\r\n    misc[\"FORUMAGETYPE\"] = \"jours\";\r\n\r\n    misc[\"NOWDAY\"] = new Date().getDate();\r\n    misc[\"NOWMONTH\"] = new Date().getMonth() + 1;\r\n    misc[\"NOWYEAR\"] = new Date().getFullYear();\r\n    misc[\"NOWHOUR\"] = new Date().getHours();\r\n    misc[\"NOWMINUTE\"] = new Date().getMinutes();\r\n\r\n    misc[\"FORUMLASTUSERLINK\"] = misc[\"FORUMLASTUSERLINK\"].replace(\r\n        misc[\"FORUMURLINK\"],\r\n        \"\"\r\n    );\r\n    misc[\"USERLINK\"] = misc[\"USERLINK\"].replace(misc[\"FORUMURLINK\"], \"\");\r\n    misc[\"FORUMLASTUSERID\"] = misc[\"FORUMLASTUSERLINK\"].replace(/[^0-9]/gi, \"\");\r\n\r\n    return {\r\n        misc,\r\n    };\r\n}\r\n\r\nasync function computeStats({\r\n    scope = \"auto\",\r\n    fetchExtra = [],\r\n    forum = {},\r\n    topic = {},\r\n    profile = {},\r\n} = {}) {\r\n    const t0 = performance.now();\r\n    const sources = new Set();\r\n    const stats = {};\r\n\r\n    const doc = document;\r\n    const effective = scope === \"auto\" ? state.pagetype || \"auto\" : scope;\r\n\r\n    const defaultExtras = [\r\n        {\r\n            url: \"/popup_help.forum?l=miscvars&i=mes_txt\",\r\n            callback: parseMiscVars,\r\n        },\r\n    ];\r\n    const extras = [...defaultExtras, ...fetchExtra];\r\n    if (\r\n        effective === \"topic\" ||\r\n        (effective === \"auto\" && state.pagetype === \"forum\")\r\n    ) {\r\n        stats.topic =\r\n            state.pagetype === \"topic\"\r\n                ? parseTopicStats(doc, topic)\r\n                : undefined;\r\n    }\r\n    if (effective === \"forum\" || effective === \"auto\") {\r\n        stats.forum =\r\n            state.pagetype === \"forum\"\r\n                ? parseForumStats(doc, forum)\r\n                : undefined;\r\n    }\r\n    if (\r\n        effective === \"profile\" ||\r\n        (effective === \"auto\" && state.pagetype === \"profile\")\r\n    ) {\r\n        stats.profile =\r\n            state.pagetype === \"profile\"\r\n                ? parseProfileStats(doc, profile)\r\n                : undefined;\r\n    }\r\n\r\n    for (const { url, callback } of extras) {\r\n        try {\r\n            const r = await fetch(url, { credentials: \"same-origin\" });\r\n            sources.add(url);\r\n\r\n            const ct = r.headers.get(\"content-type\") || \"\";\r\n            let payload;\r\n            if (ct.includes(\"html\")) {\r\n                const html = await r.text();\r\n                payload = new DOMParser().parseFromString(html, \"text/html\");\r\n            } else if (ct.includes(\"json\")) {\r\n                payload = await r.json();\r\n            } else {\r\n                payload = await r.text();\r\n            }\r\n\r\n            const res = await callback(payload);\r\n            if (res && typeof res === \"object\") {\r\n                for (const [k, v] of Object.entries(res)) {\r\n                    if (typeof v === \"object\" && typeof stats[k] === \"object\") {\r\n                        stats[k] = { ...stats[k], ...v };\r\n                    } else {\r\n                        stats[k] = v;\r\n                    }\r\n                }\r\n            }\r\n\r\n            Object.assign(stats, res);\r\n        } catch (e) {\r\n            console.error(\"Error fetching extra data:\", e);\r\n        }\r\n    }\r\n\r\n    stats.computed_at = new Date().toISOString();\r\n    stats.elapse_ms = Math.round(performance.now() - t0);\r\n    stats.sources = Array.from(sources);\r\n    return stats;\r\n}\r\n\r\nexport async function env(options = { topic: {}, forum: {}, profile: {} }) {\r\n    const doc = document;\r\n    const statsWanted = !!options?.stats;\r\n    const forumPageSize = options?.stats?.forum?.pageSize;\r\n\r\n    const discussion = extractDiscussion(doc)[0] || null;\r\n    const breadcrumbs = extractBreadcrumbs(doc)[0] || null;\r\n\r\n    const u = location;\r\n    const hash = u.hash ? u.hash.substring(1) : null;\r\n\r\n    const _ud = typeof _userdata !== \"undefined\" ? _userdata : {};\r\n    const _bd = typeof _board !== \"undefined\" ? _board : {};\r\n\r\n    const data = {\r\n        board: {\r\n            tpl: _ud[\"tpl_used\"],\r\n            reputation_active: Number(_bd[\"reputation_active\"]),\r\n        },\r\n        page: {\r\n            url: u.href,\r\n            type: state.pagetype,\r\n            id: state.resid,\r\n            number: state.pagenum,\r\n            charset: state.charset,\r\n            anchor: hash,\r\n        },\r\n        user: {\r\n            t_id: state.tid,\r\n            name: _ud[\"username\"],\r\n            id: Number(_ud[\"user_id\"]) || undefined,\r\n            is_logged: Number(_ud[\"session_logged_in\"]) === 1,\r\n            is_guest: Number(_ud[\"user_id\"]) === -1,\r\n            is_admin: Number(_ud[\"user_level\"]) == 1,\r\n            is_mod: (Number(_ud[\"user_level\"]) || 0) > 0,\r\n            lang: _ud[\"user_lang\"],\r\n            notifications: Number(_ud[\"notifications\"]),\r\n            avatar: _ud[\"avatar\"],\r\n            avatar_link: _ud[\"avatar_link\"],\r\n            posts_count: Number(_ud[\"userposts\"]) || undefined,\r\n            privmsgs_count: Number(_ud[\"user_nb_privmsgs\"]) || undefined,\r\n            group_color: _ud[\"groupcolor\"],\r\n            points_count: Number(_bd[\"reputation_active\"])\r\n                ? Number(_ud[\"point_reputation\"])\r\n                : null,\r\n        },\r\n        schema: {\r\n            discussion,\r\n            breadcrumbs,\r\n        },\r\n    };\r\n\r\n    if (statsWanted) {\r\n        const s = await computeStats({\r\n            scope: options.scope || \"auto\",\r\n            fetchExtra: options.fetchExtra || [],\r\n            forum: { pageSize: forumPageSize },\r\n            topic: options?.topic || {},\r\n            profile: options?.profile || {},\r\n        });\r\n        data.stats = s;\r\n    }\r\n\r\n    return data;\r\n}\r\n","import forumactifAdapter from \"./adapters/forumactif.js\";\r\nimport ForumResource from \"./actions/forum.js\";\r\nimport TopicResource from \"./actions/topic.js\";\r\nimport PostResource from \"./actions/post.js\";\r\nimport UserResource from \"./actions/user.js\";\r\nimport ChatResource from \"./actions/chat.js\";\r\nimport UIInterface from \"./interfaces/ui.js\";\r\nimport { env as envFn } from \"./env.js\";\r\n\r\nconst ENV_GLOBAL_KEY = \"__MODERACTOR_ENV__\";\r\n\r\nconst getGlobal = () => {\r\n    if (typeof globalThis !== \"undefined\") return globalThis;\r\n    if (typeof window !== \"undefined\") return window;\r\n    if (typeof global !== \"undefined\") return global;\r\n    return {};\r\n};\r\n\r\nfunction cacheEnv(value) {\r\n    const g = getGlobal();\r\n    Moderactor._env = value;\r\n    try {\r\n        g[ENV_GLOBAL_KEY] = value;\r\n    } catch {}\r\n    return value;\r\n}\r\n\r\nfunction getCachedEnv() {\r\n    if (Moderactor._env) return Moderactor._env;\r\n    const g = getGlobal();\r\n    if (g[ENV_GLOBAL_KEY]) return (Moderactor._env = g[ENV_GLOBAL_KEY]);\r\n    return null;\r\n}\r\n\r\nfunction refreshEnv(opts = {}) {\r\n    const computed = envFn(opts);\r\n    return cacheEnv(computed);\r\n}\r\n\r\nconst Moderactor = {\r\n    env: () => {\r\n        const cached = getCachedEnv();\r\n        return cached ?? refreshEnv({ stats: true });\r\n    },\r\n    forum: (idOrArray) => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new ForumResource(idOrArray, forumactifAdapter);\r\n    },\r\n    topic: (idOrArray) => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new TopicResource(idOrArray, forumactifAdapter);\r\n    },\r\n    post: (idOrArray) => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new PostResource(idOrArray, forumactifAdapter);\r\n    },\r\n    user: (idOrArray) => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new UserResource(idOrArray, forumactifAdapter);\r\n    },\r\n    chat: () => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new ChatResource(forumactifAdapter);\r\n    },\r\n    /* ui: (options) => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new UIInterface(forumactifAdapter, options);\r\n    }, */\r\n    adapter: forumactifAdapter,\r\n};\r\n\r\nif (typeof window !== \"undefined\") {\r\n    window.Moderactor = Moderactor;\r\n}\r\n\r\nexport default Moderactor;\r\n"],"names":["envFn"],"mappings":"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"}