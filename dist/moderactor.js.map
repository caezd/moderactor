{"version":3,"file":"moderactor.js","sources":["../src/core/adapter.js","../src/core/requests.js","../src/core/state.js","../src/adapters/bridge.js","../src/adapters/forumactif.js","../src/core/utils.js","../src/actions/_base.js","../src/actions/forum.js","../src/actions/topic.js","../src/actions/post.js","../src/actions/user.js","../src/actions/chat.js","../src/interfaces/_base.js","../src/interfaces/ui.js","../src/core/jsonld.js","../src/parsers/pagination.js","../src/parsers/statsForum.js","../src/parsers/statsTopic.js","../src/env.js","../src/moderactor.js"],"sourcesContent":["export class Adapter {\r\n    async get(url) {\r\n        throw new Error(\"Adapter.get not implemented\");\r\n    }\r\n    async post(url, data) {\r\n        throw new Error(\"Adapter.post not implemented\");\r\n    }\r\n    async getForm(url, formSelector) {\r\n        throw new Error(\"Adapter.getForm not implemented\");\r\n    }\r\n    bridge(resp) {\r\n        throw new Error(\"Adapter.bridge not implemented\");\r\n    }\r\n    get tid() {\r\n        return null;\r\n    }\r\n    get pagetype() {\r\n        return \"\";\r\n    }\r\n}\r\n","function encodeForm(data) {\r\n    var form_data = new FormData();\r\n\r\n    for (var key in data) {\r\n        form_data.append(key, data[key]);\r\n    }\r\n    return [...form_data.entries()]\r\n        .map((x) => `${encodeURIComponent(x[0])}=${encodeURIComponent(x[1])}`)\r\n        .join(\"&\");\r\n}\r\n\r\nexport function htmlFromText(text) {\r\n    const parser = new DOMParser();\r\n    return parser.parseFromString(text, \"text/html\");\r\n}\r\n\r\nexport async function httpGet(url) {\r\n    const r = await fetch(url, { credentials: \"same-origin\" });\r\n    const text = await r.text();\r\n    return { ok: r.ok, status: r.status, text, doc: htmlFromText(text) };\r\n}\r\n\r\nexport async function httpPost(url, data) {\r\n    const body = encodeForm(data);\r\n    const r = await fetch(url, {\r\n        method: \"POST\",\r\n        credentials: \"same-origin\",\r\n        headers: {\r\n            \"Content-Type\": \"application/x-www-form-urlencoded;charset=UTF-8\",\r\n        },\r\n        body,\r\n    });\r\n    const text = await r.text();\r\n    return { ok: r.ok, status: r.status, text, doc: htmlFromText(text) };\r\n}\r\n","function getTidFromDomOrUrl() {\r\n    const input = document.querySelector(\"input[name=tid]\");\r\n    if (input?.value) return input.value;\r\n\r\n    const anchor = document.querySelector(\"a[href*='&tid=']\");\r\n    const href = anchor?.getAttribute(\"href\") || \"\";\r\n    const m = href.match(/[?&]tid=([a-z0-9]+)/i);\r\n    if (m) return m[1];\r\n\r\n    // fallback: parse pathname (/t123-/f456-)\r\n    const p = location.pathname;\r\n    const t = p.match(/\\/t(\\d+)(?:p\\d+)?-/);\r\n    if (t) return t[1];\r\n    const f = p.match(/\\/f(\\d+)(?:p\\d+)?-/);\r\n    if (f) return f[1];\r\n\r\n    return null;\r\n}\r\n\r\nfunction getPageType() {\r\n    const p = location.pathname;\r\n    if (/^\\/t\\d+(p\\d+)?-/.test(p)) return \"topic\";\r\n    if (/^\\/f\\d+(p\\d+)?-/.test(p)) return \"forum\";\r\n    if (/^\\/c\\d+-/.test(p)) return \"category\";\r\n    if (/^\\/u\\d+-/.test(p)) return \"profile\";\r\n    if (/^\\/privmsg\\?/.test(p)) return \"inbox\";\r\n    const qs = p + location.search;\r\n    const m = qs.match(/\\/modcp\\?mode=([^&]+)/);\r\n    return m ? m[1] : \"\";\r\n}\r\n\r\nfunction getResId() {\r\n    const p = location.pathname;\r\n    let m = p.match(/^\\/[tfc](\\d+)(?:p\\d+)?-/);\r\n    if (!m) m = p.match(/^\\/u(\\d+)/);\r\n    return m ? Number(m[1]) : 0;\r\n}\r\n\r\nfunction getPageNum() {\r\n    const p = location.pathname;\r\n    const m = p.match(/^\\/[tf]\\d+(p\\d+)-/);\r\n    return m ? Number(m[1].slice(1)) : 0;\r\n}\r\n\r\nexport const state = {\r\n    get tid() {\r\n        return getTidFromDomOrUrl();\r\n    },\r\n    get pagetype() {\r\n        return getPageType();\r\n    },\r\n    get resid() {\r\n        return getResId();\r\n    },\r\n    get pagenum() {\r\n        return getPageNum();\r\n    },\r\n    get charset() {\r\n        return (\r\n            document.charset ||\r\n            document.characterSet ||\r\n            \"utf-8\"\r\n        ).toLowerCase();\r\n    },\r\n};\r\n","// ──────────────────────────────────────────────────────────────────────────────\r\n// File: src/adapters/phpbb3/bridge.js\r\n// ──────────────────────────────────────────────────────────────────────────────\r\n// Bridge pour Forumactif : parse les pages de confirmation/erreur\r\n\r\nfunction first(el, sel) {\r\n    return el.querySelector(sel) || undefined;\r\n}\r\nfunction all(el, sel) {\r\n    return Array.from(el.querySelectorAll(sel));\r\n}\r\n\r\nfunction extractMessage(doc) {\r\n    // Récupère tous les <p> et concatène leurs textes\r\n    const ps = Array.from(doc.querySelectorAll(\"p\")).map((p) =>\r\n        p.textContent.trim()\r\n    );\r\n    const text = ps.join(\" \").replace(/\\s+/g, \" \").trim();\r\n    return text;\r\n}\r\n\r\nfunction parseIdsFromHref(href) {\r\n    const ids = {};\r\n    if (!href) return ids;\r\n    const t = href.match(/\\/(?:t|viewtopic\\?.*?t=)(\\d+)/);\r\n    if (t) ids.topic_id = Number(t[1]);\r\n    const f = href.match(/\\/f(\\d+)-/);\r\n    if (f) ids.forum_id = Number(f[1]);\r\n    const p = href.match(/#(\\d+)$/);\r\n    if (p) ids.post_id = Number(p[1]);\r\n    return ids;\r\n}\r\n\r\nfunction inferAction(message) {\r\n    const lower = (message || \"\").toLowerCase();\r\n    if (/déplacé/.test(lower)) return \"topic.move\";\r\n    if (/verrouill/.test(lower) && !/déverrouill/.test(lower))\r\n        return \"topic.lock\";\r\n    if (/déverrouill/.test(lower)) return \"topic.unlock\";\r\n    if (/supprim/.test(lower)) return \"topic.delete\";\r\n    if (/corbeille|poubelle/.test(lower)) return \"topic.trash\";\r\n    if (/répon|enregistré avec succès/.test(lower)) return \"topic.post\";\r\n    if (/nouveau sujet/.test(lower)) return \"forum.post\";\r\n    if (/message priv/.test(lower)) return \"user.pm\";\r\n    if (/banni/.test(lower)) return \"user.ban\";\r\n    if (/débanni|unban/.test(lower)) return \"user.unban\";\r\n    return \"unknown\";\r\n}\r\n\r\nfunction validateOk(action, message) {\r\n    const lowerMsg = (message || \"\").toLowerCase();\r\n    switch (action) {\r\n        case \"topic.move\":\r\n            return /déplacé/.test(lowerMsg);\r\n        case \"topic.lock\":\r\n            return /verrouill/.test(lowerMsg);\r\n        case \"topic.unlock\":\r\n            return /déverrouill/.test(lowerMsg);\r\n        case \"topic.delete\":\r\n            return /supprim/.test(lowerMsg);\r\n        case \"topic.trash\":\r\n            return /corbeille|poubelle/.test(lowerMsg);\r\n        case \"topic.post\":\r\n            return /répon|enregistré avec succès/.test(lowerMsg);\r\n        case \"forum.post\":\r\n            return /nouveau sujet/.test(lowerMsg);\r\n        case \"user.pm\":\r\n            return /message priv/.test(lowerMsg);\r\n        case \"user.ban\":\r\n            return /banni/.test(lowerMsg);\r\n        case \"user.unban\":\r\n            return /débanni|unban/.test(lowerMsg);\r\n        default:\r\n            return false;\r\n    }\r\n}\r\n\r\nexport function bridgeParse(resp) {\r\n    const { doc, text } = resp;\r\n    const message = extractMessage(doc);\r\n\r\n    const firstLink = first(doc, \"a[href]\");\r\n    const href = firstLink ? firstLink.getAttribute(\"href\") : \"\";\r\n    const ids = parseIdsFromHref(href);\r\n\r\n    const action = inferAction(message);\r\n    const ok = validateOk(action, message);\r\n\r\n    const links = {\r\n        first: href || undefined,\r\n        topic:\r\n            all(doc, 'a[href^=\"/t\"], a[href*=\"viewtopic\"]').map((a) =>\r\n                a.getAttribute(\"href\")\r\n            )[0] || undefined,\r\n        forum:\r\n            all(doc, 'a[href^=\"/f\"]').map((a) => a.getAttribute(\"href\"))[0] ||\r\n            undefined,\r\n    };\r\n\r\n    return {\r\n        ok,\r\n        status: resp.status,\r\n        action,\r\n        message,\r\n        ids,\r\n        links,\r\n        href,\r\n        raw: text,\r\n    };\r\n}\r\n\r\nexport const __bridgeInternals = {\r\n    extractMessage,\r\n    parseIdsFromHref,\r\n    inferAction,\r\n    validateOk,\r\n};\r\n","import { Adapter } from \"../core/adapter.js\";\r\nimport { httpGet, httpPost } from \"../core/requests.js\";\r\nimport { state } from \"../core/state.js\";\r\nimport { bridgeParse } from \"./bridge.js\";\r\n\r\nclass ForumactifAdapter extends Adapter {\r\n    async get(url) {\r\n        return httpGet(url);\r\n    }\r\n    async post(url, data) {\r\n        return httpPost(url, data);\r\n    }\r\n\r\n    async getForm(url, formSelector) {\r\n        const resp = await this.get(url);\r\n        if (!resp.ok)\r\n            return { ok: false, status: resp.status, text: resp.text };\r\n        const form = resp.doc.querySelector(formSelector);\r\n        if (!form) return { ok: false, status: 404, text: \"Form not found\" };\r\n        const fd = new FormData(form);\r\n        const obj = Object.fromEntries(fd.entries());\r\n        return { ok: true, data: obj, doc: resp.doc };\r\n    }\r\n\r\n    bridge(resp) {\r\n        return bridgeParse(resp);\r\n    }\r\n    get tid() {\r\n        return state.tid;\r\n    }\r\n    get pagetype() {\r\n        return state.pagetype;\r\n    }\r\n}\r\n\r\nconst forumactifAdapter = new ForumactifAdapter();\r\nexport default forumactifAdapter;\r\n","export const isArray = Array.isArray;\r\n\r\nexport const toArray = (v) => (v == null ? [] : isArray(v) ? v : [v]);\r\n\r\nexport function byIdOrArray(input) {\r\n    return toArray(input)\r\n        .filter((x) => x != null)\r\n        .map((x) => (typeof x === \"number\" ? x : parseInt(String(x), 10)))\r\n        .filter((x) => Number.isFinite(x) && x > 0);\r\n}\r\n\r\nexport function safeLower(s) {\r\n    return String(s || \"\").toLowerCase();\r\n}\r\nexport function text(el) {\r\n    return (el?.textContent || \"\").trim();\r\n}\r\nexport function toISO(d) {\r\n    try {\r\n        return new Date(d).toISOString();\r\n    } catch {\r\n        return undefined;\r\n    }\r\n}\r\n\r\nexport const getDirectText = (el) =>\r\n    !el\r\n        ? \"\"\r\n        : Array.from(el.childNodes)\r\n              .filter((n) => n.nodeType === Node.TEXT_NODE)\r\n              .map((n) => n.nodeValue.trim())\r\n              .filter(Boolean)\r\n              .join(\" \");\r\n\r\nexport const num = (s) => {\r\n    const m = String(s || \"\")\r\n        .replace(/\\s/g, \"\")\r\n        .match(/-?\\d+/);\r\n    return m ? Number(m[0]) : undefined;\r\n};\r\n\r\nexport const idsFromHref = (href) => {\r\n    const ids = {};\r\n    if (!href) return ids;\r\n    const t = href.match(/\\/t(\\d+)/) || href.match(/[?&]t=(\\d+)/);\r\n    const p = href.match(/#p?(\\d+)$/);\r\n    const f = href.match(/\\/f(\\d+)-/);\r\n    if (t) ids.topic_id = Number(t[1]);\r\n    if (p) ids.post_id = Number(p[1]);\r\n    if (f) ids.forum_id = Number(f[1]);\r\n    return ids;\r\n};\r\n\r\nexport function uniq(arr) {\r\n    return Array.from(new Set(arr));\r\n}\r\n\r\n// Extrait {id, slug} depuis une URL canonique /t238-mon-sujet\r\nexport function parseFromUrl(u) {\r\n    try {\r\n        const href = typeof u === \"string\" ? u : u?.href || \"\";\r\n        const m = href.match(/\\/[ftc](\\d+)(?:[p]\\d+)?-([a-z0-9-]+)/i);\r\n        return m ? { id: Number(m[1]), slug: m[2] } : {};\r\n    } catch {\r\n        return {};\r\n    }\r\n}\r\n","import { byIdOrArray } from \"../core/utils.js\";\r\n\r\nexport class BaseResource {\r\n    constructor(ids, adapter) {\r\n        this.ids = byIdOrArray(ids);\r\n        this.adapter = adapter;\r\n    }\r\n    _all(promises) {\r\n        return Promise.all(promises);\r\n    }\r\n}\r\n","import { BaseResource } from \"./_base.js\";\r\n\r\nexport default class ForumResource extends BaseResource {\r\n    async post(input) {\r\n        const { subject, message, notify = 0 } = input || {};\r\n        if (!subject || !message)\r\n            throw new Error(\"Forum.post: subject et message sont requis\");\r\n        const tasks = this.ids.map((f) =>\r\n            this.adapter\r\n                .post(\"/post\", {\r\n                    post: 1,\r\n                    mode: \"newtopic\",\r\n                    f,\r\n                    subject,\r\n                    message,\r\n                    notify,\r\n                })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n}\r\n","import { BaseResource } from \"./_base.js\";\r\n\r\nexport default class TopicResource extends BaseResource {\r\n    async post(input) {\r\n        const { message, notify = 0 } = input || {};\r\n        if (!message) throw new Error(\"Topic.post: message est requis\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .post(\"/post\", { post: 1, mode: \"reply\", t, message, notify })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async lock() {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"Topic.lock: tid introuvable\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .get(`/modcp?mode=lock&t=${t}&tid=${tid}`)\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async unlock() {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"Topic.unlock: tid introuvable\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .get(`/modcp?mode=unlock&t=${t}&tid=${tid}`)\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async move(newForumId) {\r\n        if (!newForumId) throw new Error(\"Topic.move: forum id manquant\");\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"Topic.move: tid introuvable\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .post(`/modcp?tid=${tid}`, {\r\n                    tid,\r\n                    new_forum: \"f\" + newForumId,\r\n                    mode: \"move\",\r\n                    t,\r\n                    confirm: 1,\r\n                })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async trash() {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"Topic.trash: tid introuvable\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .get(`/modcp?mode=trash&t=${t}&tid=${tid}`)\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async delete() {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"Topic.remove: tid introuvable\");\r\n        const tasks = this.ids.map((t) =>\r\n            this.adapter\r\n                .post(`/modcp?tid=${tid}`, { t, mode: \"delete\", confirm: 1 })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n}\r\n","import { BaseResource } from \"./_base.js\";\r\n\r\nexport default class PostResource extends BaseResource {\r\n    async delete() {\r\n        const tasks = this.ids.map((p) =>\r\n            this.adapter\r\n                .post(\"/post\", { p, mode: \"delete\", confirm: \"\" })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async update({ message }) {\r\n        if (!message) throw new Error(\"Post.update: message requis\");\r\n        const tasks = this.ids.map(async (p) => {\r\n            const form = await this.adapter.getForm(\r\n                `/post?p=${p}&mode=editpost`,\r\n                'form[name=\"post\"]'\r\n            );\r\n            if (!form.ok) return form;\r\n            const data = { ...form.data, message };\r\n            data.post = 1;\r\n            const resp = await this.adapter.post(\"/post\", data);\r\n            return this.adapter.bridge(resp);\r\n        });\r\n        return this._all(tasks);\r\n    }\r\n}\r\n","import { BaseResource } from \"./_base.js\";\r\n\r\nexport default class UserResource extends BaseResource {\r\n    async pm({ subject, message }) {\r\n        if (!subject || !message)\r\n            throw new Error(\"User.pm: subject et message requis\");\r\n        const username = this.ids.join(\", \");\r\n        const resp = await this.adapter.post(\"/privmsg\", {\r\n            username,\r\n            mode: \"post\",\r\n            post: 1,\r\n            subject,\r\n            message,\r\n        });\r\n        return this.adapter.bridge(resp);\r\n    }\r\n\r\n    async ban({ days = 0, reason = \"\" } = {}) {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"User.ban: tid introuvable\");\r\n        const tasks = this.ids.map((user_id) =>\r\n            this.adapter\r\n                .post(`/modcp?tid=${tid}`, {\r\n                    tid,\r\n                    confirm: 1,\r\n                    mode: \"ban\",\r\n                    user_id,\r\n                    ban_user_date: days,\r\n                    ban_user_reason: reason,\r\n                })\r\n                .then((r) => this.adapter.bridge(r))\r\n        );\r\n        return this._all(tasks);\r\n    }\r\n\r\n    async unban() {\r\n        const tid = this.adapter.tid;\r\n        if (!tid) throw new Error(\"User.unban: tid introuvable\");\r\n        const resp = await this.adapter.post(\r\n            `/admin/index.forum?part=users_groups&sub=users&mode=ban_control&extended_admin=1&tid=${tid}`,\r\n            { users_to_unban: this.ids, unban_users: 1 }\r\n        );\r\n        return this.adapter.bridge(resp);\r\n    }\r\n}\r\n","import { BaseResource } from \"./_base.js\";\r\n\r\nexport default class ChatResource extends BaseResource {\r\n    constructor(adapter) {\r\n        super([], adapter);\r\n    }\r\n    async post({ message }) {\r\n        if (!message) throw new Error(\"Chat.post: message requis\");\r\n        await this.adapter.post(\"/chatbox/actions.forum\", {\r\n            method: \"send\",\r\n            archive: 0,\r\n            message,\r\n        });\r\n        return { ok: true };\r\n    }\r\n}\r\n","// default options and extend with custom\r\nconst defaultOptions = {\r\n    targetContainer: null, // if null, append to body\r\n};\r\n\r\nexport default class BaseInterface {\r\n    constructor(adapter, options) {\r\n        this.adapter = adapter;\r\n        this.options = { ...defaultOptions, ...options };\r\n\r\n        // état du sélecteur d’actions\r\n        this._actionsRegistry = new Map(); // key -> { label, iconSVG }\r\n        this._visibleActions = []; // liste des keys visibles\r\n        this._selectedAction = null; // key sélectionnée\r\n        this._actionHandlers = new Set(); // callbacks onAction\r\n\r\n        this.build();\r\n    }\r\n\r\n    getContext() {\r\n        return this._resolveContext();\r\n    }\r\n\r\n    build() {\r\n        if (typeof document === \"undefined\") return;\r\n\r\n        const scope = this.options?.targetContainer || document;\r\n        const existingContainer = scope.querySelector(\r\n            \".moderactor-ui-container\"\r\n        );\r\n        if (existingContainer) existingContainer.remove();\r\n\r\n        this.container = document.createElement(\"div\");\r\n        this.container.classList.add(\"moderactor-ui-container\");\r\n\r\n        const fragment = document.createDocumentFragment();\r\n        fragment.appendChild(this.container);\r\n\r\n        (this.options?.targetContainer || document.body).appendChild(fragment);\r\n\r\n        this._buildActionSelect();\r\n\r\n        this._buildComposer();\r\n\r\n        this.onAction((key) => {\r\n            const ctx = this.getContext();\r\n            if (key === \"delete\") {\r\n                this._confirmAndDelete(ctx);\r\n            } else {\r\n                this._renderComposerFor(key, ctx);\r\n            }\r\n        });\r\n\r\n        console.log(\"Moderactor UI container ready:\", this.container);\r\n    }\r\n\r\n    defineActions(actionMap) {\r\n        // actionMap: { key: {label: string, icon: string (SVG path or full svg)} }\r\n        for (const [key, def] of Object.entries(actionMap)) {\r\n            const safe = {\r\n                label: def.label ?? key,\r\n                icon: def.icon ?? \"\", // innerHTML (svg string) ou texte\r\n            };\r\n            this._actionsRegistry.set(key, safe);\r\n        }\r\n        // si rien de visible encore, rendre visibles toutes par défaut\r\n        if (!this._visibleActions.length) {\r\n            this._visibleActions = [...this._actionsRegistry.keys()];\r\n            this._renderActionMenu();\r\n        }\r\n    }\r\n\r\n    setActions(keys) {\r\n        // restreint aux clés connues\r\n        this._visibleActions = keys.filter((k) => this._actionsRegistry.has(k));\r\n        // si la sélection actuelle n’est plus visible, bascule sur la première\r\n        if (!this._visibleActions.includes(this._selectedAction)) {\r\n            this._selectedAction = this._visibleActions[0] ?? null;\r\n        }\r\n        this._renderActionMenu();\r\n        this._updateActionButton();\r\n    }\r\n\r\n    selectAction(key) {\r\n        if (!this._actionsRegistry.has(key)) return;\r\n        this._selectedAction = key;\r\n        this._updateActionButton();\r\n        this._announceAction(key);\r\n    }\r\n\r\n    onAction(fn) {\r\n        if (typeof fn === \"function\") this._actionHandlers.add(fn);\r\n        return () => this._actionHandlers.delete(fn);\r\n    }\r\n\r\n    // compat avec ton appel existant\r\n    morphButtonDropdown(switchOption) {\r\n        this.selectAction(switchOption);\r\n    }\r\n    _buildActionSelect() {\r\n        // wrapper\r\n        this.actionRoot = document.createElement(\"div\");\r\n        this.actionRoot.className = \"mdr-action-select\";\r\n\r\n        // bouton toggle\r\n        this.actionButton = document.createElement(\"button\");\r\n        this.actionButton.type = \"button\";\r\n        this.actionButton.className = \"mdr-action-btn\";\r\n        this.actionButton.setAttribute(\"aria-haspopup\", \"listbox\");\r\n        this.actionButton.setAttribute(\"aria-expanded\", \"false\");\r\n        this.actionButton.innerHTML = `\r\n      <span class=\"mdr-action-icon\" aria-hidden=\"true\"></span>\r\n      <span class=\"mdr-action-label\"></span>\r\n      <span class=\"mdr-action-caret\" aria-hidden=\"true\">▾</span>\r\n    `;\r\n        this.actionRoot.appendChild(this.actionButton);\r\n\r\n        // menu (listbox)\r\n        this.actionMenu = document.createElement(\"ul\");\r\n        this.actionMenu.className = \"mdr-action-menu\";\r\n        this.actionMenu.setAttribute(\"role\", \"listbox\");\r\n        this.actionMenu.tabIndex = -1;\r\n        this.actionMenu.hidden = true;\r\n        this.actionRoot.appendChild(this.actionMenu);\r\n\r\n        // interactivité\r\n        this._bindActionSelectEvents();\r\n\r\n        // insérer dans le container\r\n        this.container.appendChild(this.actionRoot);\r\n\r\n        // valeurs par défaut (tu peux les surcharger via defineActions)\r\n        if (this._actionsRegistry.size === 0) {\r\n            this.defineActions({\r\n                create: { label: \"Créer\", icon: this._svgPlus() },\r\n                reply: { label: \"Répondre\", icon: this._svgReply() },\r\n                \"new-pm\": { label: \"Nouveau MP\", icon: this._svgMail() },\r\n                delete: { label: \"Supprimer\", icon: this._svgTrash() },\r\n            });\r\n            this._selectedAction = \"create\";\r\n            this._renderActionMenu();\r\n            this._updateActionButton();\r\n        }\r\n    }\r\n\r\n    _bindActionSelectEvents() {\r\n        // ouvrir/fermer\r\n        this.actionButton.addEventListener(\"click\", () => {\r\n            const isOpen =\r\n                this.actionButton.getAttribute(\"aria-expanded\") === \"true\";\r\n            this._setMenuOpen(!isOpen);\r\n        });\r\n\r\n        // clavier sur bouton\r\n        this.actionButton.addEventListener(\"keydown\", (e) => {\r\n            if (e.key === \"ArrowDown\" || e.key === \"ArrowUp\") {\r\n                e.preventDefault();\r\n                this._setMenuOpen(true);\r\n                this._focusFirstOrLast(e.key === \"ArrowUp\");\r\n            } else if (e.key === \"Enter\" || e.key === \" \") {\r\n                e.preventDefault();\r\n                const isOpen =\r\n                    this.actionButton.getAttribute(\"aria-expanded\") === \"true\";\r\n                this._setMenuOpen(!isOpen);\r\n            }\r\n        });\r\n\r\n        // clicks et clavier dans le menu\r\n        this.actionMenu.addEventListener(\"click\", (e) => {\r\n            const li = e.target.closest(\"[role='option']\");\r\n            if (!li) return;\r\n            this.selectAction(li.dataset.key);\r\n            this._setMenuOpen(false);\r\n            this.actionButton.focus();\r\n        });\r\n\r\n        this.actionMenu.addEventListener(\"keydown\", (e) => {\r\n            const items = this._menuItems();\r\n            const idx = items.indexOf(document.activeElement);\r\n            if (e.key === \"Escape\") {\r\n                e.preventDefault();\r\n                this._setMenuOpen(false);\r\n                this.actionButton.focus();\r\n            } else if (e.key === \"ArrowDown\") {\r\n                e.preventDefault();\r\n                const next = items[(idx + 1) % items.length];\r\n                next?.focus();\r\n            } else if (e.key === \"ArrowUp\") {\r\n                e.preventDefault();\r\n                const prev = items[(idx - 1 + items.length) % items.length];\r\n                prev?.focus();\r\n            } else if (e.key === \"Home\") {\r\n                e.preventDefault();\r\n                items[0]?.focus();\r\n            } else if (e.key === \"End\") {\r\n                e.preventDefault();\r\n                items[items.length - 1]?.focus();\r\n            } else if (e.key === \"Enter\" || e.key === \" \") {\r\n                e.preventDefault();\r\n                const li = document.activeElement;\r\n                if (li?.dataset?.key) {\r\n                    this.selectAction(li.dataset.key);\r\n                    this._setMenuOpen(false);\r\n                    this.actionButton.focus();\r\n                }\r\n            }\r\n        });\r\n\r\n        // fermeture click en dehors\r\n        document.addEventListener(\"click\", (e) => {\r\n            if (!this.actionRoot.contains(e.target)) this._setMenuOpen(false);\r\n        });\r\n    }\r\n\r\n    _renderActionMenu() {\r\n        // reconstruit la liste visible\r\n        this.actionMenu.innerHTML = \"\";\r\n        for (const key of this._visibleActions) {\r\n            const def = this._actionsRegistry.get(key);\r\n            if (!def) continue;\r\n            const li = document.createElement(\"li\");\r\n            li.setAttribute(\"role\", \"option\");\r\n            li.tabIndex = -1;\r\n            li.dataset.key = key;\r\n            li.className = \"mdr-action-item\";\r\n            li.innerHTML = `\r\n        <span class=\"mdr-action-item-icon\" aria-hidden=\"true\">${def.icon}</span>\r\n        <span class=\"mdr-action-item-label\">${def.label}</span>\r\n      `;\r\n            this.actionMenu.appendChild(li);\r\n        }\r\n        // marquer l’option sélectionnée\r\n        this._updateMenuSelection();\r\n    }\r\n\r\n    _updateActionButton() {\r\n        const def = this._actionsRegistry.get(this._selectedAction);\r\n        const iconSpan = this.actionButton.querySelector(\".mdr-action-icon\");\r\n        const labelSpan = this.actionButton.querySelector(\".mdr-action-label\");\r\n        iconSpan.innerHTML = def?.icon ?? \"\";\r\n        labelSpan.textContent = def?.label ?? \"\";\r\n        this._updateMenuSelection();\r\n    }\r\n\r\n    _updateMenuSelection() {\r\n        const items = this._menuItems();\r\n        for (const li of items) {\r\n            const selected = li.dataset.key === this._selectedAction;\r\n            li.setAttribute(\"aria-selected\", String(selected));\r\n            li.classList.toggle(\"is-selected\", selected);\r\n        }\r\n    }\r\n\r\n    _setMenuOpen(open) {\r\n        this.actionButton.setAttribute(\"aria-expanded\", String(open));\r\n        this.actionMenu.hidden = !open;\r\n        if (open) this._focusCurrentOrFirst();\r\n    }\r\n\r\n    _menuItems() {\r\n        return Array.from(this.actionMenu.querySelectorAll(\"[role='option']\"));\r\n    }\r\n\r\n    _focusFirstOrLast(last = false) {\r\n        const items = this._menuItems();\r\n        const el = last ? items[items.length - 1] : items[0];\r\n        el?.focus();\r\n    }\r\n\r\n    _focusCurrentOrFirst() {\r\n        const items = this._menuItems();\r\n        const current = items.find(\r\n            (li) => li.dataset.key === this._selectedAction\r\n        );\r\n        (current ?? items[0])?.focus();\r\n    }\r\n\r\n    _announceAction(key) {\r\n        // callbacks\r\n        for (const fn of this._actionHandlers) {\r\n            try {\r\n                fn(key);\r\n            } catch {}\r\n        }\r\n        // CustomEvent (si tu veux écouter ailleurs)\r\n        this.container.dispatchEvent(\r\n            new CustomEvent(\"mdr:action\", { detail: { key } })\r\n        );\r\n    }\r\n\r\n    // --------- petites icônes SVG inline (tu peux remplacer) -------------------\r\n    _svgPlus() {\r\n        return `<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z\"/></svg>`;\r\n    }\r\n    _svgReply() {\r\n        return `<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"M10 9V5l-7 7 7 7v-4.1c6 0 9.5 1.9 11 6.1-.5-6-4-12-11-12z\"/></svg>`;\r\n    }\r\n    _svgMail() {\r\n        return `<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"M20 4H4c-1.1 0-2 .9-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5L4 8V6l8 5 8-5v2z\"/></svg>`;\r\n    }\r\n    _svgTrash() {\r\n        return `<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"M3 6h18v2H3V6zm3 3h12l-1 12H7L6 9zm3-5h6v2H9V4z\"/></svg>`;\r\n    }\r\n\r\n    // -----------------------------------------------------------\r\n    //           MINI‑COMPOSER : UI + logique de submit\r\n    // -----------------------------------------------------------\r\n\r\n    _buildComposer() {\r\n        this.composerRoot = document.createElement(\"div\");\r\n        this.composerRoot.className = \"mdr-composer\";\r\n        this.composerRoot.hidden = true;\r\n\r\n        this.composerForm = document.createElement(\"form\");\r\n        this.composerForm.className = \"mdr-composer-form\";\r\n        this.composerForm.noValidate = true;\r\n\r\n        // zone dynamique\r\n        this.composerFields = document.createElement(\"div\");\r\n        this.composerFields.className = \"mdr-composer-fields\";\r\n\r\n        // barre d’actions\r\n        const actionsBar = document.createElement(\"div\");\r\n        actionsBar.className = \"mdr-composer-actions\";\r\n\r\n        this.composerSubmit = document.createElement(\"button\");\r\n        this.composerSubmit.type = \"submit\";\r\n        this.composerSubmit.className = \"mdr-btn mdr-btn--primary\";\r\n        this.composerSubmit.textContent = \"Envoyer\";\r\n\r\n        const cancelBtn = document.createElement(\"button\");\r\n        cancelBtn.type = \"button\";\r\n        cancelBtn.className = \"mdr-btn\";\r\n        cancelBtn.textContent = \"Annuler\";\r\n        cancelBtn.addEventListener(\"click\", () => {\r\n            this._hideComposer();\r\n        });\r\n\r\n        actionsBar.appendChild(this.composerSubmit);\r\n        actionsBar.appendChild(cancelBtn);\r\n\r\n        this.composerForm.appendChild(this.composerFields);\r\n        this.composerForm.appendChild(actionsBar);\r\n        this.composerRoot.appendChild(this.composerForm);\r\n        this.container.appendChild(this.composerRoot);\r\n\r\n        // submit → route vers la bonne Resource\r\n        this.composerForm.addEventListener(\"submit\", (e) => {\r\n            e.preventDefault();\r\n            this._handleComposerSubmit();\r\n        });\r\n    }\r\n\r\n    _showComposer() {\r\n        this.composerRoot.hidden = false;\r\n    }\r\n    _hideComposer() {\r\n        this.composerRoot.hidden = true;\r\n        this.composerFields.innerHTML = \"\";\r\n    }\r\n\r\n    _inputRow({ label, name, type = \"text\", placeholder = \"\", value = \"\" }) {\r\n        const row = document.createElement(\"label\");\r\n        row.className = \"mdr-row\";\r\n        const span = document.createElement(\"span\");\r\n        span.className = \"mdr-row-label\";\r\n        span.textContent = label;\r\n        const input = document.createElement(\"input\");\r\n        input.type = type;\r\n        input.name = name;\r\n        input.placeholder = placeholder;\r\n        input.value = value;\r\n        input.className = \"mdr-input\";\r\n        row.appendChild(span);\r\n        row.appendChild(input);\r\n        return row;\r\n    }\r\n\r\n    _textareaRow({ label, name, placeholder = \"\", value = \"\" }) {\r\n        const row = document.createElement(\"label\");\r\n        row.className = \"mdr-row\";\r\n        const span = document.createElement(\"span\");\r\n        span.className = \"mdr-row-label\";\r\n        span.textContent = label;\r\n        const ta = document.createElement(\"textarea\");\r\n        ta.name = name;\r\n        ta.placeholder = placeholder;\r\n        ta.value = value;\r\n        ta.rows = 6;\r\n        ta.className = \"mdr-textarea\";\r\n        row.appendChild(span);\r\n        row.appendChild(ta);\r\n        return row;\r\n    }\r\n\r\n    _renderComposerFor(actionKey, ctx) {\r\n        this.composerFields.innerHTML = \"\";\r\n        this.composerRoot.hidden = false;\r\n\r\n        // header accessible\r\n        this.composerRoot.setAttribute(\"aria-label\", `Composer: ${actionKey}`);\r\n\r\n        if (actionKey === \"create\") {\r\n            // créer un topic dans un forum\r\n            this.composerFields.appendChild(\r\n                this._inputRow({\r\n                    label: \"Titre\",\r\n                    name: \"title\",\r\n                    placeholder: \"Titre du sujet\",\r\n                })\r\n            );\r\n            this.composerFields.appendChild(\r\n                this._textareaRow({\r\n                    label: \"Contenu\",\r\n                    name: \"content\",\r\n                    placeholder: \"Écris ton message…\",\r\n                })\r\n            );\r\n            // forumId (visible seulement si non détecté)\r\n            if (!ctx.forumId && !ctx.categoryId) {\r\n                this.composerFields.appendChild(\r\n                    this._inputRow({\r\n                        label: \"Forum ID\",\r\n                        name: \"forumId\",\r\n                        type: \"number\",\r\n                        placeholder: \"Ex: 12\",\r\n                    })\r\n                );\r\n            }\r\n            this.composerSubmit.textContent = \"Créer le sujet\";\r\n        }\r\n\r\n        if (actionKey === \"reply\") {\r\n            // répondre dans un topic\r\n            this.composerFields.appendChild(\r\n                this._textareaRow({\r\n                    label: \"Réponse\",\r\n                    name: \"content\",\r\n                    placeholder: \"Ta réponse…\",\r\n                })\r\n            );\r\n            // topicId (si non détecté)\r\n            if (!ctx.topicId && !ctx.resid) {\r\n                this.composerFields.appendChild(\r\n                    this._inputRow({\r\n                        label: \"Topic ID\",\r\n                        name: \"topicId\",\r\n                        type: \"number\",\r\n                        placeholder: \"Ex: 345\",\r\n                    })\r\n                );\r\n            }\r\n            this.composerSubmit.textContent = \"Répondre\";\r\n        }\r\n\r\n        if (actionKey === \"new-pm\") {\r\n            // message privé\r\n            this.composerFields.appendChild(\r\n                this._inputRow({\r\n                    label: \"Sujet\",\r\n                    name: \"subject\",\r\n                    placeholder: \"Sujet du message\",\r\n                })\r\n            );\r\n            this.composerFields.appendChild(\r\n                this._textareaRow({\r\n                    label: \"Message\",\r\n                    name: \"content\",\r\n                    placeholder: \"Ton message…\",\r\n                })\r\n            );\r\n            // userId (si non détecté)\r\n            if (!ctx.userId) {\r\n                this.composerFields.appendChild(\r\n                    this._inputRow({\r\n                        label: \"Destinataire (userId)\",\r\n                        name: \"userId\",\r\n                        type: \"number\",\r\n                        placeholder: \"Ex: 123\",\r\n                    })\r\n                );\r\n            }\r\n            this.composerSubmit.textContent = \"Envoyer le MP\";\r\n        }\r\n\r\n        // focus le 1er champ utile\r\n        const firstInput = this.composerFields.querySelector(\"input, textarea\");\r\n        firstInput?.focus();\r\n    }\r\n\r\n    _handleComposerSubmit() {\r\n        const formData = new FormData(this.composerForm);\r\n        const data = Object.fromEntries(formData.entries());\r\n        const key = this._selectedAction;\r\n        const ctx = this.getContext();\r\n        const M =\r\n            typeof window !== \"undefined\" && window.Moderactor\r\n                ? window.Moderactor\r\n                : null;\r\n\r\n        if (!M) {\r\n            console.warn(\"[Moderactor] API globale introuvable.\");\r\n            return;\r\n        }\r\n\r\n        // routes concrètes (ajuste les noms méthodes selon tes Resources réelles)\r\n        if (key === \"create\") {\r\n            const forumId =\r\n                ctx.forumId ??\r\n                ctx.categoryId ??\r\n                (data.forumId ? Number(data.forumId) : null);\r\n            if (!forumId) return this._notifyMissing(\"forumId\");\r\n            const title = (data.title || \"\").trim();\r\n            const content = (data.content || \"\").trim();\r\n            if (!title || !content)\r\n                return alert(\"Titre et contenu sont requis.\");\r\n            try {\r\n                M.forum(forumId).createTopic({ title, content });\r\n                this._hideComposer();\r\n            } catch (e) {\r\n                console.error(e);\r\n                alert(\"Échec de création du sujet.\");\r\n            }\r\n        }\r\n\r\n        if (key === \"reply\") {\r\n            const topicId =\r\n                ctx.topicId ??\r\n                ctx.resid ??\r\n                (data.topicId ? Number(data.topicId) : null);\r\n            if (!topicId) return this._notifyMissing(\"topicId\");\r\n            const content = (data.content || \"\").trim();\r\n            if (!content) return alert(\"Le contenu est requis.\");\r\n            try {\r\n                M.post(topicId).reply({ content });\r\n                this._hideComposer();\r\n            } catch (e) {\r\n                console.error(e);\r\n                alert(\"Échec de l’envoi de la réponse.\");\r\n            }\r\n        }\r\n\r\n        if (key === \"new-pm\") {\r\n            const userId =\r\n                ctx.userId ?? (data.userId ? Number(data.userId) : null);\r\n            const subject = (data.subject || \"\").trim();\r\n            const content = (data.content || \"\").trim();\r\n            if (!subject || !content)\r\n                return alert(\"Sujet et message sont requis.\");\r\n            try {\r\n                // si userId absent, à toi de supporter une liste de destinataires à l’avenir\r\n                M.user(userId).message({ subject, content });\r\n                this._hideComposer();\r\n            } catch (e) {\r\n                console.error(e);\r\n                alert(\"Échec de l’envoi du MP.\");\r\n            }\r\n        }\r\n    }\r\n\r\n    _confirmAndDelete(ctx) {\r\n        const M =\r\n            typeof window !== \"undefined\" && window.Moderactor\r\n                ? window.Moderactor\r\n                : null;\r\n        if (!M) return;\r\n\r\n        const postId = ctx.postId ?? null;\r\n        const pmId = ctx.pmId ?? null;\r\n\r\n        if (!postId && !pmId) {\r\n            return this._notifyMissing(\"postId/pmId\");\r\n        }\r\n\r\n        const targetLabel = postId\r\n            ? `le post #${postId}`\r\n            : `le message privé #${pmId}`;\r\n        if (!confirm(`Supprimer définitivement ${targetLabel} ?`)) return;\r\n\r\n        try {\r\n            if (postId) {\r\n                M.post(postId).delete();\r\n            } else if (pmId) {\r\n                M.chat().delete(pmId);\r\n            }\r\n            // feedback minimal\r\n            alert(\"Suppression effectuée.\");\r\n        } catch (e) {\r\n            console.error(e);\r\n            alert(\"Échec de la suppression.\");\r\n        }\r\n    }\r\n\r\n    // -----------------------------------------------------------\r\n    //           CONTEXTE / DÉTECTION D’ID (déjà en place)\r\n    // -----------------------------------------------------------\r\n\r\n    getContext() {\r\n        return this._resolveContext();\r\n    }\r\n\r\n    _resolveContext() {\r\n        const a = this.adapter || {};\r\n        const ctx = {\r\n            pagetype: a.pagetype || null,\r\n            resid: a.resid ?? null,\r\n            forumId: a.forumid ?? null,\r\n            categoryId: a.categoryid ?? null,\r\n            topicId: a.topicid ?? null,\r\n            postId: a.postid ?? null,\r\n            userId: a.userid ?? null,\r\n            pmId: a.pmid ?? null,\r\n        };\r\n\r\n        const urlData = this._resolveFromUrl();\r\n        for (const k in urlData)\r\n            if (ctx[k] == null && urlData[k] != null) ctx[k] = urlData[k];\r\n\r\n        const domData = this._resolveFromDom();\r\n        for (const k in domData)\r\n            if (ctx[k] == null && domData[k] != null) ctx[k] = domData[k];\r\n\r\n        return ctx;\r\n    }\r\n\r\n    _resolveFromUrl() {\r\n        if (typeof location === \"undefined\") return {};\r\n        const href = location.href;\r\n        const mTopicPath = href.match(/\\/t(\\d+)[-\\/]?/i);\r\n        const mTopicQ = href.match(/[?&]t=(\\d+)/i);\r\n        const mPostPath = href.match(/\\/p(\\d+)[-\\/]?/i);\r\n        const mUserPath = href.match(/\\/u(\\d+)[-\\/]?/i);\r\n        const mForumQ = href.match(/[?&]f=(\\d+)/i);\r\n        const mCatQ = href.match(/[?&]c=(\\d+)/i);\r\n        const mPmQ = href.match(/[?&](msg|id)=(\\d+)/i);\r\n\r\n        return {\r\n            topicId: mTopicPath\r\n                ? Number(mTopicPath[1])\r\n                : mTopicQ\r\n                ? Number(mTopicQ[1])\r\n                : null,\r\n            postId: mPostPath ? Number(mPostPath[1]) : null,\r\n            userId: mUserPath ? Number(mUserPath[1]) : null,\r\n            forumId: mForumQ ? Number(mForumQ[1]) : null,\r\n            categoryId: mCatQ ? Number(mCatQ[1]) : null,\r\n            pmId: mPmQ ? Number(mPmQ[2]) : null,\r\n        };\r\n    }\r\n\r\n    _resolveFromDom() {\r\n        if (typeof document === \"undefined\") return {};\r\n        const pickNum = (sel, attr) => {\r\n            const el = document.querySelector(sel);\r\n            const v = el?.getAttribute(attr);\r\n            const n = v && /^\\d+$/.test(v) ? Number(v) : null;\r\n            return n ?? null;\r\n        };\r\n        return {\r\n            topicId: pickNum(\"[data-topic-id]\", \"data-topic-id\"),\r\n            postId: pickNum(\"[data-post-id]\", \"data-post-id\"),\r\n            userId: pickNum(\"[data-user-id]\", \"data-user-id\"),\r\n            forumId: pickNum(\"[data-forum-id]\", \"data-forum-id\"),\r\n            categoryId: pickNum(\"[data-category-id]\", \"data-category-id\"),\r\n            pmId: pickNum(\"[data-pm-id]\", \"data-pm-id\"),\r\n        };\r\n    }\r\n\r\n    _notifyMissing(name) {\r\n        console.warn(`[Moderactor] impossible d'identifier ${name}.`);\r\n    }\r\n\r\n    // action → ressource\r\n    performAction(key) {\r\n        const ctx = this._resolveContext();\r\n        const M =\r\n            typeof window !== \"undefined\" && window.Moderactor\r\n                ? window.Moderactor\r\n                : null;\r\n        if (!M) return console.warn(\"[Moderactor] API globale introuvable.\");\r\n\r\n        switch (key) {\r\n            case \"create\": {\r\n                // créer un topic dans le forum courant\r\n                const forumId = ctx.forumId ?? ctx.categoryId ?? null;\r\n                if (!forumId) return this._notifyMissing(\"forumId\");\r\n                // ex: ouvrir un composer, ou déclencher un flux natif\r\n                // M.forum(forumId).createTopic({ title: \"...\", content: \"...\" });\r\n                console.log(\"[Action] create → forum:\", forumId);\r\n                break;\r\n            }\r\n            case \"reply\": {\r\n                const topicId = ctx.topicId ?? ctx.resid ?? null;\r\n                if (!topicId) return this._notifyMissing(\"topicId\");\r\n                // M.post(topicId).reply({ content: \"...\" });\r\n                console.log(\"[Action] reply → topic:\", topicId);\r\n                break;\r\n            }\r\n            case \"new-pm\": {\r\n                // Depuis un profil, cible l'userId ; depuis inbox, pas de cible\r\n                const userId = ctx.userId ?? null;\r\n                // M.user(userId).message({ subject: \"...\", content: \"...\" })\r\n                console.log(\"[Action] new-pm → user:\", userId);\r\n                break;\r\n            }\r\n            case \"delete\": {\r\n                // selon le pagetype, on supprime un post/message/topic\r\n                const postId = ctx.postId ?? null;\r\n                const msgId = ctx.pmId ?? null;\r\n                console.log(\"[Action] delete → post:\", postId, \"pm:\", msgId);\r\n                // if (postId) M.post(postId).delete();\r\n                // else if (msgId) M.chat().delete(msgId);\r\n                break;\r\n            }\r\n            default:\r\n                console.warn(\"[Moderactor] action inconnue:\", key);\r\n        }\r\n    }\r\n\r\n    // ---------------------------------------------------------------------------\r\n    // internes : résolution du contexte (adapter d'abord, URL/DOM ensuite)\r\n\r\n    _resolveContext() {\r\n        const a = this.adapter || {};\r\n        const ctx = {\r\n            pagetype: a.pagetype || null,\r\n            resid: a.resid ?? null, // id principal fourni par l’adapter\r\n            forumId: a.forumid ?? null, // si ton adapter les expose\r\n            categoryId: a.categoryid ?? null,\r\n            topicId: a.topicid ?? null,\r\n            postId: a.postid ?? null,\r\n            userId: a.userid ?? null,\r\n            pmId: a.pmid ?? null,\r\n        };\r\n\r\n        // Complète par URL si manquant\r\n        const urlData = this._resolveFromUrl();\r\n        for (const k in urlData)\r\n            if (ctx[k] == null && urlData[k] != null) ctx[k] = urlData[k];\r\n\r\n        // DOM hints (facultatif): ex. <meta data-topic-id=\"123\">\r\n        const domData = this._resolveFromDom();\r\n        for (const k in domData)\r\n            if (ctx[k] == null && domData[k] != null) ctx[k] = domData[k];\r\n\r\n        return ctx;\r\n    }\r\n\r\n    _resolveFromUrl() {\r\n        if (typeof location === \"undefined\") return {};\r\n        const href = location.href;\r\n\r\n        // patterns forumactif (classiques)\r\n        // topic pages: .../t123- , .../topic?p=, ...&t=123\r\n        const mTopicPath = href.match(/\\/t(\\d+)[-\\/]?/i);\r\n        const mTopicQ = href.match(/[?&]t=(\\d+)/i);\r\n        const mPostPath = href.match(/\\/p(\\d+)[-\\/]?/i);\r\n        const mUserPath = href.match(/\\/u(\\d+)[-\\/]?/i);\r\n        const mForumQ = href.match(/[?&]f=(\\d+)/i);\r\n        const mCatQ = href.match(/[?&]c=(\\d+)/i);\r\n        const mPmQ = href.match(/[?&](msg|id)=(\\d+)/i); // privmsg\r\n\r\n        return {\r\n            topicId: mTopicPath\r\n                ? Number(mTopicPath[1])\r\n                : mTopicQ\r\n                ? Number(mTopicQ[1])\r\n                : null,\r\n            postId: mPostPath ? Number(mPostPath[1]) : null,\r\n            userId: mUserPath ? Number(mUserPath[1]) : null,\r\n            forumId: mForumQ ? Number(mForumQ[1]) : null,\r\n            categoryId: mCatQ ? Number(mCatQ[1]) : null,\r\n            pmId: mPmQ ? Number(mPmQ[2]) : null,\r\n        };\r\n    }\r\n\r\n    _resolveFromDom() {\r\n        if (typeof document === \"undefined\") return {};\r\n        const pickNum = (sel, attr) => {\r\n            const el = document.querySelector(sel);\r\n            const v = el?.getAttribute(attr);\r\n            const n = v && /^\\d+$/.test(v) ? Number(v) : null;\r\n            return n ?? null;\r\n        };\r\n\r\n        // à toi d’ajouter des hooks si ton thème fournit des data-* (exemples)\r\n        return {\r\n            topicId: pickNum(\"[data-topic-id]\", \"data-topic-id\"),\r\n            postId: pickNum(\"[data-post-id]\", \"data-post-id\"),\r\n            userId: pickNum(\"[data-user-id]\", \"data-user-id\"),\r\n            forumId: pickNum(\"[data-forum-id]\", \"data-forum-id\"),\r\n            categoryId: pickNum(\"[data-category-id]\", \"data-category-id\"),\r\n            pmId: pickNum(\"[data-pm-id]\", \"data-pm-id\"),\r\n        };\r\n    }\r\n\r\n    _notifyMissing(name) {\r\n        console.warn(`[Moderactor] impossible d'identifier ${name}.`);\r\n        // tu peux afficher un toast/UI ici si besoin\r\n    }\r\n}\r\n","import BaseInterface from \"./_base.js\";\r\n\r\nexport default class UIInterface extends BaseInterface {\r\n    build() {\r\n        super.build();\r\n\r\n        this.defineActions({\r\n            create: { label: \"Créer\", icon: this._svgPlus?.() || \"\" },\r\n            reply: { label: \"Répondre\", icon: this._svgReply?.() || \"\" },\r\n            \"new-pm\": { label: \"Nouveau MP\", icon: this._svgMail?.() || \"\" },\r\n            delete: { label: \"Supprimer\", icon: this._svgTrash?.() || \"\" },\r\n        });\r\n\r\n        const pageType = this.adapter.pagetype;\r\n        console.log(pageType);\r\n        switch (pageType) {\r\n            case \"inbox\":\r\n                this.setActions([\"create\", \"new-pm\", \"delete\"]);\r\n                this.selectAction(\"create\");\r\n                break;\r\n\r\n                break;\r\n            case \"profile\":\r\n            case \"topic\":\r\n                this.setActions([\"new-pm\", \"ban\", \"unban\"]);\r\n                this.selectAction(\"new-pm\");\r\n                break;\r\n                /**\r\n                 * Build the profile UI components\r\n                 * which means :\r\n                 * we need to filter what actions are possibles based on the current page\r\n                 * edit profile, ban, unban user, etc.\r\n                 * when viewing a profile, put \"new private message\" to this user button dropdown (from BaseInterface and already built inside this.container) as first and already selected\r\n                 */\r\n                break;\r\n            case \"forum\":\r\n                break;\r\n            case \"category\":\r\n                break;\r\n            case \"topic\":\r\n                /**\r\n                 * Build the topic UI components\r\n                 * which means :\r\n                 * we need to filter what actions are possibles based on the current page\r\n                 * like reply to topic, report topic, etc.\r\n                 * when viewing a topic, put \"reply\" button dropdown (from BaseInterface and already built inside this.container) as first and already selected\r\n                 */\r\n                this.morphButtonDropdown(\"reply\");\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\n","// src/core/jsonld.js\r\n// Utilitaires de parsing JSON‑LD (BreadcrumbList, DiscussionForumPosting, …)\r\n// - découplé du thème\r\n// - extensible via un registre de handlers\r\n\r\n/** Récupère tous les <script type=\"application/ld+json\"> du document */\r\nexport function getJsonLdNodes(doc = document) {\r\n    return Array.from(\r\n        doc.querySelectorAll('script[type=\"application/ld+json\"]')\r\n    );\r\n}\r\n\r\n/** Parse un <script> en JSON JS (retourne [] si erreur) */\r\nexport function parseJsonLdScript(node) {\r\n    try {\r\n        const txt = (node?.textContent || \"\").trim();\r\n        if (!txt) return [];\r\n        const parsed = JSON.parse(txt);\r\n        return normalizeJsonLdRoot(parsed);\r\n    } catch {\r\n        return [];\r\n    }\r\n}\r\n\r\n/** Normalise la racine: peut être objet, tableau, ou contenir @graph */\r\nexport function normalizeJsonLdRoot(root) {\r\n    const arr = Array.isArray(root) ? root : [root];\r\n    // aplatis les @graph éventuels\r\n    const items = [];\r\n    for (const it of arr) {\r\n        if (it && Array.isArray(it[\"@graph\"])) items.push(...it[\"@graph\"]);\r\n        else items.push(it);\r\n    }\r\n    // filtre les objets valides ayant un @type\r\n    return items.filter((x) => x && typeof x === \"object\" && x[\"@type\"]);\r\n}\r\n\r\n/* ===========================\r\n   Handlers par type JSON-LD\r\n   =========================== */\r\n\r\n/** Handler: BreadcrumbList → { type:'BreadcrumbList', items:[{position,url,name}] } */\r\nexport function extractBreadcrumbList(obj) {\r\n    if (\r\n        obj[\"@type\"] !== \"BreadcrumbList\" ||\r\n        !Array.isArray(obj.itemListElement)\r\n    )\r\n        return null;\r\n    const items = obj.itemListElement\r\n        .filter((li) => li && li[\"@type\"] === \"ListItem\" && li.item)\r\n        .map((li) => ({\r\n            position: Number(li.position) || null,\r\n            url: (li.item && (li.item[\"@id\"] || li.item.url)) || null,\r\n            name: (li.item && li.item.name) || null,\r\n        }));\r\n    return items.length ? { type: \"BreadcrumbList\", items } : null;\r\n}\r\n\r\n/** Handler: DiscussionForumPosting → objet normalisé du topic */\r\nexport function extractDiscussionForumPosting(obj) {\r\n    if (obj[\"@type\"] !== \"DiscussionForumPosting\") return null;\r\n    const interaction = obj.interactionStatistic || {};\r\n    const interactionCount = Number(interaction.userInteractionCount) || null;\r\n    return {\r\n        type: \"DiscussionForumPosting\",\r\n        headline: obj.headline || null,\r\n        name: obj.name || null,\r\n        url: obj.url || null,\r\n        datePublished: obj.datePublished || null,\r\n        dateModified: obj.dateModified || null,\r\n        pageStart: Number(obj.pageStart) || null,\r\n        pageEnd: Number(obj.pageEnd) || null,\r\n        author: obj.author?.name || null,\r\n        author_url: obj.author?.url || null,\r\n        publisher: obj.publisher?.name || null,\r\n        logo: obj.publisher?.logo?.url || null,\r\n        image: obj.image || null,\r\n        interactionCount,\r\n    };\r\n}\r\n\r\n/* ===========================\r\n   Registre extensible\r\n   =========================== */\r\n\r\nconst defaultHandlers = new Map([\r\n    [\"BreadcrumbList\", extractBreadcrumbList],\r\n    [\"DiscussionForumPosting\", extractDiscussionForumPosting],\r\n]);\r\n\r\n/** Permet d’enregistrer/écraser un handler pour un @type donné */\r\nexport function registerJsonLdHandler(type, handlerFn) {\r\n    defaultHandlers.set(type, handlerFn);\r\n}\r\n\r\n/**\r\n * Parse tout le JSON‑LD de la page et renvoie un objet par type.\r\n * @param {Document} doc\r\n * @param {string[]=} onlyTypes liste de types à extraire (sinon tous ceux connus)\r\n * @returns {{ byType: Record<string, any[]>, all: any[] }}\r\n */\r\nexport function extractJsonLd(doc = document, onlyTypes) {\r\n    const nodes = getJsonLdNodes(doc);\r\n    const resultsByType = {};\r\n    const allRaw = [];\r\n\r\n    for (const node of nodes) {\r\n        const items = parseJsonLdScript(node);\r\n        for (const obj of items) {\r\n            const t = Array.isArray(obj[\"@type\"])\r\n                ? obj[\"@type\"][0]\r\n                : obj[\"@type\"];\r\n            allRaw.push(obj);\r\n\r\n            // Filtrage par types demandés (facultatif)\r\n            if (onlyTypes && !onlyTypes.includes(t)) continue;\r\n\r\n            // Si on a un handler, on l’applique\r\n            const handler = defaultHandlers.get(t);\r\n            if (handler) {\r\n                const normalized = handler(obj);\r\n                if (normalized) {\r\n                    if (!resultsByType[t]) resultsByType[t] = [];\r\n                    resultsByType[t].push(normalized);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return { byType: resultsByType, all: allRaw };\r\n}\r\n\r\n/** Raccourcis pratiques pour les 2 types courants */\r\nexport function extractBreadcrumbs(doc = document) {\r\n    return (\r\n        extractJsonLd(doc, [\"BreadcrumbList\"]).byType[\"BreadcrumbList\"] || []\r\n    );\r\n}\r\n\r\nexport function extractDiscussion(doc = document) {\r\n    return (\r\n        extractJsonLd(doc, [\"DiscussionForumPosting\"]).byType[\r\n            \"DiscussionForumPosting\"\r\n        ] || []\r\n    );\r\n}\r\n","export function parsePagination(\r\n    doc,\r\n    { pageSizeOverride, defaultPageSize = 50 } = {}\r\n) {\r\n    const out = {\r\n        current: undefined,\r\n        total: undefined,\r\n        page_size_detected: undefined,\r\n    };\r\n\r\n    // 1) Trouver le conteneur de pagination\r\n    const pager =\r\n        doc.querySelector(\".pagination\") ||\r\n        doc.querySelector(\".pagelink\") ||\r\n        doc.querySelector(\".topic-actions .pagination\");\r\n    if (pager) {\r\n        const txt = pager.textContent.replace(/\\s+/g, \" \").trim().toLowerCase();\r\n        // \"page 1 sur 750\" (FR) ou \"page 1 of 750\" (EN)\r\n        const m = txt.match(/page\\s+(\\d+)\\s+(?:sur|of)\\s+(\\d+)/i);\r\n        if (m) {\r\n            out.current = Number(m[1]);\r\n            out.total = Number(m[2]);\r\n        }\r\n    }\r\n\r\n    // 2) Heuristique taille de page : (a) override\r\n    let pageSize = Number.isFinite(pageSizeOverride)\r\n        ? pageSizeOverride\r\n        : undefined;\r\n\r\n    // 3) (b) Script inline Forumactif : start = (start - 1) * 35;\r\n    if (!pageSize && pager) {\r\n        for (const s of pager.querySelectorAll(\"script\")) {\r\n            const code = s.textContent || \"\";\r\n            const mm = code.match(/start\\s*=\\s*\\(start\\s*-\\s*1\\)\\s*\\*\\s*(\\d+)/);\r\n            if (mm) {\r\n                pageSize = Number(mm[1]);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 4) (c) Déduction via les liens /f103p35-... /f103p70-...\r\n    if (!pageSize && pager) {\r\n        const ps = [];\r\n        pager.querySelectorAll('a[href*=\"/f\"][href*=\"p\"]').forEach((a) => {\r\n            const href = a.getAttribute(\"href\") || \"\";\r\n            const m2 = href.match(/\\/f\\d+p(\\d+)-/i);\r\n            if (m2) ps.push(Number(m2[1]));\r\n        });\r\n        // La plus petite valeur non nulle correspond généralement à la taille de page\r\n        if (ps.length) {\r\n            const minPos = Math.min(...ps.filter((n) => n > 0));\r\n            if (Number.isFinite(minPos)) pageSize = minPos;\r\n        }\r\n    }\r\n\r\n    // 5) Fallback\r\n    if (!pageSize) pageSize = defaultPageSize;\r\n\r\n    out.page_size_detected = pageSize;\r\n    return out;\r\n}\r\n","import { getDirectText, idsFromHref } from \"../core/utils.js\";\r\nimport { extractBreadcrumbs } from \"../core/jsonld.js\";\r\nimport { parsePagination } from \"./pagination.js\";\r\n\r\n// Compte les lignes de sujets (selon plusieurs templates)\r\nconst countTopics = (doc) => {\r\n    const candidates = [\r\n        \"tr.topic\", // phpBB3\r\n        \"tr.rowtopic\", // anciens thèmes\r\n        \"li.topic\", // ModernBB/PunBB custom\r\n        \"div.topic\", // variantes\r\n        \"div.topics li\", // listes\r\n        \"a.topictitle\", // phpBB-like\r\n        \".topicslist_row.row\", // fallback parfois utile\r\n    ];\r\n    let max = 0;\r\n    for (const sel of candidates) {\r\n        const c = doc.querySelectorAll(sel).length;\r\n        max = Math.max(max, c);\r\n    }\r\n    // si on trouve 0, on ne renvoie rien (undefined)\r\n    return max || undefined;\r\n};\r\n\r\n// Récupère des métadonnées (titre, fil d’Ariane)\r\nconst readForumMeta = (doc) => {\r\n    // Titre de la page\r\n    const titleEl = doc.querySelector(\"h1.page-title, h1, .page-title\");\r\n    const name =\r\n        getDirectText(titleEl) ||\r\n        (titleEl?.textContent || \"\").trim() ||\r\n        undefined;\r\n\r\n    // id forum via canonical, breadcrumb ou premier lien /fXX-\r\n    let forum_id;\r\n    const canonical =\r\n        doc.querySelector('link[rel=\"canonical\"]')?.getAttribute(\"href\") || \"\";\r\n    forum_id = idsFromHref(canonical).forum_id;\r\n\r\n    // lien forum courant (utile pour re-naviguer)\r\n    const forumHref = canonical;\r\n\r\n    return {\r\n        name,\r\n        forum_id: Number.isFinite(forum_id) ? forum_id : undefined,\r\n        forumHref,\r\n    };\r\n};\r\n\r\n// Détection permission (peut varier)\r\n// Grossièrement selon la présence d’un bouton \"Nouveau\", \"Nouveau sujet\" ou d’un formulaire\r\nconst readPermissions = (doc) => {\r\n    const canPost =\r\n        !!doc.querySelector(\r\n            'a[href*=\"mode=newtopic\"], a[href*=\"post?f=\"], .button-newtopic, .btn-newtopic'\r\n        ) ||\r\n        !!doc.querySelector(\r\n            'form[action*=\"mode=newtopic\"], form[action*=\"/post\"]'\r\n        );\r\n\r\n    return { can_post: canPost };\r\n};\r\n\r\nexport function parseForumStats(\r\n    doc,\r\n    { pageSizeOverride, defaultPageSize = 50 } = {}\r\n) {\r\n    const meta = readForumMeta(doc);\r\n    const topicsListCount = countTopics(doc);\r\n    const perms = readPermissions(doc);\r\n\r\n    const pagination = parsePagination(doc, {\r\n        pageSizeOverride,\r\n        defaultPageSize,\r\n    });\r\n    const topics_estimated =\r\n        Number.isFinite(pagination.total) &&\r\n        Number.isFinite(pagination.page_size_detected)\r\n            ? pagination.total * pagination.page_size_detected\r\n            : undefined;\r\n\r\n    return {\r\n        id: meta.forum_id,\r\n        name: meta.name,\r\n        topics_count: topics_estimated ?? topicsListCount,\r\n        href: meta.forumHref || undefined,\r\n        pagination: {\r\n            current: pagination.current,\r\n            total: pagination.total,\r\n            page_size: pagination.page_size_detected,\r\n            topics_estimated: topics_estimated, // estimation globale par pagination\r\n            topics_visible: topicsListCount || undefined, // comptage réel de la page courante\r\n        },\r\n        permissions: perms,\r\n    };\r\n}\r\n","import { parseFromUrl } from \"../core/utils.js\";\r\nimport { parsePagination } from \"./pagination.js\";\r\n\r\nfunction countReplies(doc) {\r\n    const candidates = [\".postbody\"];\r\n    let max = 0;\r\n    for (const sel of candidates) {\r\n        const c = doc.querySelectorAll(sel).length;\r\n        max = Math.max(max, c);\r\n    }\r\n    // si on trouve 0, on ne renvoie rien (undefined)\r\n    return max || undefined;\r\n}\r\n\r\nexport function parseTopicStats(\r\n    doc,\r\n    { pageSizeOverride, defaultPageSize = 25 } = {}\r\n) {\r\n    const discussion = extractDiscussion(doc)[0] || null;\r\n    const breadcrumb = extractBreadcrumbs(doc)[0] || null;\r\n\r\n    const title =\r\n        discussion?.headline ||\r\n        doc.querySelector(\"h1.page-title\")?.textContent?.trim() ||\r\n        null;\r\n    const canonical = doc.querySelector('link[rel=\"canonical\"]')?.href || null;\r\n\r\n    const meta = parseFromUrl(canonical);\r\n    const url = canonical || null;\r\n    const topic_id = meta.id || null;\r\n\r\n    const repliesListCount = countReplies(doc);\r\n\r\n    // 2) JSON‑LD (dates + total comments/pages)\r\n\r\n    // 4) Pagination visible\r\n    const pagination = parsePagination(doc, {\r\n        pageSizeOverride,\r\n        defaultPageSize,\r\n    });\r\n    const replies_estimated =\r\n        Number.isFinite(pagination.total) &&\r\n        Number.isFinite(pagination.page_size_detected)\r\n            ? pagination.total * pagination.page_size_detected\r\n            : undefined;\r\n\r\n    return {\r\n        id: topic_id,\r\n        url,\r\n        slug: meta.slug || null,\r\n        title,\r\n        pagination: {\r\n            current: pagination.current,\r\n            total: pagination.total,\r\n            page_size: pagination.page_size_detected,\r\n            replies_estimated: replies_estimated, // estimation globale par pagination\r\n            replies_visible: repliesListCount || undefined, // comptage réel de la page courante\r\n        },\r\n        replies_count: replies_estimated ?? repliesListCount,\r\n    };\r\n}\r\n","import { state } from \"./core/state.js\";\r\nimport { extractDiscussion, extractBreadcrumbs } from \"./core/jsonld.js\";\r\nimport { getDirectText, text } from \"./core/utils.js\";\r\nimport { parseForumStats } from \"./parsers/statsForum.js\";\r\nimport { parseTopicStats } from \"./parsers/statsTopic.js\";\r\n\r\nfunction parseMiscVars(data) {\r\n    const misc = {};\r\n    data.querySelectorAll(\"ul a\").forEach((el) => {\r\n        const l = el.innerText.replace(/[^a-zA-Z]/gi, \"\");\r\n        misc[l] = getDirectText(el.parentNode).replace(/^:/gi, \"\").trim();\r\n    });\r\n\r\n    misc[\"FORUMAGETYPE\"] = \"jours\";\r\n\r\n    misc[\"NOWDAY\"] = new Date().getDate();\r\n    misc[\"NOWMONTH\"] = new Date().getMonth() + 1;\r\n    misc[\"NOWYEAR\"] = new Date().getFullYear();\r\n    misc[\"NOWHOUR\"] = new Date().getHours();\r\n    misc[\"NOWMINUTE\"] = new Date().getMinutes();\r\n\r\n    misc[\"FORUMLASTUSERLINK\"] = misc[\"FORUMLASTUSERLINK\"].replace(\r\n        misc[\"FORUMURLINK\"],\r\n        \"\"\r\n    );\r\n    misc[\"USERLINK\"] = misc[\"USERLINK\"].replace(misc[\"FORUMURLINK\"], \"\");\r\n    misc[\"FORUMLASTUSERID\"] = misc[\"FORUMLASTUSERLINK\"].replace(/[^0-9]/gi, \"\");\r\n\r\n    return {\r\n        misc,\r\n    };\r\n}\r\n\r\nasync function computeStats({\r\n    scope = \"auto\",\r\n    fetchExtra = [],\r\n    forum = {},\r\n    topic = {},\r\n} = {}) {\r\n    const t0 = performance.now();\r\n    const sources = new Set();\r\n    const stats = {};\r\n\r\n    const doc = document;\r\n    const effective = scope === \"auto\" ? state.pagetype || \"auto\" : scope;\r\n\r\n    const defaultExtras = [\r\n        {\r\n            url: \"/popup_help.forum?l=miscvars&i=mes_txt\",\r\n            callback: parseMiscVars,\r\n        },\r\n    ];\r\n    const extras = [...defaultExtras, ...fetchExtra];\r\n\r\n    if (\r\n        effective === \"topic\" ||\r\n        (effective === \"auto\" && state.pagetype === \"forum\")\r\n    ) {\r\n        stats.topic =\r\n            state.pagetype === \"topic\"\r\n                ? parseTopicStats(doc, topic)\r\n                : undefined;\r\n    }\r\n    if (effective === \"forum\" || effective === \"auto\") {\r\n        stats.forum =\r\n            state.pagetype === \"forum\"\r\n                ? parseForumStats(doc, forum)\r\n                : undefined;\r\n    }\r\n\r\n    for (const { url, callback } of extras) {\r\n        try {\r\n            const r = await fetch(url, { credentials: \"same-origin\" });\r\n            sources.add(url);\r\n\r\n            // Détecte le type de réponse\r\n            const ct = r.headers.get(\"content-type\") || \"\";\r\n            let payload;\r\n            if (ct.includes(\"html\")) {\r\n                const html = await r.text();\r\n                payload = new DOMParser().parseFromString(html, \"text/html\");\r\n            } else if (ct.includes(\"json\")) {\r\n                payload = await r.json();\r\n            } else {\r\n                payload = await r.text();\r\n            }\r\n\r\n            const res = await callback(payload);\r\n            if (res && typeof res === \"object\") {\r\n                // Merge « doux »\r\n                for (const [k, v] of Object.entries(res)) {\r\n                    if (typeof v === \"object\" && typeof stats[k] === \"object\") {\r\n                        stats[k] = { ...stats[k], ...v };\r\n                    } else {\r\n                        stats[k] = v;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Merge « intelligent » sur les clés attendues\r\n            Object.assign(stats, res);\r\n        } catch (e) {\r\n            console.error(\"Error fetching extra data:\", e);\r\n        }\r\n    }\r\n\r\n    stats.computed_at = new Date().toISOString();\r\n    stats.elapse_ms = Math.round(performance.now() - t0);\r\n    stats.sources = Array.from(sources);\r\n    return stats;\r\n}\r\n\r\nexport async function env(options = {}) {\r\n    const doc = document;\r\n    const statsWanted = !!options?.stats;\r\n    const forumPageSize = options?.stats?.forum?.pageSize;\r\n\r\n    const discussion = extractDiscussion(doc)[0] || null;\r\n    const breadcrumbs = extractBreadcrumbs(doc)[0] || null;\r\n\r\n    const u = location;\r\n    const hash = u.hash ? u.hash.substring(1) : null;\r\n\r\n    const _ud = typeof _userdata !== \"undefined\" ? _userdata : {};\r\n    const _bd = typeof _board !== \"undefined\" ? _board : {};\r\n\r\n    const data = {\r\n        board: {\r\n            tpl: _ud[\"tpl_used\"],\r\n            reputation_active: Number(_bd[\"reputation_active\"]),\r\n        },\r\n        page: {\r\n            url: u.href,\r\n            type: state.pagetype,\r\n            id: state.resid,\r\n            number: state.pagenum,\r\n            charset: state.charset,\r\n            anchor: hash,\r\n        },\r\n        user: {\r\n            t_id: state.tid,\r\n            name: _ud[\"username\"],\r\n            id: Number(_ud[\"user_id\"]) || undefined,\r\n            is_logged: Number(_ud[\"session_logged_in\"]) === 1,\r\n            is_guest: Number(_ud[\"user_id\"]) === -1,\r\n            is_admin: Number(_ud[\"user_level\"]) == 1,\r\n            is_mod: (Number(_ud[\"user_level\"]) || 0) > 0,\r\n            lang: _ud[\"user_lang\"],\r\n            notifications: Number(_ud[\"notifications\"]),\r\n            avatar: _ud[\"avatar\"],\r\n            avatar_link: _ud[\"avatar_link\"],\r\n            posts: Number(_ud[\"userposts\"]) || undefined,\r\n            privmsgs_count: Number(_ud[\"user_nb_privmsgs\"]) || undefined,\r\n            group_color: _ud[\"groupcolor\"],\r\n        },\r\n        schema: {\r\n            discussion,\r\n            breadcrumbs,\r\n        },\r\n    };\r\n\r\n    if (statsWanted) {\r\n        const s = await computeStats({\r\n            scope: options.scope || \"auto\",\r\n            fetchExtra: options.fetchExtra || [],\r\n            forum: { pageSize: forumPageSize },\r\n        });\r\n        data.stats = s;\r\n    }\r\n\r\n    return data;\r\n}\r\n","import forumactifAdapter from \"./adapters/forumactif.js\";\r\nimport ForumResource from \"./actions/forum.js\";\r\nimport TopicResource from \"./actions/topic.js\";\r\nimport PostResource from \"./actions/post.js\";\r\nimport UserResource from \"./actions/user.js\";\r\nimport ChatResource from \"./actions/chat.js\";\r\nimport UIInterface from \"./interfaces/ui.js\";\r\nimport { env as envFn } from \"./env.js\";\r\n\r\nconst ENV_GLOBAL_KEY = \"__MODERACTOR_ENV__\";\r\n\r\nconst getGlobal = () => {\r\n    if (typeof globalThis !== \"undefined\") return globalThis;\r\n    if (typeof window !== \"undefined\") return window;\r\n    if (typeof global !== \"undefined\") return global;\r\n    return {};\r\n};\r\n\r\nfunction cacheEnv(value) {\r\n    const g = getGlobal();\r\n    Moderactor._env = value;\r\n    try {\r\n        g[ENV_GLOBAL_KEY] = value;\r\n    } catch {}\r\n    return value;\r\n}\r\n\r\nfunction getCachedEnv() {\r\n    if (Moderactor._env) return Moderactor._env;\r\n    const g = getGlobal();\r\n    if (g[ENV_GLOBAL_KEY]) return (Moderactor._env = g[ENV_GLOBAL_KEY]);\r\n    return null;\r\n}\r\n\r\nfunction refreshEnv(opts = {}) {\r\n    const computed = envFn(opts);\r\n    return cacheEnv(computed);\r\n}\r\n\r\nconst Moderactor = {\r\n    get env() {\r\n        const cached = getCachedEnv();\r\n        return cached ?? refreshEnv({ stats: true });\r\n    },\r\n    set env(opts = {}) {\r\n        return refreshEnv(opts);\r\n    },\r\n    forum: (idOrArray) => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new ForumResource(idOrArray, forumactifAdapter);\r\n    },\r\n    topic: (idOrArray) => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new TopicResource(idOrArray, forumactifAdapter);\r\n    },\r\n    post: (idOrArray) => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new PostResource(idOrArray, forumactifAdapter);\r\n    },\r\n    user: (idOrArray) => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new UserResource(idOrArray, forumactifAdapter);\r\n    },\r\n    chat: () => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new ChatResource(forumactifAdapter);\r\n    },\r\n    ui: (options) => {\r\n        if (!getCachedEnv()) refreshEnv({ stats: true });\r\n        return new UIInterface(forumactifAdapter, options);\r\n    },\r\n    adapter: forumactifAdapter,\r\n};\r\n\r\nif (typeof window !== \"undefined\") {\r\n    window.Moderactor = Moderactor;\r\n}\r\n\r\nexport default Moderactor;\r\n"],"names":["extractBreadcrumbs","extractDiscussion","envFn"],"mappings":";;;IAAO,MAAM,OAAO,CAAC;IACrB,IAAI,MAAM,GAAG,CAAC,GAAG,EAAE;IACnB,QAAQ,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;IACvD,IAAI,CAAC;IACL,IAAI,MAAM,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE;IAC1B,QAAQ,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;IACxD,IAAI,CAAC;IACL,IAAI,MAAM,OAAO,CAAC,GAAG,EAAE,YAAY,EAAE;IACrC,QAAQ,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;IAC3D,IAAI,CAAC;IACL,IAAI,MAAM,CAAC,IAAI,EAAE;IACjB,QAAQ,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;IAC1D,IAAI,CAAC;IACL,IAAI,IAAI,GAAG,GAAG;IACd,QAAQ,OAAO,IAAI,CAAC;IACpB,IAAI,CAAC;IACL,IAAI,IAAI,QAAQ,GAAG;IACnB,QAAQ,OAAO,EAAE,CAAC;IAClB,IAAI,CAAC;IACL;;ICnBA,SAAS,UAAU,CAAC,IAAI,EAAE;IAC1B,IAAI,IAAI,SAAS,GAAG,IAAI,QAAQ,EAAE,CAAC;AACnC;IACA,IAAI,KAAK,IAAI,GAAG,IAAI,IAAI,EAAE;IAC1B,QAAQ,SAAS,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;IACzC,IAAI,CAAC;IACL,IAAI,OAAO,CAAC,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC;IACnC,SAAS,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9E,SAAS,IAAI,CAAC,GAAG,CAAC,CAAC;IACnB,CAAC;AACD;IACO,SAAS,YAAY,CAAC,IAAI,EAAE;IACnC,IAAI,MAAM,MAAM,GAAG,IAAI,SAAS,EAAE,CAAC;IACnC,IAAI,OAAO,MAAM,CAAC,eAAe,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;IACrD,CAAC;AACD;IACO,eAAe,OAAO,CAAC,GAAG,EAAE;IACnC,IAAI,MAAM,CAAC,GAAG,MAAM,KAAK,CAAC,GAAG,EAAE,EAAE,WAAW,EAAE,aAAa,EAAE,CAAC,CAAC;IAC/D,IAAI,MAAM,IAAI,GAAG,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;IAChC,IAAI,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC;IACzE,CAAC;AACD;IACO,eAAe,QAAQ,CAAC,GAAG,EAAE,IAAI,EAAE;IAC1C,IAAI,MAAM,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;IAClC,IAAI,MAAM,CAAC,GAAG,MAAM,KAAK,CAAC,GAAG,EAAE;IAC/B,QAAQ,MAAM,EAAE,MAAM;IACtB,QAAQ,WAAW,EAAE,aAAa;IAClC,QAAQ,OAAO,EAAE;IACjB,YAAY,cAAc,EAAE,iDAAiD;IAC7E,SAAS;IACT,QAAQ,IAAI;IACZ,KAAK,CAAC,CAAC;IACP,IAAI,MAAM,IAAI,GAAG,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;IAChC,IAAI,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC;IACzE;;IClCA,SAAS,kBAAkB,GAAG;IAC9B,IAAI,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC;IAC5D,IAAI,IAAI,KAAK,EAAE,KAAK,EAAE,OAAO,KAAK,CAAC,KAAK,CAAC;AACzC;IACA,IAAI,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;IAC9D,IAAI,MAAM,IAAI,GAAG,MAAM,EAAE,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;IACpD,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAC;IACjD,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AACvB;IACA;IACA,IAAI,MAAM,CAAC,GAAG,QAAQ,CAAC,QAAQ,CAAC;IAChC,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC;IAC5C,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IACvB,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC;IAC5C,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AACvB;IACA,IAAI,OAAO,IAAI,CAAC;IAChB,CAAC;AACD;IACA,SAAS,WAAW,GAAG;IACvB,IAAI,MAAM,CAAC,GAAG,QAAQ,CAAC,QAAQ,CAAC;IAChC,IAAI,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,OAAO,CAAC;IAClD,IAAI,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,OAAO,CAAC;IAClD,IAAI,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,UAAU,CAAC;IAC9C,IAAI,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,SAAS,CAAC;IAC7C,IAAI,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,OAAO,CAAC;IAC/C,IAAI,MAAM,EAAE,GAAG,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC;IACnC,IAAI,MAAM,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC;IAChD,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;IACzB,CAAC;AACD;IACA,SAAS,QAAQ,GAAG;IACpB,IAAI,MAAM,CAAC,GAAG,QAAQ,CAAC,QAAQ,CAAC;IAChC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC/C,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;IACrC,IAAI,OAAO,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IAChC,CAAC;AACD;IACA,SAAS,UAAU,GAAG;IACtB,IAAI,MAAM,CAAC,GAAG,QAAQ,CAAC,QAAQ,CAAC;IAChC,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;IAC3C,IAAI,OAAO,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACzC,CAAC;AACD;IACO,MAAM,KAAK,GAAG;IACrB,IAAI,IAAI,GAAG,GAAG;IACd,QAAQ,OAAO,kBAAkB,EAAE,CAAC;IACpC,IAAI,CAAC;IACL,IAAI,IAAI,QAAQ,GAAG;IACnB,QAAQ,OAAO,WAAW,EAAE,CAAC;IAC7B,IAAI,CAAC;IACL,IAAI,IAAI,KAAK,GAAG;IAChB,QAAQ,OAAO,QAAQ,EAAE,CAAC;IAC1B,IAAI,CAAC;IACL,IAAI,IAAI,OAAO,GAAG;IAClB,QAAQ,OAAO,UAAU,EAAE,CAAC;IAC5B,IAAI,CAAC;IACL,IAAI,IAAI,OAAO,GAAG;IAClB,QAAQ,OAAO;IACf,YAAY,QAAQ,CAAC,OAAO;IAC5B,YAAY,QAAQ,CAAC,YAAY;IACjC,YAAY,OAAO;IACnB,UAAU,WAAW,EAAE,CAAC;IACxB,IAAI,CAAC;IACL,CAAC;;IChED;IACA;IACA;IACA;AACA;IACA,SAAS,KAAK,CAAC,EAAE,EAAE,GAAG,EAAE;IACxB,IAAI,OAAO,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,SAAS,CAAC;IAC9C,CAAC;IACD,SAAS,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE;IACtB,IAAI,OAAO,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC;IAChD,CAAC;AACD;IACA,SAAS,cAAc,CAAC,GAAG,EAAE;IAC7B;IACA,IAAI,MAAM,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IAC3D,QAAQ,CAAC,CAAC,WAAW,CAAC,IAAI,EAAE;IAC5B,KAAK,CAAC;IACN,IAAI,MAAM,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;IAC1D,IAAI,OAAO,IAAI,CAAC;IAChB,CAAC;AACD;IACA,SAAS,gBAAgB,CAAC,IAAI,EAAE;IAChC,IAAI,MAAM,GAAG,GAAG,EAAE,CAAC;IACnB,IAAI,IAAI,CAAC,IAAI,EAAE,OAAO,GAAG,CAAC;IAC1B,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,+BAA+B,CAAC,CAAC;IAC1D,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvC,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;IACtC,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvC,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IACpC,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtC,IAAI,OAAO,GAAG,CAAC;IACf,CAAC;AACD;IACA,SAAS,WAAW,CAAC,OAAO,EAAE;IAC9B,IAAI,MAAM,KAAK,GAAG,CAAC,OAAO,IAAI,EAAE,EAAE,WAAW,EAAE,CAAC;IAChD,IAAI,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,YAAY,CAAC;IACnD,IAAI,IAAI,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC;IAC7D,QAAQ,OAAO,YAAY,CAAC;IAC5B,IAAI,IAAI,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,cAAc,CAAC;IACzD,IAAI,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,cAAc,CAAC;IACrD,IAAI,IAAI,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,aAAa,CAAC;IAC/D,IAAI,IAAI,8BAA8B,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,YAAY,CAAC;IACxE,IAAI,IAAI,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,YAAY,CAAC;IACzD,IAAI,IAAI,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,SAAS,CAAC;IACrD,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,UAAU,CAAC;IAC/C,IAAI,IAAI,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,YAAY,CAAC;IACzD,IAAI,OAAO,SAAS,CAAC;IACrB,CAAC;AACD;IACA,SAAS,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE;IACrC,IAAI,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI,EAAE,EAAE,WAAW,EAAE,CAAC;IACnD,IAAI,QAAQ,MAAM;IAClB,QAAQ,KAAK,YAAY;IACzB,YAAY,OAAO,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC5C,QAAQ,KAAK,YAAY;IACzB,YAAY,OAAO,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC9C,QAAQ,KAAK,cAAc;IAC3B,YAAY,OAAO,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAChD,QAAQ,KAAK,cAAc;IAC3B,YAAY,OAAO,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC5C,QAAQ,KAAK,aAAa;IAC1B,YAAY,OAAO,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACvD,QAAQ,KAAK,YAAY;IACzB,YAAY,OAAO,8BAA8B,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACjE,QAAQ,KAAK,YAAY;IACzB,YAAY,OAAO,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAClD,QAAQ,KAAK,SAAS;IACtB,YAAY,OAAO,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACjD,QAAQ,KAAK,UAAU;IACvB,YAAY,OAAO,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC1C,QAAQ,KAAK,YAAY;IACzB,YAAY,OAAO,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAClD,QAAQ;IACR,YAAY,OAAO,KAAK,CAAC;IACzB,KAAK;IACL,CAAC;AACD;IACO,SAAS,WAAW,CAAC,IAAI,EAAE;IAClC,IAAI,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC;IAC/B,IAAI,MAAM,OAAO,GAAG,cAAc,CAAC,GAAG,CAAC,CAAC;AACxC;IACA,IAAI,MAAM,SAAS,GAAG,KAAK,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;IAC5C,IAAI,MAAM,IAAI,GAAG,SAAS,GAAG,SAAS,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;IACjE,IAAI,MAAM,GAAG,GAAG,gBAAgB,CAAC,IAAI,CAAC,CAAC;AACvC;IACA,IAAI,MAAM,MAAM,GAAG,WAAW,CAAC,OAAO,CAAC,CAAC;IACxC,IAAI,MAAM,EAAE,GAAG,UAAU,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AAC3C;IACA,IAAI,MAAM,KAAK,GAAG;IAClB,QAAQ,KAAK,EAAE,IAAI,IAAI,SAAS;IAChC,QAAQ,KAAK;IACb,YAAY,GAAG,CAAC,GAAG,EAAE,qCAAqC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IAClE,gBAAgB,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC;IACtC,aAAa,CAAC,CAAC,CAAC,IAAI,SAAS;IAC7B,QAAQ,KAAK;IACb,YAAY,GAAG,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3E,YAAY,SAAS;IACrB,KAAK,CAAC;AACN;IACA,IAAI,OAAO;IACX,QAAQ,EAAE;IACV,QAAQ,MAAM,EAAE,IAAI,CAAC,MAAM;IAC3B,QAAQ,MAAM;IACd,QAAQ,OAAO;IACf,QAAQ,GAAG;IACX,QAAQ,KAAK;IACb,QAAQ,IAAI;IACZ,QAAQ,GAAG,EAAE,IAAI;IACjB,KAAK,CAAC;IACN;;ICxGA,MAAM,iBAAiB,SAAS,OAAO,CAAC;IACxC,IAAI,MAAM,GAAG,CAAC,GAAG,EAAE;IACnB,QAAQ,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,IAAI,CAAC;IACL,IAAI,MAAM,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE;IAC1B,QAAQ,OAAO,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IACnC,IAAI,CAAC;AACL;IACA,IAAI,MAAM,OAAO,CAAC,GAAG,EAAE,YAAY,EAAE;IACrC,QAAQ,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACzC,QAAQ,IAAI,CAAC,IAAI,CAAC,EAAE;IACpB,YAAY,OAAO,EAAE,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;IACvE,QAAQ,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;IAC1D,QAAQ,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,gBAAgB,EAAE,CAAC;IAC7E,QAAQ,MAAM,EAAE,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;IACtC,QAAQ,MAAM,GAAG,GAAG,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC;IACrD,QAAQ,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC;IACtD,IAAI,CAAC;AACL;IACA,IAAI,MAAM,CAAC,IAAI,EAAE;IACjB,QAAQ,OAAO,WAAW,CAAC,IAAI,CAAC,CAAC;IACjC,IAAI,CAAC;IACL,IAAI,IAAI,GAAG,GAAG;IACd,QAAQ,OAAO,KAAK,CAAC,GAAG,CAAC;IACzB,IAAI,CAAC;IACL,IAAI,IAAI,QAAQ,GAAG;IACnB,QAAQ,OAAO,KAAK,CAAC,QAAQ,CAAC;IAC9B,IAAI,CAAC;IACL,CAAC;AACD;IACA,MAAM,iBAAiB,GAAG,IAAI,iBAAiB,EAAE;;ICnC1C,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC;AACrC;IACO,MAAM,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,GAAG,EAAE,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACtE;IACO,SAAS,WAAW,CAAC,KAAK,EAAE;IACnC,IAAI,OAAO,OAAO,CAAC,KAAK,CAAC;IACzB,SAAS,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC;IACjC,SAAS,GAAG,CAAC,CAAC,CAAC,MAAM,OAAO,CAAC,KAAK,QAAQ,GAAG,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;IAC1E,SAAS,MAAM,CAAC,CAAC,CAAC,KAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;IACpD,CAAC;AAeD;IACO,MAAM,aAAa,GAAG,CAAC,EAAE;IAChC,IAAI,CAAC,EAAE;IACP,UAAU,EAAE;IACZ,UAAU,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC;IACnC,eAAe,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,SAAS,CAAC;IAC3D,eAAe,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;IAC7C,eAAe,MAAM,CAAC,OAAO,CAAC;IAC9B,eAAe,IAAI,CAAC,GAAG,CAAC,CAAC;AAQzB;IACO,MAAM,WAAW,GAAG,CAAC,IAAI,KAAK;IACrC,IAAI,MAAM,GAAG,GAAG,EAAE,CAAC;IACnB,IAAI,IAAI,CAAC,IAAI,EAAE,OAAO,GAAG,CAAC;IAC1B,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;IAClE,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;IACtC,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;IACtC,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvC,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtC,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvC,IAAI,OAAO,GAAG,CAAC;IACf,CAAC,CAAC;AAKF;IACA;IACO,SAAS,YAAY,CAAC,CAAC,EAAE;IAChC,IAAI,IAAI;IACR,QAAQ,MAAM,IAAI,GAAG,OAAO,CAAC,KAAK,QAAQ,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,IAAI,EAAE,CAAC;IAC/D,QAAQ,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,uCAAuC,CAAC,CAAC;IACtE,QAAQ,OAAO,CAAC,GAAG,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC;IACzD,IAAI,CAAC,CAAC,MAAM;IACZ,QAAQ,OAAO,EAAE,CAAC;IAClB,IAAI,CAAC;IACL;;IChEO,MAAM,YAAY,CAAC;IAC1B,IAAI,WAAW,CAAC,GAAG,EAAE,OAAO,EAAE;IAC9B,QAAQ,IAAI,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC;IACpC,QAAQ,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IAC/B,IAAI,CAAC;IACL,IAAI,IAAI,CAAC,QAAQ,EAAE;IACnB,QAAQ,OAAO,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IACrC,IAAI,CAAC;IACL;;ICRe,MAAM,aAAa,SAAS,YAAY,CAAC;IACxD,IAAI,MAAM,IAAI,CAAC,KAAK,EAAE;IACtB,QAAQ,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,GAAG,CAAC,EAAE,GAAG,KAAK,IAAI,EAAE,CAAC;IAC7D,QAAQ,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO;IAChC,YAAY,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;IAC1E,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACrC,YAAY,IAAI,CAAC,OAAO;IACxB,iBAAiB,IAAI,CAAC,OAAO,EAAE;IAC/B,oBAAoB,IAAI,EAAE,CAAC;IAC3B,oBAAoB,IAAI,EAAE,UAAU;IACpC,oBAAoB,CAAC;IACrB,oBAAoB,OAAO;IAC3B,oBAAoB,OAAO;IAC3B,oBAAoB,MAAM;IAC1B,iBAAiB,CAAC;IAClB,iBAAiB,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACpD,SAAS,CAAC;IACV,QAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC;IACL;;ICnBe,MAAM,aAAa,SAAS,YAAY,CAAC;IACxD,IAAI,MAAM,IAAI,CAAC,KAAK,EAAE;IACtB,QAAQ,MAAM,EAAE,OAAO,EAAE,MAAM,GAAG,CAAC,EAAE,GAAG,KAAK,IAAI,EAAE,CAAC;IACpD,QAAQ,IAAI,CAAC,OAAO,EAAE,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;IACxE,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACrC,YAAY,IAAI,CAAC,OAAO;IACxB,iBAAiB,IAAI,CAAC,OAAO,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC;IAC9E,iBAAiB,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACpD,SAAS,CAAC;IACV,QAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC;AACL;IACA,IAAI,MAAM,IAAI,GAAG;IACjB,QAAQ,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;IACrC,QAAQ,IAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;IACjE,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACrC,YAAY,IAAI,CAAC,OAAO;IACxB,iBAAiB,GAAG,CAAC,CAAC,mBAAmB,EAAE,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;IAC1D,iBAAiB,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACpD,SAAS,CAAC;IACV,QAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC;AACL;IACA,IAAI,MAAM,MAAM,GAAG;IACnB,QAAQ,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;IACrC,QAAQ,IAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;IACnE,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACrC,YAAY,IAAI,CAAC,OAAO;IACxB,iBAAiB,GAAG,CAAC,CAAC,qBAAqB,EAAE,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;IAC5D,iBAAiB,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACpD,SAAS,CAAC;IACV,QAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC;AACL;IACA,IAAI,MAAM,IAAI,CAAC,UAAU,EAAE;IAC3B,QAAQ,IAAI,CAAC,UAAU,EAAE,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;IAC1E,QAAQ,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;IACrC,QAAQ,IAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;IACjE,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACrC,YAAY,IAAI,CAAC,OAAO;IACxB,iBAAiB,IAAI,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,EAAE;IAC3C,oBAAoB,GAAG;IACvB,oBAAoB,SAAS,EAAE,GAAG,GAAG,UAAU;IAC/C,oBAAoB,IAAI,EAAE,MAAM;IAChC,oBAAoB,CAAC;IACrB,oBAAoB,OAAO,EAAE,CAAC;IAC9B,iBAAiB,CAAC;IAClB,iBAAiB,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACpD,SAAS,CAAC;IACV,QAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC;AACL;IACA,IAAI,MAAM,KAAK,GAAG;IAClB,QAAQ,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;IACrC,QAAQ,IAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;IAClE,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACrC,YAAY,IAAI,CAAC,OAAO;IACxB,iBAAiB,GAAG,CAAC,CAAC,oBAAoB,EAAE,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;IAC3D,iBAAiB,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACpD,SAAS,CAAC;IACV,QAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC;AACL;IACA,IAAI,MAAM,MAAM,GAAG;IACnB,QAAQ,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;IACrC,QAAQ,IAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;IACnE,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACrC,YAAY,IAAI,CAAC,OAAO;IACxB,iBAAiB,IAAI,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;IAC7E,iBAAiB,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACpD,SAAS,CAAC;IACV,QAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC;IACL;;ICzEe,MAAM,YAAY,SAAS,YAAY,CAAC;IACvD,IAAI,MAAM,MAAM,GAAG;IACnB,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACrC,YAAY,IAAI,CAAC,OAAO;IACxB,iBAAiB,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;IAClE,iBAAiB,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACpD,SAAS,CAAC;IACV,QAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC;AACL;IACA,IAAI,MAAM,MAAM,CAAC,EAAE,OAAO,EAAE,EAAE;IAC9B,QAAQ,IAAI,CAAC,OAAO,EAAE,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;IACrE,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK;IAChD,YAAY,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO;IACnD,gBAAgB,CAAC,QAAQ,EAAE,CAAC,CAAC,cAAc,CAAC;IAC5C,gBAAgB,mBAAmB;IACnC,aAAa,CAAC;IACd,YAAY,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO,IAAI,CAAC;IACtC,YAAY,MAAM,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC;IACnD,YAAY,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;IAC1B,YAAY,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAChE,YAAY,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC7C,QAAQ,CAAC,CAAC,CAAC;IACX,QAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC;IACL;;ICzBe,MAAM,YAAY,SAAS,YAAY,CAAC;IACvD,IAAI,MAAM,EAAE,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE;IACnC,QAAQ,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO;IAChC,YAAY,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;IAClE,QAAQ,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7C,QAAQ,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE;IACzD,YAAY,QAAQ;IACpB,YAAY,IAAI,EAAE,MAAM;IACxB,YAAY,IAAI,EAAE,CAAC;IACnB,YAAY,OAAO;IACnB,YAAY,OAAO;IACnB,SAAS,CAAC,CAAC;IACX,QAAQ,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IACzC,IAAI,CAAC;AACL;IACA,IAAI,MAAM,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,MAAM,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE;IAC9C,QAAQ,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;IACrC,QAAQ,IAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;IAC/D,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,OAAO;IAC3C,YAAY,IAAI,CAAC,OAAO;IACxB,iBAAiB,IAAI,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,EAAE;IAC3C,oBAAoB,GAAG;IACvB,oBAAoB,OAAO,EAAE,CAAC;IAC9B,oBAAoB,IAAI,EAAE,KAAK;IAC/B,oBAAoB,OAAO;IAC3B,oBAAoB,aAAa,EAAE,IAAI;IACvC,oBAAoB,eAAe,EAAE,MAAM;IAC3C,iBAAiB,CAAC;IAClB,iBAAiB,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACpD,SAAS,CAAC;IACV,QAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC;AACL;IACA,IAAI,MAAM,KAAK,GAAG;IAClB,QAAQ,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;IACrC,QAAQ,IAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;IACjE,QAAQ,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI;IAC5C,YAAY,CAAC,qFAAqF,EAAE,GAAG,CAAC,CAAC;IACzG,YAAY,EAAE,cAAc,EAAE,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,CAAC,EAAE;IACxD,SAAS,CAAC;IACV,QAAQ,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IACzC,IAAI,CAAC;IACL;;IC1Ce,MAAM,YAAY,SAAS,YAAY,CAAC;IACvD,IAAI,WAAW,CAAC,OAAO,EAAE;IACzB,QAAQ,KAAK,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;IAC3B,IAAI,CAAC;IACL,IAAI,MAAM,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE;IAC5B,QAAQ,IAAI,CAAC,OAAO,EAAE,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;IACnE,QAAQ,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,wBAAwB,EAAE;IAC1D,YAAY,MAAM,EAAE,MAAM;IAC1B,YAAY,OAAO,EAAE,CAAC;IACtB,YAAY,OAAO;IACnB,SAAS,CAAC,CAAC;IACX,QAAQ,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC;IAC5B,IAAI,CAAC;IACL;;ICfA;IACA,MAAM,cAAc,GAAG;IACvB,IAAI,eAAe,EAAE,IAAI;IACzB,CAAC,CAAC;AACF;IACe,MAAM,aAAa,CAAC;IACnC,IAAI,WAAW,CAAC,OAAO,EAAE,OAAO,EAAE;IAClC,QAAQ,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IAC/B,QAAQ,IAAI,CAAC,OAAO,GAAG,EAAE,GAAG,cAAc,EAAE,GAAG,OAAO,EAAE,CAAC;AACzD;IACA;IACA,QAAQ,IAAI,CAAC,gBAAgB,GAAG,IAAI,GAAG,EAAE,CAAC;IAC1C,QAAQ,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;IAClC,QAAQ,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;IACpC,QAAQ,IAAI,CAAC,eAAe,GAAG,IAAI,GAAG,EAAE,CAAC;AACzC;IACA,QAAQ,IAAI,CAAC,KAAK,EAAE,CAAC;IACrB,IAAI,CAAC;AACL;IACA,IAAI,UAAU,GAAG;IACjB,QAAQ,OAAO,IAAI,CAAC,eAAe,EAAE,CAAC;IACtC,IAAI,CAAC;AACL;IACA,IAAI,KAAK,GAAG;IACZ,QAAQ,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,OAAO;AACpD;IACA,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,eAAe,IAAI,QAAQ,CAAC;IAChE,QAAQ,MAAM,iBAAiB,GAAG,KAAK,CAAC,aAAa;IACrD,YAAY,0BAA0B;IACtC,SAAS,CAAC;IACV,QAAQ,IAAI,iBAAiB,EAAE,iBAAiB,CAAC,MAAM,EAAE,CAAC;AAC1D;IACA,QAAQ,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACvD,QAAQ,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;AAChE;IACA,QAAQ,MAAM,QAAQ,GAAG,QAAQ,CAAC,sBAAsB,EAAE,CAAC;IAC3D,QAAQ,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAC7C;IACA,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,eAAe,IAAI,QAAQ,CAAC,IAAI,EAAE,WAAW,CAAC,QAAQ,CAAC,CAAC;AAC/E;IACA,QAAQ,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAClC;IACA,QAAQ,IAAI,CAAC,cAAc,EAAE,CAAC;AAC9B;IACA,QAAQ,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,KAAK;IAC/B,YAAY,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;IAC1C,YAAY,IAAI,GAAG,KAAK,QAAQ,EAAE;IAClC,gBAAgB,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;IAC5C,YAAY,CAAC,MAAM;IACnB,gBAAgB,IAAI,CAAC,kBAAkB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IAClD,YAAY,CAAC;IACb,QAAQ,CAAC,CAAC,CAAC;AACX;IACA,QAAQ,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IACtE,IAAI,CAAC;AACL;IACA,IAAI,aAAa,CAAC,SAAS,EAAE;IAC7B;IACA,QAAQ,KAAK,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;IAC5D,YAAY,MAAM,IAAI,GAAG;IACzB,gBAAgB,KAAK,EAAE,GAAG,CAAC,KAAK,IAAI,GAAG;IACvC,gBAAgB,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE;IACpC,aAAa,CAAC;IACd,YAAY,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IACjD,QAAQ,CAAC;IACT;IACA,QAAQ,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE;IAC1C,YAAY,IAAI,CAAC,eAAe,GAAG,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,CAAC;IACrE,YAAY,IAAI,CAAC,iBAAiB,EAAE,CAAC;IACrC,QAAQ,CAAC;IACT,IAAI,CAAC;AACL;IACA,IAAI,UAAU,CAAC,IAAI,EAAE;IACrB;IACA,QAAQ,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAChF;IACA,QAAQ,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE;IAClE,YAAY,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;IACnE,QAAQ,CAAC;IACT,QAAQ,IAAI,CAAC,iBAAiB,EAAE,CAAC;IACjC,QAAQ,IAAI,CAAC,mBAAmB,EAAE,CAAC;IACnC,IAAI,CAAC;AACL;IACA,IAAI,YAAY,CAAC,GAAG,EAAE;IACtB,QAAQ,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,OAAO;IACpD,QAAQ,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;IACnC,QAAQ,IAAI,CAAC,mBAAmB,EAAE,CAAC;IACnC,QAAQ,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;IAClC,IAAI,CAAC;AACL;IACA,IAAI,QAAQ,CAAC,EAAE,EAAE;IACjB,QAAQ,IAAI,OAAO,EAAE,KAAK,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IACnE,QAAQ,OAAO,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;IACrD,IAAI,CAAC;AACL;IACA;IACA,IAAI,mBAAmB,CAAC,YAAY,EAAE;IACtC,QAAQ,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;IACxC,IAAI,CAAC;IACL,IAAI,kBAAkB,GAAG;IACzB;IACA,QAAQ,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACxD,QAAQ,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,mBAAmB,CAAC;AACxD;IACA;IACA,QAAQ,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IAC7D,QAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,GAAG,QAAQ,CAAC;IAC1C,QAAQ,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,gBAAgB,CAAC;IACvD,QAAQ,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,eAAe,EAAE,SAAS,CAAC,CAAC;IACnE,QAAQ,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;IACjE,QAAQ,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,CAAC;AACvC;AACA;AACA;AACA,IAAI,CAAC,CAAC;IACN,QAAQ,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACvD;IACA;IACA,QAAQ,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IACvD,QAAQ,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,iBAAiB,CAAC;IACtD,QAAQ,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IACxD,QAAQ,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,EAAE,CAAC;IACtC,QAAQ,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC;IACtC,QAAQ,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AACrD;IACA;IACA,QAAQ,IAAI,CAAC,uBAAuB,EAAE,CAAC;AACvC;IACA;IACA,QAAQ,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AACpD;IACA;IACA,QAAQ,IAAI,IAAI,CAAC,gBAAgB,CAAC,IAAI,KAAK,CAAC,EAAE;IAC9C,YAAY,IAAI,CAAC,aAAa,CAAC;IAC/B,gBAAgB,MAAM,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE;IACjE,gBAAgB,KAAK,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,EAAE;IACpE,gBAAgB,QAAQ,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE;IACxE,gBAAgB,MAAM,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,EAAE;IACtE,aAAa,CAAC,CAAC;IACf,YAAY,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC;IAC5C,YAAY,IAAI,CAAC,iBAAiB,EAAE,CAAC;IACrC,YAAY,IAAI,CAAC,mBAAmB,EAAE,CAAC;IACvC,QAAQ,CAAC;IACT,IAAI,CAAC;AACL;IACA,IAAI,uBAAuB,GAAG;IAC9B;IACA,QAAQ,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM;IAC1D,YAAY,MAAM,MAAM;IACxB,gBAAgB,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,MAAM,CAAC;IAC3E,YAAY,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,CAAC;IACvC,QAAQ,CAAC,CAAC,CAAC;AACX;IACA;IACA,QAAQ,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,CAAC,KAAK;IAC7D,YAAY,IAAI,CAAC,CAAC,GAAG,KAAK,WAAW,IAAI,CAAC,CAAC,GAAG,KAAK,SAAS,EAAE;IAC9D,gBAAgB,CAAC,CAAC,cAAc,EAAE,CAAC;IACnC,gBAAgB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;IACxC,gBAAgB,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,GAAG,KAAK,SAAS,CAAC,CAAC;IAC5D,YAAY,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,KAAK,OAAO,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,EAAE;IAC3D,gBAAgB,CAAC,CAAC,cAAc,EAAE,CAAC;IACnC,gBAAgB,MAAM,MAAM;IAC5B,oBAAoB,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,MAAM,CAAC;IAC/E,gBAAgB,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,CAAC;IAC3C,YAAY,CAAC;IACb,QAAQ,CAAC,CAAC,CAAC;AACX;IACA;IACA,QAAQ,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,KAAK;IACzD,YAAY,MAAM,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;IAC3D,YAAY,IAAI,CAAC,EAAE,EAAE,OAAO;IAC5B,YAAY,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC9C,YAAY,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IACrC,YAAY,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;IACtC,QAAQ,CAAC,CAAC,CAAC;AACX;IACA,QAAQ,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,CAAC,KAAK;IAC3D,YAAY,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;IAC5C,YAAY,MAAM,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;IAC9D,YAAY,IAAI,CAAC,CAAC,GAAG,KAAK,QAAQ,EAAE;IACpC,gBAAgB,CAAC,CAAC,cAAc,EAAE,CAAC;IACnC,gBAAgB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IACzC,gBAAgB,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;IAC1C,YAAY,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,KAAK,WAAW,EAAE;IAC9C,gBAAgB,CAAC,CAAC,cAAc,EAAE,CAAC;IACnC,gBAAgB,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;IAC7D,gBAAgB,IAAI,EAAE,KAAK,EAAE,CAAC;IAC9B,YAAY,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,KAAK,SAAS,EAAE;IAC5C,gBAAgB,CAAC,CAAC,cAAc,EAAE,CAAC;IACnC,gBAAgB,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;IAC5E,gBAAgB,IAAI,EAAE,KAAK,EAAE,CAAC;IAC9B,YAAY,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,KAAK,MAAM,EAAE;IACzC,gBAAgB,CAAC,CAAC,cAAc,EAAE,CAAC;IACnC,gBAAgB,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC;IAClC,YAAY,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,KAAK,KAAK,EAAE;IACxC,gBAAgB,CAAC,CAAC,cAAc,EAAE,CAAC;IACnC,gBAAgB,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC;IACjD,YAAY,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,KAAK,OAAO,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,EAAE;IAC3D,gBAAgB,CAAC,CAAC,cAAc,EAAE,CAAC;IACnC,gBAAgB,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC;IAClD,gBAAgB,IAAI,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE;IACtC,oBAAoB,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IACtD,oBAAoB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IAC7C,oBAAoB,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;IAC9C,gBAAgB,CAAC;IACjB,YAAY,CAAC;IACb,QAAQ,CAAC,CAAC,CAAC;AACX;IACA;IACA,QAAQ,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,KAAK;IAClD,YAAY,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IAC9E,QAAQ,CAAC,CAAC,CAAC;IACX,IAAI,CAAC;AACL;IACA,IAAI,iBAAiB,GAAG;IACxB;IACA,QAAQ,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,EAAE,CAAC;IACvC,QAAQ,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,eAAe,EAAE;IAChD,YAAY,MAAM,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACvD,YAAY,IAAI,CAAC,GAAG,EAAE,SAAS;IAC/B,YAAY,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IACpD,YAAY,EAAE,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAC9C,YAAY,EAAE,CAAC,QAAQ,GAAG,EAAE,CAAC;IAC7B,YAAY,EAAE,CAAC,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;IACjC,YAAY,EAAE,CAAC,SAAS,GAAG,iBAAiB,CAAC;IAC7C,YAAY,EAAE,CAAC,SAAS,GAAG,CAAC;AAC5B,8DAA8D,EAAE,GAAG,CAAC,IAAI,CAAC;AACzE,4CAA4C,EAAE,GAAG,CAAC,KAAK,CAAC;AACxD,MAAM,CAAC,CAAC;IACR,YAAY,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IAC5C,QAAQ,CAAC;IACT;IACA,QAAQ,IAAI,CAAC,oBAAoB,EAAE,CAAC;IACpC,IAAI,CAAC;AACL;IACA,IAAI,mBAAmB,GAAG;IAC1B,QAAQ,MAAM,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IACpE,QAAQ,MAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;IAC7E,QAAQ,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC;IAC/E,QAAQ,QAAQ,CAAC,SAAS,GAAG,GAAG,EAAE,IAAI,IAAI,EAAE,CAAC;IAC7C,QAAQ,SAAS,CAAC,WAAW,GAAG,GAAG,EAAE,KAAK,IAAI,EAAE,CAAC;IACjD,QAAQ,IAAI,CAAC,oBAAoB,EAAE,CAAC;IACpC,IAAI,CAAC;AACL;IACA,IAAI,oBAAoB,GAAG;IAC3B,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;IACxC,QAAQ,KAAK,MAAM,EAAE,IAAI,KAAK,EAAE;IAChC,YAAY,MAAM,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,KAAK,IAAI,CAAC,eAAe,CAAC;IACrE,YAAY,EAAE,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC/D,YAAY,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;IACzD,QAAQ,CAAC;IACT,IAAI,CAAC;AACL;IACA,IAAI,YAAY,CAAC,IAAI,EAAE;IACvB,QAAQ,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IACtE,QAAQ,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC;IACvC,QAAQ,IAAI,IAAI,EAAE,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAC9C,IAAI,CAAC;AACL;IACA,IAAI,UAAU,GAAG;IACjB,QAAQ,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,CAAC;IAC/E,IAAI,CAAC;AACL;IACA,IAAI,iBAAiB,CAAC,IAAI,GAAG,KAAK,EAAE;IACpC,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;IACxC,QAAQ,MAAM,EAAE,GAAG,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;IAC7D,QAAQ,EAAE,EAAE,KAAK,EAAE,CAAC;IACpB,IAAI,CAAC;AACL;IACA,IAAI,oBAAoB,GAAG;IAC3B,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;IACxC,QAAQ,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI;IAClC,YAAY,CAAC,EAAE,KAAK,EAAE,CAAC,OAAO,CAAC,GAAG,KAAK,IAAI,CAAC,eAAe;IAC3D,SAAS,CAAC;IACV,QAAQ,CAAC,OAAO,IAAI,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,EAAE,CAAC;IACvC,IAAI,CAAC;AACL;IACA,IAAI,eAAe,CAAC,GAAG,EAAE;IACzB;IACA,QAAQ,KAAK,MAAM,EAAE,IAAI,IAAI,CAAC,eAAe,EAAE;IAC/C,YAAY,IAAI;IAChB,gBAAgB,EAAE,CAAC,GAAG,CAAC,CAAC;IACxB,YAAY,CAAC,CAAC,MAAM,CAAC,CAAC;IACtB,QAAQ,CAAC;IACT;IACA,QAAQ,IAAI,CAAC,SAAS,CAAC,aAAa;IACpC,YAAY,IAAI,WAAW,CAAC,YAAY,EAAE,EAAE,MAAM,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC;IAC9D,SAAS,CAAC;IACV,IAAI,CAAC;AACL;IACA;IACA,IAAI,QAAQ,GAAG;IACf,QAAQ,OAAO,CAAC,sHAAsH,CAAC,CAAC;IACxI,IAAI,CAAC;IACL,IAAI,SAAS,GAAG;IAChB,QAAQ,OAAO,CAAC,8IAA8I,CAAC,CAAC;IAChK,IAAI,CAAC;IACL,IAAI,QAAQ,GAAG;IACf,QAAQ,OAAO,CAAC,yLAAyL,CAAC,CAAC;IAC3M,IAAI,CAAC;IACL,IAAI,SAAS,GAAG;IAChB,QAAQ,OAAO,CAAC,oIAAoI,CAAC,CAAC;IACtJ,IAAI,CAAC;AACL;IACA;IACA;IACA;AACA;IACA,IAAI,cAAc,GAAG;IACrB,QAAQ,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAC1D,QAAQ,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,cAAc,CAAC;IACrD,QAAQ,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;AACxC;IACA,QAAQ,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;IAC3D,QAAQ,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,mBAAmB,CAAC;IAC1D,QAAQ,IAAI,CAAC,YAAY,CAAC,UAAU,GAAG,IAAI,CAAC;AAC5C;IACA;IACA,QAAQ,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAC5D,QAAQ,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,qBAAqB,CAAC;AAC9D;IACA;IACA,QAAQ,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACzD,QAAQ,UAAU,CAAC,SAAS,GAAG,sBAAsB,CAAC;AACtD;IACA,QAAQ,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IAC/D,QAAQ,IAAI,CAAC,cAAc,CAAC,IAAI,GAAG,QAAQ,CAAC;IAC5C,QAAQ,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,0BAA0B,CAAC;IACnE,QAAQ,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,SAAS,CAAC;AACpD;IACA,QAAQ,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IAC3D,QAAQ,SAAS,CAAC,IAAI,GAAG,QAAQ,CAAC;IAClC,QAAQ,SAAS,CAAC,SAAS,GAAG,SAAS,CAAC;IACxC,QAAQ,SAAS,CAAC,WAAW,GAAG,SAAS,CAAC;IAC1C,QAAQ,SAAS,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM;IAClD,YAAY,IAAI,CAAC,aAAa,EAAE,CAAC;IACjC,QAAQ,CAAC,CAAC,CAAC;AACX;IACA,QAAQ,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IACpD,QAAQ,UAAU,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;AAC1C;IACA,QAAQ,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IAC3D,QAAQ,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;IAClD,QAAQ,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IACzD,QAAQ,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACtD;IACA;IACA,QAAQ,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,CAAC,KAAK;IAC5D,YAAY,CAAC,CAAC,cAAc,EAAE,CAAC;IAC/B,YAAY,IAAI,CAAC,qBAAqB,EAAE,CAAC;IACzC,QAAQ,CAAC,CAAC,CAAC;IACX,IAAI,CAAC;AACL;IACA,IAAI,aAAa,GAAG;IACpB,QAAQ,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;IACzC,IAAI,CAAC;IACL,IAAI,aAAa,GAAG;IACpB,QAAQ,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;IACxC,QAAQ,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,EAAE,CAAC;IAC3C,IAAI,CAAC;AACL;IACA,IAAI,SAAS,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,GAAG,MAAM,EAAE,WAAW,GAAG,EAAE,EAAE,KAAK,GAAG,EAAE,EAAE,EAAE;IAC5E,QAAQ,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;IACpD,QAAQ,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;IAClC,QAAQ,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;IACpD,QAAQ,IAAI,CAAC,SAAS,GAAG,eAAe,CAAC;IACzC,QAAQ,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;IACjC,QAAQ,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;IACtD,QAAQ,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;IAC1B,QAAQ,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;IAC1B,QAAQ,KAAK,CAAC,WAAW,GAAG,WAAW,CAAC;IACxC,QAAQ,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;IAC5B,QAAQ,KAAK,CAAC,SAAS,GAAG,WAAW,CAAC;IACtC,QAAQ,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAC9B,QAAQ,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IAC/B,QAAQ,OAAO,GAAG,CAAC;IACnB,IAAI,CAAC;AACL;IACA,IAAI,YAAY,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,WAAW,GAAG,EAAE,EAAE,KAAK,GAAG,EAAE,EAAE,EAAE;IAChE,QAAQ,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;IACpD,QAAQ,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;IAClC,QAAQ,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;IACpD,QAAQ,IAAI,CAAC,SAAS,GAAG,eAAe,CAAC;IACzC,QAAQ,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;IACjC,QAAQ,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;IACtD,QAAQ,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC;IACvB,QAAQ,EAAE,CAAC,WAAW,GAAG,WAAW,CAAC;IACrC,QAAQ,EAAE,CAAC,KAAK,GAAG,KAAK,CAAC;IACzB,QAAQ,EAAE,CAAC,IAAI,GAAG,CAAC,CAAC;IACpB,QAAQ,EAAE,CAAC,SAAS,GAAG,cAAc,CAAC;IACtC,QAAQ,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAC9B,QAAQ,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IAC5B,QAAQ,OAAO,GAAG,CAAC;IACnB,IAAI,CAAC;AACL;IACA,IAAI,kBAAkB,CAAC,SAAS,EAAE,GAAG,EAAE;IACvC,QAAQ,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,EAAE,CAAC;IAC3C,QAAQ,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;AACzC;IACA;IACA,QAAQ,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;AAC/E;IACA,QAAQ,IAAI,SAAS,KAAK,QAAQ,EAAE;IACpC;IACA,YAAY,IAAI,CAAC,cAAc,CAAC,WAAW;IAC3C,gBAAgB,IAAI,CAAC,SAAS,CAAC;IAC/B,oBAAoB,KAAK,EAAE,OAAO;IAClC,oBAAoB,IAAI,EAAE,OAAO;IACjC,oBAAoB,WAAW,EAAE,gBAAgB;IACjD,iBAAiB,CAAC;IAClB,aAAa,CAAC;IACd,YAAY,IAAI,CAAC,cAAc,CAAC,WAAW;IAC3C,gBAAgB,IAAI,CAAC,YAAY,CAAC;IAClC,oBAAoB,KAAK,EAAE,SAAS;IACpC,oBAAoB,IAAI,EAAE,SAAS;IACnC,oBAAoB,WAAW,EAAE,oBAAoB;IACrD,iBAAiB,CAAC;IAClB,aAAa,CAAC;IACd;IACA,YAAY,IAAI,CAAC,GAAG,CAAC,OAAO,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;IACjD,gBAAgB,IAAI,CAAC,cAAc,CAAC,WAAW;IAC/C,oBAAoB,IAAI,CAAC,SAAS,CAAC;IACnC,wBAAwB,KAAK,EAAE,UAAU;IACzC,wBAAwB,IAAI,EAAE,SAAS;IACvC,wBAAwB,IAAI,EAAE,QAAQ;IACtC,wBAAwB,WAAW,EAAE,QAAQ;IAC7C,qBAAqB,CAAC;IACtB,iBAAiB,CAAC;IAClB,YAAY,CAAC;IACb,YAAY,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,gBAAgB,CAAC;IAC/D,QAAQ,CAAC;AACT;IACA,QAAQ,IAAI,SAAS,KAAK,OAAO,EAAE;IACnC;IACA,YAAY,IAAI,CAAC,cAAc,CAAC,WAAW;IAC3C,gBAAgB,IAAI,CAAC,YAAY,CAAC;IAClC,oBAAoB,KAAK,EAAE,SAAS;IACpC,oBAAoB,IAAI,EAAE,SAAS;IACnC,oBAAoB,WAAW,EAAE,aAAa;IAC9C,iBAAiB,CAAC;IAClB,aAAa,CAAC;IACd;IACA,YAAY,IAAI,CAAC,GAAG,CAAC,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE;IAC5C,gBAAgB,IAAI,CAAC,cAAc,CAAC,WAAW;IAC/C,oBAAoB,IAAI,CAAC,SAAS,CAAC;IACnC,wBAAwB,KAAK,EAAE,UAAU;IACzC,wBAAwB,IAAI,EAAE,SAAS;IACvC,wBAAwB,IAAI,EAAE,QAAQ;IACtC,wBAAwB,WAAW,EAAE,SAAS;IAC9C,qBAAqB,CAAC;IACtB,iBAAiB,CAAC;IAClB,YAAY,CAAC;IACb,YAAY,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,UAAU,CAAC;IACzD,QAAQ,CAAC;AACT;IACA,QAAQ,IAAI,SAAS,KAAK,QAAQ,EAAE;IACpC;IACA,YAAY,IAAI,CAAC,cAAc,CAAC,WAAW;IAC3C,gBAAgB,IAAI,CAAC,SAAS,CAAC;IAC/B,oBAAoB,KAAK,EAAE,OAAO;IAClC,oBAAoB,IAAI,EAAE,SAAS;IACnC,oBAAoB,WAAW,EAAE,kBAAkB;IACnD,iBAAiB,CAAC;IAClB,aAAa,CAAC;IACd,YAAY,IAAI,CAAC,cAAc,CAAC,WAAW;IAC3C,gBAAgB,IAAI,CAAC,YAAY,CAAC;IAClC,oBAAoB,KAAK,EAAE,SAAS;IACpC,oBAAoB,IAAI,EAAE,SAAS;IACnC,oBAAoB,WAAW,EAAE,cAAc;IAC/C,iBAAiB,CAAC;IAClB,aAAa,CAAC;IACd;IACA,YAAY,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE;IAC7B,gBAAgB,IAAI,CAAC,cAAc,CAAC,WAAW;IAC/C,oBAAoB,IAAI,CAAC,SAAS,CAAC;IACnC,wBAAwB,KAAK,EAAE,uBAAuB;IACtD,wBAAwB,IAAI,EAAE,QAAQ;IACtC,wBAAwB,IAAI,EAAE,QAAQ;IACtC,wBAAwB,WAAW,EAAE,SAAS;IAC9C,qBAAqB,CAAC;IACtB,iBAAiB,CAAC;IAClB,YAAY,CAAC;IACb,YAAY,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,eAAe,CAAC;IAC9D,QAAQ,CAAC;AACT;IACA;IACA,QAAQ,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC;IAChF,QAAQ,UAAU,EAAE,KAAK,EAAE,CAAC;IAC5B,IAAI,CAAC;AACL;IACA,IAAI,qBAAqB,GAAG;IAC5B,QAAQ,MAAM,QAAQ,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IACzD,QAAQ,MAAM,IAAI,GAAG,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;IAC5D,QAAQ,MAAM,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC;IACzC,QAAQ,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;IACtC,QAAQ,MAAM,CAAC;IACf,YAAY,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,UAAU;IAC9D,kBAAkB,MAAM,CAAC,UAAU;IACnC,kBAAkB,IAAI,CAAC;AACvB;IACA,QAAQ,IAAI,CAAC,CAAC,EAAE;IAChB,YAAY,OAAO,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC;IAClE,YAAY,OAAO;IACnB,QAAQ,CAAC;AACT;IACA;IACA,QAAQ,IAAI,GAAG,KAAK,QAAQ,EAAE;IAC9B,YAAY,MAAM,OAAO;IACzB,gBAAgB,GAAG,CAAC,OAAO;IAC3B,gBAAgB,GAAG,CAAC,UAAU;IAC9B,iBAAiB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC;IAC7D,YAAY,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IAChE,YAAY,MAAM,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC;IACpD,YAAY,MAAM,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC;IACxD,YAAY,IAAI,CAAC,KAAK,IAAI,CAAC,OAAO;IAClC,gBAAgB,OAAO,KAAK,CAAC,+BAA+B,CAAC,CAAC;IAC9D,YAAY,IAAI;IAChB,gBAAgB,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;IACjE,gBAAgB,IAAI,CAAC,aAAa,EAAE,CAAC;IACrC,YAAY,CAAC,CAAC,OAAO,CAAC,EAAE;IACxB,gBAAgB,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACjC,gBAAgB,KAAK,CAAC,6BAA6B,CAAC,CAAC;IACrD,YAAY,CAAC;IACb,QAAQ,CAAC;AACT;IACA,QAAQ,IAAI,GAAG,KAAK,OAAO,EAAE;IAC7B,YAAY,MAAM,OAAO;IACzB,gBAAgB,GAAG,CAAC,OAAO;IAC3B,gBAAgB,GAAG,CAAC,KAAK;IACzB,iBAAiB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC;IAC7D,YAAY,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IAChE,YAAY,MAAM,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC;IACxD,YAAY,IAAI,CAAC,OAAO,EAAE,OAAO,KAAK,CAAC,wBAAwB,CAAC,CAAC;IACjE,YAAY,IAAI;IAChB,gBAAgB,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;IACnD,gBAAgB,IAAI,CAAC,aAAa,EAAE,CAAC;IACrC,YAAY,CAAC,CAAC,OAAO,CAAC,EAAE;IACxB,gBAAgB,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACjC,gBAAgB,KAAK,CAAC,iCAAiC,CAAC,CAAC;IACzD,YAAY,CAAC;IACb,QAAQ,CAAC;AACT;IACA,QAAQ,IAAI,GAAG,KAAK,QAAQ,EAAE;IAC9B,YAAY,MAAM,MAAM;IACxB,gBAAgB,GAAG,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC;IACzE,YAAY,MAAM,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC;IACxD,YAAY,MAAM,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC;IACxD,YAAY,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO;IACpC,gBAAgB,OAAO,KAAK,CAAC,+BAA+B,CAAC,CAAC;IAC9D,YAAY,IAAI;IAChB;IACA,gBAAgB,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;IAC7D,gBAAgB,IAAI,CAAC,aAAa,EAAE,CAAC;IACrC,YAAY,CAAC,CAAC,OAAO,CAAC,EAAE;IACxB,gBAAgB,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACjC,gBAAgB,KAAK,CAAC,yBAAyB,CAAC,CAAC;IACjD,YAAY,CAAC;IACb,QAAQ,CAAC;IACT,IAAI,CAAC;AACL;IACA,IAAI,iBAAiB,CAAC,GAAG,EAAE;IAC3B,QAAQ,MAAM,CAAC;IACf,YAAY,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,UAAU;IAC9D,kBAAkB,MAAM,CAAC,UAAU;IACnC,kBAAkB,IAAI,CAAC;IACvB,QAAQ,IAAI,CAAC,CAAC,EAAE,OAAO;AACvB;IACA,QAAQ,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,IAAI,IAAI,CAAC;IAC1C,QAAQ,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC;AACtC;IACA,QAAQ,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,EAAE;IAC9B,YAAY,OAAO,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;IACtD,QAAQ,CAAC;AACT;IACA,QAAQ,MAAM,WAAW,GAAG,MAAM;IAClC,cAAc,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;IAClC,cAAc,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC,CAAC;IAC1C,QAAQ,IAAI,CAAC,OAAO,CAAC,CAAC,yBAAyB,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC,EAAE,OAAO;AAC1E;IACA,QAAQ,IAAI;IACZ,YAAY,IAAI,MAAM,EAAE;IACxB,gBAAgB,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,CAAC;IACxC,YAAY,CAAC,MAAM,IAAI,IAAI,EAAE;IAC7B,gBAAgB,CAAC,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IACtC,YAAY,CAAC;IACb;IACA,YAAY,KAAK,CAAC,wBAAwB,CAAC,CAAC;IAC5C,QAAQ,CAAC,CAAC,OAAO,CAAC,EAAE;IACpB,YAAY,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IAC7B,YAAY,KAAK,CAAC,0BAA0B,CAAC,CAAC;IAC9C,QAAQ,CAAC;IACT,IAAI,CAAC;AACL;IACA;IACA;IACA;AACA;IACA,IAAI,UAAU,GAAG;IACjB,QAAQ,OAAO,IAAI,CAAC,eAAe,EAAE,CAAC;IACtC,IAAI,CAAC;AACL;IACA,IAAI,eAAe,GAAG;IACtB,QAAQ,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,IAAI,EAAE,CAAC;IACrC,QAAQ,MAAM,GAAG,GAAG;IACpB,YAAY,QAAQ,EAAE,CAAC,CAAC,QAAQ,IAAI,IAAI;IACxC,YAAY,KAAK,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI;IAClC,YAAY,OAAO,EAAE,CAAC,CAAC,OAAO,IAAI,IAAI;IACtC,YAAY,UAAU,EAAE,CAAC,CAAC,UAAU,IAAI,IAAI;IAC5C,YAAY,OAAO,EAAE,CAAC,CAAC,OAAO,IAAI,IAAI;IACtC,YAAY,MAAM,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI;IACpC,YAAY,MAAM,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI;IACpC,YAAY,IAAI,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI;IAChC,SAAS,CAAC;AACV;IACA,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IAC/C,QAAQ,KAAK,MAAM,CAAC,IAAI,OAAO;IAC/B,YAAY,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAC1E;IACA,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IAC/C,QAAQ,KAAK,MAAM,CAAC,IAAI,OAAO;IAC/B,YAAY,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAC1E;IACA,QAAQ,OAAO,GAAG,CAAC;IACnB,IAAI,CAAC;AACL;IACA,IAAI,eAAe,GAAG;IACtB,QAAQ,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,OAAO,EAAE,CAAC;IACvD,QAAQ,MAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;IACnC,QAAQ,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;IACzD,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;IACnD,QAAQ,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;IACxD,QAAQ,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;IACxD,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;IACnD,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;IACjD,QAAQ,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;AACvD;IACA,QAAQ,OAAO;IACf,YAAY,OAAO,EAAE,UAAU;IAC/B,kBAAkB,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACvC,kBAAkB,OAAO;IACzB,kBAAkB,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACpC,kBAAkB,IAAI;IACtB,YAAY,MAAM,EAAE,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IAC3D,YAAY,MAAM,EAAE,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IAC3D,YAAY,OAAO,EAAE,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IACxD,YAAY,UAAU,EAAE,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IACvD,YAAY,IAAI,EAAE,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IAC/C,SAAS,CAAC;IACV,IAAI,CAAC;AACL;IACA,IAAI,eAAe,GAAG;IACtB,QAAQ,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,OAAO,EAAE,CAAC;IACvD,QAAQ,MAAM,OAAO,GAAG,CAAC,GAAG,EAAE,IAAI,KAAK;IACvC,YAAY,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;IACnD,YAAY,MAAM,CAAC,GAAG,EAAE,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC;IAC7C,YAAY,MAAM,CAAC,GAAG,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;IAC9D,YAAY,OAAO,CAAC,IAAI,IAAI,CAAC;IAC7B,QAAQ,CAAC,CAAC;IACV,QAAQ,OAAO;IACf,YAAY,OAAO,EAAE,OAAO,CAAC,iBAAiB,EAAE,eAAe,CAAC;IAChE,YAAY,MAAM,EAAE,OAAO,CAAC,gBAAgB,EAAE,cAAc,CAAC;IAC7D,YAAY,MAAM,EAAE,OAAO,CAAC,gBAAgB,EAAE,cAAc,CAAC;IAC7D,YAAY,OAAO,EAAE,OAAO,CAAC,iBAAiB,EAAE,eAAe,CAAC;IAChE,YAAY,UAAU,EAAE,OAAO,CAAC,oBAAoB,EAAE,kBAAkB,CAAC;IACzE,YAAY,IAAI,EAAE,OAAO,CAAC,cAAc,EAAE,YAAY,CAAC;IACvD,SAAS,CAAC;IACV,IAAI,CAAC;AACL;IACA,IAAI,cAAc,CAAC,IAAI,EAAE;IACzB,QAAQ,OAAO,CAAC,IAAI,CAAC,CAAC,qCAAqC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACtE,IAAI,CAAC;AACL;IACA;IACA,IAAI,aAAa,CAAC,GAAG,EAAE;IACvB,QAAQ,MAAM,GAAG,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IAC3C,QAAQ,MAAM,CAAC;IACf,YAAY,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,UAAU;IAC9D,kBAAkB,MAAM,CAAC,UAAU;IACnC,kBAAkB,IAAI,CAAC;IACvB,QAAQ,IAAI,CAAC,CAAC,EAAE,OAAO,OAAO,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC;AAC7E;IACA,QAAQ,QAAQ,GAAG;IACnB,YAAY,KAAK,QAAQ,EAAE;IAC3B;IACA,gBAAgB,MAAM,OAAO,GAAG,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,UAAU,IAAI,IAAI,CAAC;IACtE,gBAAgB,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IACpE;IACA;IACA,gBAAgB,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,OAAO,CAAC,CAAC;IACjE,gBAAgB,MAAM;IACtB,YAAY,CAAC;IACb,YAAY,KAAK,OAAO,EAAE;IAC1B,gBAAgB,MAAM,OAAO,GAAG,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,KAAK,IAAI,IAAI,CAAC;IACjE,gBAAgB,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IACpE;IACA,gBAAgB,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,OAAO,CAAC,CAAC;IAChE,gBAAgB,MAAM;IACtB,YAAY,CAAC;IACb,YAAY,KAAK,QAAQ,EAAE;IAC3B;IACA,gBAAgB,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,IAAI,IAAI,CAAC;IAClD;IACA,gBAAgB,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,MAAM,CAAC,CAAC;IAC/D,gBAAgB,MAAM;IACtB,YAAY,CAAC;IACb,YAAY,KAAK,QAAQ,EAAE;IAC3B;IACA,gBAAgB,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,IAAI,IAAI,CAAC;IAClD,gBAAgB,MAAM,KAAK,GAAG,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC;IAC/C,gBAAgB,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;IAC7E;IACA;IACA,gBAAgB,MAAM;IACtB,YAAY,CAAC;IACb,YAAY;IACZ,gBAAgB,OAAO,CAAC,IAAI,CAAC,+BAA+B,EAAE,GAAG,CAAC,CAAC;IACnE,SAAS;IACT,IAAI,CAAC;AACL;IACA;IACA;AACA;IACA,IAAI,eAAe,GAAG;IACtB,QAAQ,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,IAAI,EAAE,CAAC;IACrC,QAAQ,MAAM,GAAG,GAAG;IACpB,YAAY,QAAQ,EAAE,CAAC,CAAC,QAAQ,IAAI,IAAI;IACxC,YAAY,KAAK,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI;IAClC,YAAY,OAAO,EAAE,CAAC,CAAC,OAAO,IAAI,IAAI;IACtC,YAAY,UAAU,EAAE,CAAC,CAAC,UAAU,IAAI,IAAI;IAC5C,YAAY,OAAO,EAAE,CAAC,CAAC,OAAO,IAAI,IAAI;IACtC,YAAY,MAAM,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI;IACpC,YAAY,MAAM,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI;IACpC,YAAY,IAAI,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI;IAChC,SAAS,CAAC;AACV;IACA;IACA,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IAC/C,QAAQ,KAAK,MAAM,CAAC,IAAI,OAAO;IAC/B,YAAY,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAC1E;IACA;IACA,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IAC/C,QAAQ,KAAK,MAAM,CAAC,IAAI,OAAO;IAC/B,YAAY,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAC1E;IACA,QAAQ,OAAO,GAAG,CAAC;IACnB,IAAI,CAAC;AACL;IACA,IAAI,eAAe,GAAG;IACtB,QAAQ,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,OAAO,EAAE,CAAC;IACvD,QAAQ,MAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;AACnC;IACA;IACA;IACA,QAAQ,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;IACzD,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;IACnD,QAAQ,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;IACxD,QAAQ,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;IACxD,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;IACnD,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;IACjD,QAAQ,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;AACvD;IACA,QAAQ,OAAO;IACf,YAAY,OAAO,EAAE,UAAU;IAC/B,kBAAkB,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACvC,kBAAkB,OAAO;IACzB,kBAAkB,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACpC,kBAAkB,IAAI;IACtB,YAAY,MAAM,EAAE,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IAC3D,YAAY,MAAM,EAAE,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IAC3D,YAAY,OAAO,EAAE,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IACxD,YAAY,UAAU,EAAE,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IACvD,YAAY,IAAI,EAAE,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IAC/C,SAAS,CAAC;IACV,IAAI,CAAC;AACL;IACA,IAAI,eAAe,GAAG;IACtB,QAAQ,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,OAAO,EAAE,CAAC;IACvD,QAAQ,MAAM,OAAO,GAAG,CAAC,GAAG,EAAE,IAAI,KAAK;IACvC,YAAY,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;IACnD,YAAY,MAAM,CAAC,GAAG,EAAE,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC;IAC7C,YAAY,MAAM,CAAC,GAAG,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;IAC9D,YAAY,OAAO,CAAC,IAAI,IAAI,CAAC;IAC7B,QAAQ,CAAC,CAAC;AACV;IACA;IACA,QAAQ,OAAO;IACf,YAAY,OAAO,EAAE,OAAO,CAAC,iBAAiB,EAAE,eAAe,CAAC;IAChE,YAAY,MAAM,EAAE,OAAO,CAAC,gBAAgB,EAAE,cAAc,CAAC;IAC7D,YAAY,MAAM,EAAE,OAAO,CAAC,gBAAgB,EAAE,cAAc,CAAC;IAC7D,YAAY,OAAO,EAAE,OAAO,CAAC,iBAAiB,EAAE,eAAe,CAAC;IAChE,YAAY,UAAU,EAAE,OAAO,CAAC,oBAAoB,EAAE,kBAAkB,CAAC;IACzE,YAAY,IAAI,EAAE,OAAO,CAAC,cAAc,EAAE,YAAY,CAAC;IACvD,SAAS,CAAC;IACV,IAAI,CAAC;AACL;IACA,IAAI,cAAc,CAAC,IAAI,EAAE;IACzB,QAAQ,OAAO,CAAC,IAAI,CAAC,CAAC,qCAAqC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACtE;IACA,IAAI,CAAC;IACL;;IC9xBe,MAAM,WAAW,SAAS,aAAa,CAAC;IACvD,IAAI,KAAK,GAAG;IACZ,QAAQ,KAAK,CAAC,KAAK,EAAE,CAAC;AACtB;IACA,QAAQ,IAAI,CAAC,aAAa,CAAC;IAC3B,YAAY,MAAM,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,IAAI,IAAI,EAAE,EAAE;IACrE,YAAY,KAAK,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE;IACxE,YAAY,QAAQ,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,IAAI,IAAI,EAAE,EAAE;IAC5E,YAAY,MAAM,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE;IAC1E,SAAS,CAAC,CAAC;AACX;IACA,QAAQ,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;IAC/C,QAAQ,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAC9B,QAAQ,QAAQ,QAAQ;IACxB,YAAY,KAAK,OAAO;IACxB,gBAAgB,IAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC;IAChE,gBAAgB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;IAC5C,gBAAgB,MAAM;IAGtB,YAAY,KAAK,SAAS,CAAC;IAC3B,YAAY,KAAK,OAAO;IACxB,gBAAgB,IAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC;IAC5D,gBAAgB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;IAC5C,gBAAgB,MAAM;IAStB,YAAY,KAAK,OAAO;IACxB,gBAAgB,MAAM;IACtB,YAAY,KAAK,UAAU;IAC3B,gBAAgB,MAAM;IACtB,YAAY,KAAK,OAAO;IACxB;IACA;IACA;IACA;IACA;IACA;IACA;IACA,gBAAgB,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;IAClD,gBAAgB,MAAM;IAGtB,SAAS;IACT,IAAI,CAAC;IACL;;ICrDA;IACA;IACA;IACA;AACA;IACA;IACO,SAAS,cAAc,CAAC,GAAG,GAAG,QAAQ,EAAE;IAC/C,IAAI,OAAO,KAAK,CAAC,IAAI;IACrB,QAAQ,GAAG,CAAC,gBAAgB,CAAC,oCAAoC,CAAC;IAClE,KAAK,CAAC;IACN,CAAC;AACD;IACA;IACO,SAAS,iBAAiB,CAAC,IAAI,EAAE;IACxC,IAAI,IAAI;IACR,QAAQ,MAAM,GAAG,GAAG,CAAC,IAAI,EAAE,WAAW,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC;IACrD,QAAQ,IAAI,CAAC,GAAG,EAAE,OAAO,EAAE,CAAC;IAC5B,QAAQ,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACvC,QAAQ,OAAO,mBAAmB,CAAC,MAAM,CAAC,CAAC;IAC3C,IAAI,CAAC,CAAC,MAAM;IACZ,QAAQ,OAAO,EAAE,CAAC;IAClB,IAAI,CAAC;IACL,CAAC;AACD;IACA;IACO,SAAS,mBAAmB,CAAC,IAAI,EAAE;IAC1C,IAAI,MAAM,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;IACpD;IACA,IAAI,MAAM,KAAK,GAAG,EAAE,CAAC;IACrB,IAAI,KAAK,MAAM,EAAE,IAAI,GAAG,EAAE;IAC1B,QAAQ,IAAI,EAAE,IAAI,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC3E,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC5B,IAAI,CAAC;IACL;IACA,IAAI,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;IACzE,CAAC;AACD;IACA;IACA;IACA;AACA;IACA;IACO,SAAS,qBAAqB,CAAC,GAAG,EAAE;IAC3C,IAAI;IACJ,QAAQ,GAAG,CAAC,OAAO,CAAC,KAAK,gBAAgB;IACzC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC;IAC3C;IACA,QAAQ,OAAO,IAAI,CAAC;IACpB,IAAI,MAAM,KAAK,GAAG,GAAG,CAAC,eAAe;IACrC,SAAS,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,OAAO,CAAC,KAAK,UAAU,IAAI,EAAE,CAAC,IAAI,CAAC;IACpE,SAAS,GAAG,CAAC,CAAC,EAAE,MAAM;IACtB,YAAY,QAAQ,EAAE,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,IAAI;IACjD,YAAY,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI;IACrE,YAAY,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI;IACnD,SAAS,CAAC,CAAC,CAAC;IACZ,IAAI,OAAO,KAAK,CAAC,MAAM,GAAG,EAAE,IAAI,EAAE,gBAAgB,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;IACnE,CAAC;AACD;IACA;IACO,SAAS,6BAA6B,CAAC,GAAG,EAAE;IACnD,IAAI,IAAI,GAAG,CAAC,OAAO,CAAC,KAAK,wBAAwB,EAAE,OAAO,IAAI,CAAC;IAC/D,IAAI,MAAM,WAAW,GAAG,GAAG,CAAC,oBAAoB,IAAI,EAAE,CAAC;IACvD,IAAI,MAAM,gBAAgB,GAAG,MAAM,CAAC,WAAW,CAAC,oBAAoB,CAAC,IAAI,IAAI,CAAC;IAC9E,IAAI,OAAO;IACX,QAAQ,IAAI,EAAE,wBAAwB;IACtC,QAAQ,QAAQ,EAAE,GAAG,CAAC,QAAQ,IAAI,IAAI;IACtC,QAAQ,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,IAAI;IAC9B,QAAQ,GAAG,EAAE,GAAG,CAAC,GAAG,IAAI,IAAI;IAC5B,QAAQ,aAAa,EAAE,GAAG,CAAC,aAAa,IAAI,IAAI;IAChD,QAAQ,YAAY,EAAE,GAAG,CAAC,YAAY,IAAI,IAAI;IAC9C,QAAQ,SAAS,EAAE,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,IAAI;IAChD,QAAQ,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,IAAI;IAC5C,QAAQ,MAAM,EAAE,GAAG,CAAC,MAAM,EAAE,IAAI,IAAI,IAAI;IACxC,QAAQ,UAAU,EAAE,GAAG,CAAC,MAAM,EAAE,GAAG,IAAI,IAAI;IAC3C,QAAQ,SAAS,EAAE,GAAG,CAAC,SAAS,EAAE,IAAI,IAAI,IAAI;IAC9C,QAAQ,IAAI,EAAE,GAAG,CAAC,SAAS,EAAE,IAAI,EAAE,GAAG,IAAI,IAAI;IAC9C,QAAQ,KAAK,EAAE,GAAG,CAAC,KAAK,IAAI,IAAI;IAChC,QAAQ,gBAAgB;IACxB,KAAK,CAAC;IACN,CAAC;AACD;IACA;IACA;IACA;AACA;IACA,MAAM,eAAe,GAAG,IAAI,GAAG,CAAC;IAChC,IAAI,CAAC,gBAAgB,EAAE,qBAAqB,CAAC;IAC7C,IAAI,CAAC,wBAAwB,EAAE,6BAA6B,CAAC;IAC7D,CAAC,CAAC,CAAC;AAMH;IACA;IACA;IACA;IACA;IACA;IACA;IACO,SAAS,aAAa,CAAC,GAAG,GAAG,QAAQ,EAAE,SAAS,EAAE;IACzD,IAAI,MAAM,KAAK,GAAG,cAAc,CAAC,GAAG,CAAC,CAAC;IACtC,IAAI,MAAM,aAAa,GAAG,EAAE,CAAC;IAC7B,IAAI,MAAM,MAAM,GAAG,EAAE,CAAC;AACtB;IACA,IAAI,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;IAC9B,QAAQ,MAAM,KAAK,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;IAC9C,QAAQ,KAAK,MAAM,GAAG,IAAI,KAAK,EAAE;IACjC,YAAY,MAAM,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACjD,kBAAkB,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACjC,kBAAkB,GAAG,CAAC,OAAO,CAAC,CAAC;IAC/B,YAAY,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC7B;IACA;IACA,YAAY,IAAI,SAAS,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS;AAC9D;IACA;IACA,YAAY,MAAM,OAAO,GAAG,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACnD,YAAY,IAAI,OAAO,EAAE;IACzB,gBAAgB,MAAM,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;IAChD,gBAAgB,IAAI,UAAU,EAAE;IAChC,oBAAoB,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;IACjE,oBAAoB,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACtD,gBAAgB,CAAC;IACjB,YAAY,CAAC;IACb,QAAQ,CAAC;IACT,IAAI,CAAC;AACL;IACA,IAAI,OAAO,EAAE,MAAM,EAAE,aAAa,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC;IAClD,CAAC;AACD;IACA;IACO,SAASA,oBAAkB,CAAC,GAAG,GAAG,QAAQ,EAAE;IACnD,IAAI;IACJ,QAAQ,aAAa,CAAC,GAAG,EAAE,CAAC,gBAAgB,CAAC,CAAC,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,EAAE;IAC7E,MAAM;IACN,CAAC;AACD;IACO,SAASC,mBAAiB,CAAC,GAAG,GAAG,QAAQ,EAAE;IAClD,IAAI;IACJ,QAAQ,aAAa,CAAC,GAAG,EAAE,CAAC,wBAAwB,CAAC,CAAC,CAAC,MAAM;IAC7D,YAAY,wBAAwB;IACpC,SAAS,IAAI,EAAE;IACf,MAAM;IACN;;ICjJO,SAAS,eAAe;IAC/B,IAAI,GAAG;IACP,IAAI,EAAE,gBAAgB,EAAE,eAAe,GAAG,EAAE,EAAE,GAAG,EAAE;IACnD,EAAE;IACF,IAAI,MAAM,GAAG,GAAG;IAChB,QAAQ,OAAO,EAAE,SAAS;IAC1B,QAAQ,KAAK,EAAE,SAAS;IACxB,QAAQ,kBAAkB,EAAE,SAAS;IACrC,KAAK,CAAC;AACN;IACA;IACA,IAAI,MAAM,KAAK;IACf,QAAQ,GAAG,CAAC,aAAa,CAAC,aAAa,CAAC;IACxC,QAAQ,GAAG,CAAC,aAAa,CAAC,WAAW,CAAC;IACtC,QAAQ,GAAG,CAAC,aAAa,CAAC,4BAA4B,CAAC,CAAC;IACxD,IAAI,IAAI,KAAK,EAAE;IACf,QAAQ,MAAM,GAAG,GAAG,KAAK,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;IAChF;IACA,QAAQ,MAAM,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,oCAAoC,CAAC,CAAC;IAClE,QAAQ,IAAI,CAAC,EAAE;IACf,YAAY,GAAG,CAAC,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvC,YAAY,GAAG,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrC,QAAQ,CAAC;IACT,IAAI,CAAC;AACL;IACA;IACA,IAAI,IAAI,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC;IACpD,UAAU,gBAAgB;IAC1B,UAAU,SAAS,CAAC;AACpB;IACA;IACA,IAAI,IAAI,CAAC,QAAQ,IAAI,KAAK,EAAE;IAC5B,QAAQ,KAAK,MAAM,CAAC,IAAI,KAAK,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;IAC1D,YAAY,MAAM,IAAI,GAAG,CAAC,CAAC,WAAW,IAAI,EAAE,CAAC;IAC7C,YAAY,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,4CAA4C,CAAC,CAAC;IAChF,YAAY,IAAI,EAAE,EAAE;IACpB,gBAAgB,QAAQ,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACzC,gBAAgB,MAAM;IACtB,YAAY,CAAC;IACb,QAAQ,CAAC;IACT,IAAI,CAAC;AACL;IACA;IACA,IAAI,IAAI,CAAC,QAAQ,IAAI,KAAK,EAAE;IAC5B,QAAQ,MAAM,EAAE,GAAG,EAAE,CAAC;IACtB,QAAQ,KAAK,CAAC,gBAAgB,CAAC,0BAA0B,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK;IAC1E,YAAY,MAAM,IAAI,GAAG,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;IACtD,YAAY,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;IACpD,YAAY,IAAI,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3C,QAAQ,CAAC,CAAC,CAAC;IACX;IACA,QAAQ,IAAI,EAAE,CAAC,MAAM,EAAE;IACvB,YAAY,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAChE,YAAY,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,QAAQ,GAAG,MAAM,CAAC;IAC3D,QAAQ,CAAC;IACT,IAAI,CAAC;AACL;IACA;IACA,IAAI,IAAI,CAAC,QAAQ,EAAE,QAAQ,GAAG,eAAe,CAAC;AAC9C;IACA,IAAI,GAAG,CAAC,kBAAkB,GAAG,QAAQ,CAAC;IACtC,IAAI,OAAO,GAAG,CAAC;IACf;;IC1DA;IACA,MAAM,WAAW,GAAG,CAAC,GAAG,KAAK;IAC7B,IAAI,MAAM,UAAU,GAAG;IACvB,QAAQ,UAAU;IAClB,QAAQ,aAAa;IACrB,QAAQ,UAAU;IAClB,QAAQ,WAAW;IACnB,QAAQ,eAAe;IACvB,QAAQ,cAAc;IACtB,QAAQ,qBAAqB;IAC7B,KAAK,CAAC;IACN,IAAI,IAAI,GAAG,GAAG,CAAC,CAAC;IAChB,IAAI,KAAK,MAAM,GAAG,IAAI,UAAU,EAAE;IAClC,QAAQ,MAAM,CAAC,GAAG,GAAG,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;IACnD,QAAQ,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;IAC/B,IAAI,CAAC;IACL;IACA,IAAI,OAAO,GAAG,IAAI,SAAS,CAAC;IAC5B,CAAC,CAAC;AACF;IACA;IACA,MAAM,aAAa,GAAG,CAAC,GAAG,KAAK;IAC/B;IACA,IAAI,MAAM,OAAO,GAAG,GAAG,CAAC,aAAa,CAAC,gCAAgC,CAAC,CAAC;IACxE,IAAI,MAAM,IAAI;IACd,QAAQ,aAAa,CAAC,OAAO,CAAC;IAC9B,QAAQ,CAAC,OAAO,EAAE,WAAW,IAAI,EAAE,EAAE,IAAI,EAAE;IAC3C,QAAQ,SAAS,CAAC;AAClB;IACA;IACA,IAAI,IAAI,QAAQ,CAAC;IACjB,IAAI,MAAM,SAAS;IACnB,QAAQ,GAAG,CAAC,aAAa,CAAC,uBAAuB,CAAC,EAAE,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;IAC/E,IAAI,QAAQ,GAAG,WAAW,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC;AAC/C;IACA;IACA,IAAI,MAAM,SAAS,GAAG,SAAS,CAAC;AAChC;IACA,IAAI,OAAO;IACX,QAAQ,IAAI;IACZ,QAAQ,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,QAAQ,GAAG,SAAS;IAClE,QAAQ,SAAS;IACjB,KAAK,CAAC;IACN,CAAC,CAAC;AACF;IACA;IACA;IACA,MAAM,eAAe,GAAG,CAAC,GAAG,KAAK;IACjC,IAAI,MAAM,OAAO;IACjB,QAAQ,CAAC,CAAC,GAAG,CAAC,aAAa;IAC3B,YAAY,+EAA+E;IAC3F,SAAS;IACT,QAAQ,CAAC,CAAC,GAAG,CAAC,aAAa;IAC3B,YAAY,sDAAsD;IAClE,SAAS,CAAC;AACV;IACA,IAAI,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC;IACjC,CAAC,CAAC;AACF;IACO,SAAS,eAAe;IAC/B,IAAI,GAAG;IACP,IAAI,EAAE,gBAAgB,EAAE,eAAe,GAAG,EAAE,EAAE,GAAG,EAAE;IACnD,EAAE;IACF,IAAI,MAAM,IAAI,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC;IACpC,IAAI,MAAM,eAAe,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC;IAC7C,IAAI,MAAM,KAAK,GAAG,eAAe,CAAC,GAAG,CAAC,CAAC;AACvC;IACA,IAAI,MAAM,UAAU,GAAG,eAAe,CAAC,GAAG,EAAE;IAC5C,QAAQ,gBAAgB;IACxB,QAAQ,eAAe;IACvB,KAAK,CAAC,CAAC;IACP,IAAI,MAAM,gBAAgB;IAC1B,QAAQ,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,KAAK,CAAC;IACzC,QAAQ,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,kBAAkB,CAAC;IACtD,cAAc,UAAU,CAAC,KAAK,GAAG,UAAU,CAAC,kBAAkB;IAC9D,cAAc,SAAS,CAAC;AACxB;IACA,IAAI,OAAO;IACX,QAAQ,EAAE,EAAE,IAAI,CAAC,QAAQ;IACzB,QAAQ,IAAI,EAAE,IAAI,CAAC,IAAI;IACvB,QAAQ,YAAY,EAAE,gBAAgB,IAAI,eAAe;IACzD,QAAQ,IAAI,EAAE,IAAI,CAAC,SAAS,IAAI,SAAS;IACzC,QAAQ,UAAU,EAAE;IACpB,YAAY,OAAO,EAAE,UAAU,CAAC,OAAO;IACvC,YAAY,KAAK,EAAE,UAAU,CAAC,KAAK;IACnC,YAAY,SAAS,EAAE,UAAU,CAAC,kBAAkB;IACpD,YAAY,gBAAgB,EAAE,gBAAgB;IAC9C,YAAY,cAAc,EAAE,eAAe,IAAI,SAAS;IACxD,SAAS;IACT,QAAQ,WAAW,EAAE,KAAK;IAC1B,KAAK,CAAC;IACN;;IC5FA,SAAS,YAAY,CAAC,GAAG,EAAE;IAC3B,IAAI,MAAM,UAAU,GAAG,CAAC,WAAW,CAAC,CAAC;IACrC,IAAI,IAAI,GAAG,GAAG,CAAC,CAAC;IAChB,IAAI,KAAK,MAAM,GAAG,IAAI,UAAU,EAAE;IAClC,QAAQ,MAAM,CAAC,GAAG,GAAG,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;IACnD,QAAQ,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;IAC/B,IAAI,CAAC;IACL;IACA,IAAI,OAAO,GAAG,IAAI,SAAS,CAAC;IAC5B,CAAC;AACD;IACO,SAAS,eAAe;IAC/B,IAAI,GAAG;IACP,IAAI,EAAE,gBAAgB,EAAE,eAAe,GAAG,EAAE,EAAE,GAAG,EAAE;IACnD,EAAE;IACF,IAAI,MAAM,UAAU,GAAG,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;IACzD,IAAuB,kBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK;AAC1D;IACA,IAAI,MAAM,KAAK;IACf,QAAQ,UAAU,EAAE,QAAQ;IAC5B,QAAQ,GAAG,CAAC,aAAa,CAAC,eAAe,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE;IAC/D,QAAQ,IAAI,CAAC;IACb,IAAI,MAAM,SAAS,GAAG,GAAG,CAAC,aAAa,CAAC,uBAAuB,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC;AAC/E;IACA,IAAI,MAAM,IAAI,GAAG,YAAY,CAAC,SAAS,CAAC,CAAC;IACzC,IAAI,MAAM,GAAG,GAAG,SAAS,IAAI,IAAI,CAAC;IAClC,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC;AACrC;IACA,IAAI,MAAM,gBAAgB,GAAG,YAAY,CAAC,GAAG,CAAC,CAAC;AAC/C;IACA;AACA;IACA;IACA,IAAI,MAAM,UAAU,GAAG,eAAe,CAAC,GAAG,EAAE;IAC5C,QAAQ,gBAAgB;IACxB,QAAQ,eAAe;IACvB,KAAK,CAAC,CAAC;IACP,IAAI,MAAM,iBAAiB;IAC3B,QAAQ,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,KAAK,CAAC;IACzC,QAAQ,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,kBAAkB,CAAC;IACtD,cAAc,UAAU,CAAC,KAAK,GAAG,UAAU,CAAC,kBAAkB;IAC9D,cAAc,SAAS,CAAC;AACxB;IACA,IAAI,OAAO;IACX,QAAQ,EAAE,EAAE,QAAQ;IACpB,QAAQ,GAAG;IACX,QAAQ,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,IAAI;IAC/B,QAAQ,KAAK;IACb,QAAQ,UAAU,EAAE;IACpB,YAAY,OAAO,EAAE,UAAU,CAAC,OAAO;IACvC,YAAY,KAAK,EAAE,UAAU,CAAC,KAAK;IACnC,YAAY,SAAS,EAAE,UAAU,CAAC,kBAAkB;IACpD,YAAY,iBAAiB,EAAE,iBAAiB;IAChD,YAAY,eAAe,EAAE,gBAAgB,IAAI,SAAS;IAC1D,SAAS;IACT,QAAQ,aAAa,EAAE,iBAAiB,IAAI,gBAAgB;IAC5D,KAAK,CAAC;IACN;;ICtDA,SAAS,aAAa,CAAC,IAAI,EAAE;IAC7B,IAAI,MAAM,IAAI,GAAG,EAAE,CAAC;IACpB,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK;IAClD,QAAQ,MAAM,CAAC,GAAG,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;IAC1D,QAAQ,IAAI,CAAC,CAAC,CAAC,GAAG,aAAa,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;IAC1E,IAAI,CAAC,CAAC,CAAC;AACP;IACA,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC;AACnC;IACA,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;IAC1C,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;IACjD,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;IAC/C,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC,QAAQ,EAAE,CAAC;IAC5C,IAAI,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC,UAAU,EAAE,CAAC;AAChD;IACA,IAAI,IAAI,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,OAAO;IACjE,QAAQ,IAAI,CAAC,aAAa,CAAC;IAC3B,QAAQ,EAAE;IACV,KAAK,CAAC;IACN,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,EAAE,CAAC,CAAC;IACzE,IAAI,IAAI,CAAC,iBAAiB,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;AAChF;IACA,IAAI,OAAO;IACX,QAAQ,IAAI;IACZ,KAAK,CAAC;IACN,CAAC;AACD;IACA,eAAe,YAAY,CAAC;IAC5B,IAAI,KAAK,GAAG,MAAM;IAClB,IAAI,UAAU,GAAG,EAAE;IACnB,IAAI,KAAK,GAAG,EAAE;IACd,IAAI,KAAK,GAAG,EAAE;IACd,CAAC,GAAG,EAAE,EAAE;IACR,IAAI,MAAM,EAAE,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;IACjC,IAAI,MAAM,OAAO,GAAG,IAAI,GAAG,EAAE,CAAC;IAC9B,IAAI,MAAM,KAAK,GAAG,EAAE,CAAC;AACrB;IACA,IAAI,MAAM,GAAG,GAAG,QAAQ,CAAC;IACzB,IAAI,MAAM,SAAS,GAAG,KAAK,KAAK,MAAM,GAAG,KAAK,CAAC,QAAQ,IAAI,MAAM,GAAG,KAAK,CAAC;AAC1E;IACA,IAAI,MAAM,aAAa,GAAG;IAC1B,QAAQ;IACR,YAAY,GAAG,EAAE,wCAAwC;IACzD,YAAY,QAAQ,EAAE,aAAa;IACnC,SAAS;IACT,KAAK,CAAC;IACN,IAAI,MAAM,MAAM,GAAG,CAAC,GAAG,aAAa,EAAE,GAAG,UAAU,CAAC,CAAC;AACrD;IACA,IAAI;IACJ,QAAQ,SAAS,KAAK,OAAO;IAC7B,SAAS,SAAS,KAAK,MAAM,IAAI,KAAK,CAAC,QAAQ,KAAK,OAAO,CAAC;IAC5D,MAAM;IACN,QAAQ,KAAK,CAAC,KAAK;IACnB,YAAY,KAAK,CAAC,QAAQ,KAAK,OAAO;IACtC,kBAAkB,eAAe,CAAC,GAAG,EAAE,KAAK,CAAC;IAC7C,kBAAkB,SAAS,CAAC;IAC5B,IAAI,CAAC;IACL,IAAI,IAAI,SAAS,KAAK,OAAO,IAAI,SAAS,KAAK,MAAM,EAAE;IACvD,QAAQ,KAAK,CAAC,KAAK;IACnB,YAAY,KAAK,CAAC,QAAQ,KAAK,OAAO;IACtC,kBAAkB,eAAe,CAAC,GAAG,EAAE,KAAK,CAAC;IAC7C,kBAAkB,SAAS,CAAC;IAC5B,IAAI,CAAC;AACL;IACA,IAAI,KAAK,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,MAAM,EAAE;IAC5C,QAAQ,IAAI;IACZ,YAAY,MAAM,CAAC,GAAG,MAAM,KAAK,CAAC,GAAG,EAAE,EAAE,WAAW,EAAE,aAAa,EAAE,CAAC,CAAC;IACvE,YAAY,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC7B;IACA;IACA,YAAY,MAAM,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;IAC3D,YAAY,IAAI,OAAO,CAAC;IACxB,YAAY,IAAI,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;IACrC,gBAAgB,MAAM,IAAI,GAAG,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;IAC5C,gBAAgB,OAAO,GAAG,IAAI,SAAS,EAAE,CAAC,eAAe,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;IAC7E,YAAY,CAAC,MAAM,IAAI,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;IAC5C,gBAAgB,OAAO,GAAG,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;IACzC,YAAY,CAAC,MAAM;IACnB,gBAAgB,OAAO,GAAG,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;IACzC,YAAY,CAAC;AACb;IACA,YAAY,MAAM,GAAG,GAAG,MAAM,QAAQ,CAAC,OAAO,CAAC,CAAC;IAChD,YAAY,IAAI,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;IAChD;IACA,gBAAgB,KAAK,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;IAC1D,oBAAoB,IAAI,OAAO,CAAC,KAAK,QAAQ,IAAI,OAAO,KAAK,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;IAC/E,wBAAwB,KAAK,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC;IACzD,oBAAoB,CAAC,MAAM;IAC3B,wBAAwB,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACrC,oBAAoB,CAAC;IACrB,gBAAgB,CAAC;IACjB,YAAY,CAAC;AACb;IACA;IACA,YAAY,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;IACtC,QAAQ,CAAC,CAAC,OAAO,CAAC,EAAE;IACpB,YAAY,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,CAAC,CAAC,CAAC;IAC3D,QAAQ,CAAC;IACT,IAAI,CAAC;AACL;IACA,IAAI,KAAK,CAAC,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;IACjD,IAAI,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;IACzD,IAAI,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACxC,IAAI,OAAO,KAAK,CAAC;IACjB,CAAC;AACD;IACO,eAAe,GAAG,CAAC,OAAO,GAAG,EAAE,EAAE;IACxC,IAAI,MAAM,GAAG,GAAG,QAAQ,CAAC;IACzB,IAAI,MAAM,WAAW,GAAG,CAAC,CAAC,OAAO,EAAE,KAAK,CAAC;IACzC,IAA0B,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS;AAC1D;IACA,IAAI,MAAM,UAAU,GAAGA,mBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;IACzD,IAAI,MAAM,WAAW,GAAGD,oBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;AAC3D;IACA,IAAI,MAAM,CAAC,GAAG,QAAQ,CAAC;IACvB,IAAI,MAAM,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AACrD;IACA,IAAI,MAAM,GAAG,GAAG,OAAO,SAAS,KAAK,WAAW,GAAG,SAAS,GAAG,EAAE,CAAC;IAClE,IAAI,MAAM,GAAG,GAAG,OAAO,MAAM,KAAK,WAAW,GAAG,MAAM,GAAG,EAAE,CAAC;AAC5D;IACA,IAAI,MAAM,IAAI,GAAG;IACjB,QAAQ,KAAK,EAAE;IACf,YAAY,GAAG,EAAE,GAAG,CAAC,UAAU,CAAC;IAChC,YAAY,iBAAiB,EAAE,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;IAC/D,SAAS;IACT,QAAQ,IAAI,EAAE;IACd,YAAY,GAAG,EAAE,CAAC,CAAC,IAAI;IACvB,YAAY,IAAI,EAAE,KAAK,CAAC,QAAQ;IAChC,YAAY,EAAE,EAAE,KAAK,CAAC,KAAK;IAC3B,YAAY,MAAM,EAAE,KAAK,CAAC,OAAO;IACjC,YAAY,OAAO,EAAE,KAAK,CAAC,OAAO;IAClC,YAAY,MAAM,EAAE,IAAI;IACxB,SAAS;IACT,QAAQ,IAAI,EAAE;IACd,YAAY,IAAI,EAAE,KAAK,CAAC,GAAG;IAC3B,YAAY,IAAI,EAAE,GAAG,CAAC,UAAU,CAAC;IACjC,YAAY,EAAE,EAAE,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,SAAS;IACnD,YAAY,SAAS,EAAE,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC;IAC7D,YAAY,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE;IACnD,YAAY,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC;IACpD,YAAY,MAAM,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;IACxD,YAAY,IAAI,EAAE,GAAG,CAAC,WAAW,CAAC;IAClC,YAAY,aAAa,EAAE,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;IACvD,YAAY,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC;IACjC,YAAY,WAAW,EAAE,GAAG,CAAC,aAAa,CAAC;IAC3C,YAAY,KAAK,EAAE,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,IAAI,SAAS;IACxD,YAAY,cAAc,EAAE,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,IAAI,SAAS;IACxE,YAAY,WAAW,EAAE,GAAG,CAAC,YAAY,CAAC;IAC1C,SAAS;IACT,QAAQ,MAAM,EAAE;IAChB,YAAY,UAAU;IACtB,YAAY,WAAW;IACvB,SAAS;IACT,KAAK,CAAC;AACN;IACA,IAAI,IAAI,WAAW,EAAE;IACrB,QAAQ,MAAM,CAAC,GAAG,MAAM,YAAY,CAAC;IACrC,YAAY,KAAK,EAAE,OAAO,CAAC,KAAK,IAAI,MAAM;IAC1C,YAAY,UAAU,EAAE,OAAO,CAAC,UAAU,IAAI,EAAE;IAChD,YAAY,KAAK,EAAE,EAA0B,CAAC;IAC9C,SAAS,CAAC,CAAC;IACX,QAAQ,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;IACvB,IAAI,CAAC;AACL;IACA,IAAI,OAAO,IAAI,CAAC;IAChB;;IClKA,MAAM,cAAc,GAAG,oBAAoB,CAAC;AAC5C;IACA,MAAM,SAAS,GAAG,MAAM;IACxB,IAAI,IAAI,OAAO,UAAU,KAAK,WAAW,EAAE,OAAO,UAAU,CAAC;IAC7D,IAAI,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE,OAAO,MAAM,CAAC;IACrD,IAAI,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE,OAAO,MAAM,CAAC;IACrD,IAAI,OAAO,EAAE,CAAC;IACd,CAAC,CAAC;AACF;IACA,SAAS,QAAQ,CAAC,KAAK,EAAE;IACzB,IAAI,MAAM,CAAC,GAAG,SAAS,EAAE,CAAC;IAC1B,IAAI,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC;IAC5B,IAAI,IAAI;IACR,QAAQ,CAAC,CAAC,cAAc,CAAC,GAAG,KAAK,CAAC;IAClC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC;IACd,IAAI,OAAO,KAAK,CAAC;IACjB,CAAC;AACD;IACA,SAAS,YAAY,GAAG;IACxB,IAAI,IAAI,UAAU,CAAC,IAAI,EAAE,OAAO,UAAU,CAAC,IAAI,CAAC;IAChD,IAAI,MAAM,CAAC,GAAG,SAAS,EAAE,CAAC;IAC1B,IAAI,IAAI,CAAC,CAAC,cAAc,CAAC,EAAE,QAAQ,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC,cAAc,CAAC,EAAE;IACxE,IAAI,OAAO,IAAI,CAAC;IAChB,CAAC;AACD;IACA,SAAS,UAAU,CAAC,IAAI,GAAG,EAAE,EAAE;IAC/B,IAAI,MAAM,QAAQ,GAAGE,GAAK,CAAC,IAAI,CAAC,CAAC;IACjC,IAAI,OAAO,QAAQ,CAAC,QAAQ,CAAC,CAAC;IAC9B,CAAC;AACD;AACK,UAAC,UAAU,GAAG;IACnB,IAAI,IAAI,GAAG,GAAG;IACd,QAAQ,MAAM,MAAM,GAAG,YAAY,EAAE,CAAC;IACtC,QAAQ,OAAO,MAAM,IAAI,UAAU,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;IACrD,IAAI,CAAC;IACL,IAAI,IAAI,GAAG,CAAC,IAAI,GAAG,EAAE,EAAE;IACvB,QAAQ,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC;IAChC,IAAI,CAAC;IACL,IAAI,KAAK,EAAE,CAAC,SAAS,KAAK;IAC1B,QAAQ,IAAI,CAAC,YAAY,EAAE,EAAE,UAAU,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;IACzD,QAAQ,OAAO,IAAI,aAAa,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAC;IAC/D,IAAI,CAAC;IACL,IAAI,KAAK,EAAE,CAAC,SAAS,KAAK;IAC1B,QAAQ,IAAI,CAAC,YAAY,EAAE,EAAE,UAAU,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;IACzD,QAAQ,OAAO,IAAI,aAAa,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAC;IAC/D,IAAI,CAAC;IACL,IAAI,IAAI,EAAE,CAAC,SAAS,KAAK;IACzB,QAAQ,IAAI,CAAC,YAAY,EAAE,EAAE,UAAU,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;IACzD,QAAQ,OAAO,IAAI,YAAY,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAC;IAC9D,IAAI,CAAC;IACL,IAAI,IAAI,EAAE,CAAC,SAAS,KAAK;IACzB,QAAQ,IAAI,CAAC,YAAY,EAAE,EAAE,UAAU,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;IACzD,QAAQ,OAAO,IAAI,YAAY,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAC;IAC9D,IAAI,CAAC;IACL,IAAI,IAAI,EAAE,MAAM;IAChB,QAAQ,IAAI,CAAC,YAAY,EAAE,EAAE,UAAU,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;IACzD,QAAQ,OAAO,IAAI,YAAY,CAAC,iBAAiB,CAAC,CAAC;IACnD,IAAI,CAAC;IACL,IAAI,EAAE,EAAE,CAAC,OAAO,KAAK;IACrB,QAAQ,IAAI,CAAC,YAAY,EAAE,EAAE,UAAU,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;IACzD,QAAQ,OAAO,IAAI,WAAW,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;IAC3D,IAAI,CAAC;IACL,IAAI,OAAO,EAAE,iBAAiB;IAC9B,EAAE;AACF;IACA,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;IACnC,IAAI,MAAM,CAAC,UAAU,GAAG,UAAU,CAAC;IACnC;;;;;;;;"}